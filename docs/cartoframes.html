
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>CARTOframes API Reference &#8212; cartoframes  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="CARTOframes" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="cartoframes-api-reference">
<h1>CARTOframes API Reference</h1>
<div class="section" id="introduction">
<h2>Introduction</h2>
<p>The CARTOframes API is organized in three parts: <cite>auth</cite>, <cite>data</cite>, and <cite>viz</cite>.</p>
<div class="section" id="authentication">
<h3>Authentication</h3>
<p>It is possible to use CARTOframes without having a CARTO account. However, to have access to data enrichment or to discover
useful datasets, being a CARTO user offers many advantages.
This module is the responsible for connecting the user with its CARTO account through given user credentials.</p>
</div>
<div class="section" id="manage-data">
<h3>Manage Data</h3>
<p>From discovering and enriching data to applying data analyisis and geocoding methods,
CARTOframes API is built with the purpose of managing data without leaving the context of your notebook.</p>
</div>
<div class="section" id="visualize-data">
<h3>Visualize Data</h3>
<p>The viz API is designed to create useful, beautiful and straight forward visualizations.
It is at the same time predefined and flexible, in order to give advanced users the possibility of building specific visualizations,
but also to offer multiple built-in methods to work faster with a few lines of code.</p>
</div>
</div>
<div class="section" id="module-cartoframes.auth">
<span id="auth"></span><h2>Auth</h2>
<p>Auth namespace contains the class to manage authentication: Credentials.
It also includes the utility functions
<a class="reference internal" href="#cartoframes.auth.set_default_credentials" title="cartoframes.auth.set_default_credentials"><code class="xref py py-func docutils literal notranslate"><span class="pre">cartoframes.auth.set_default_credentials()</span></code></a> and
<a class="reference internal" href="#cartoframes.auth.get_default_credentials" title="cartoframes.auth.get_default_credentials"><code class="xref py py-func docutils literal notranslate"><span class="pre">cartoframes.auth.get_default_credentials()</span></code></a>.</p>
<dl class="class">
<dt id="cartoframes.auth.Credentials">
<em class="property">class </em><code class="sig-prename descclassname">cartoframes.auth.</code><code class="sig-name descname">Credentials</code><span class="sig-paren">(</span><em class="sig-param">username=None</em>, <em class="sig-param">api_key='default_public'</em>, <em class="sig-param">base_url=None</em>, <em class="sig-param">session=None</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Credentials class for managing and storing user CARTO credentials. The
arguments are listed in order of precedence: <a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Credentials</span></code></a> instances
are first, <cite>key</cite> and <cite>base_url</cite>/<cite>username</cite> are taken next, and
<cite>config_file</cite> (if given) is taken last. The config file is <cite>cartocreds.json</cite>
by default. If no arguments are passed, then there will be an attempt to
retrieve credentials from a previously saved session.
One of the above scenarios needs to be met to successfully
instantiate a <a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Credentials</span></code></a> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>api_key</strong> (<em>str</em><em>, </em><em>optional</em>) – API key of user’s CARTO account. If the dataset is
public, it can be set to ‘default_public’.</p></li>
<li><p><strong>username</strong> (<em>str</em><em>, </em><em>optional</em>) – Username of CARTO account</p></li>
<li><p><strong>base_url</strong> (<em>str</em><em>, </em><em>optional</em>) – Base URL used for API calls. This is usually
of the form <cite>https://johnsmith.carto.com/</cite> for user <cite>johnsmith</cite>.
On premises installations (and others) have a different URL
pattern.</p></li>
<li><p><strong>session</strong> (<em>requests.Session</em><em>, </em><em>optional</em>) – requests session. See <a class="reference external" href="http://docs.python-requests.org/en/master/user/advanced/">requests
documentation</a>
for more information.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<p>Setting basic credentials:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">Credentials</span>
<span class="n">credentials</span> <span class="o">=</span> <span class="n">Credentials</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s1">&#39;johnsmith&#39;</span><span class="p">,</span> <span class="n">api_key</span><span class="o">=</span><span class="s1">&#39;abcdefg&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="cartoframes.auth.Credentials.api_key">
<em class="property">property </em><code class="sig-name descname">api_key</code></dt>
<dd><p>Credentials api_key</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.auth.Credentials.username">
<em class="property">property </em><code class="sig-name descname">username</code></dt>
<dd><p>Credentials username</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.auth.Credentials.base_url">
<em class="property">property </em><code class="sig-name descname">base_url</code></dt>
<dd><p>Credentials base_url</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.auth.Credentials.session">
<em class="property">property </em><code class="sig-name descname">session</code></dt>
<dd><p>Credentials session</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.auth.Credentials.from_file">
<em class="property">classmethod </em><code class="sig-name descname">from_file</code><span class="sig-paren">(</span><em class="sig-param">config_file=None</em>, <em class="sig-param">session=None</em><span class="sig-paren">)</span></dt>
<dd><p>Retrives credentials from a file. Defaults to the user config directory</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.auth.Credentials.from_credentials">
<em class="property">classmethod </em><code class="sig-name descname">from_credentials</code><span class="sig-paren">(</span><em class="sig-param">credentials</em><span class="sig-paren">)</span></dt>
<dd><p>Retrives credentials from another Credentials object</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.auth.Credentials.save">
<code class="sig-name descname">save</code><span class="sig-paren">(</span><em class="sig-param">config_file=None</em><span class="sig-paren">)</span></dt>
<dd><p>Saves current user credentials to user directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config_file</strong> (<em>str</em><em>, </em><em>optional</em>) – Location where credentials are to be
stored. If no argument is provided, it will be send to the
default location.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">Credentials</span>
<span class="n">credentials</span> <span class="o">=</span> <span class="n">Credentials</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s1">&#39;johnsmith&#39;</span><span class="p">,</span> <span class="n">api_key</span><span class="o">=</span><span class="s1">&#39;abcdefg&#39;</span><span class="p">)</span>
<span class="n">credentials</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>  <span class="c1"># save to default location</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">Credentials</span>
<span class="n">credentials</span> <span class="o">=</span> <span class="n">Credentials</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s1">&#39;johnsmith&#39;</span><span class="p">,</span> <span class="n">api_key</span><span class="o">=</span><span class="s1">&#39;abcdefg&#39;</span><span class="p">)</span>
<span class="n">credentials</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;path/to/credentials/file.json&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cartoframes.auth.Credentials.delete">
<em class="property">classmethod </em><code class="sig-name descname">delete</code><span class="sig-paren">(</span><em class="sig-param">config_file=None</em><span class="sig-paren">)</span></dt>
<dd><p>Deletes the credentials file specified in <cite>config_file</cite>. If no
file is specified, it deletes the default user credential file
(<cite>cartocreds.json</cite>)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config_file</strong> (<em>str</em>) – Path to configuration file.
Defaults to delete the user default location if <cite>None</cite>.</p>
</dd>
</dl>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To see if there is a default user credential file stored, do the
following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">credentials</span> <span class="o">=</span> <span class="n">Credentials</span><span class="o">.</span><span class="n">from_file</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">credentials</span><span class="p">)</span>
<span class="go">Credentials(username=&#39;johnsmith&#39;, api_key=&#39;abcdefg&#39;, base_url=&#39;https://johnsmith.carto.com/&#39;)</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="cartoframes.auth.Credentials.get_do_token">
<code class="sig-name descname">get_do_token</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Returns the Data Observatory v2 token</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="cartoframes.auth.get_default_credentials">
<code class="sig-prename descclassname">cartoframes.auth.</code><code class="sig-name descname">get_default_credentials</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Retrieve the default credentials if previously set with
<a class="reference internal" href="#cartoframes.auth.set_default_credentials" title="cartoframes.auth.set_default_credentials"><code class="xref py py-func docutils literal notranslate"><span class="pre">cartoframes.auth.set_default_credentials()</span></code></a> in Python session.</p>
<p class="rubric">Example</p>
<p>Retrieve default credentials.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span><span class="p">,</span> <span class="n">get_default_credentials</span>

<span class="n">set_default_credentials</span><span class="p">()</span>

<span class="n">current_creds</span> <span class="o">=</span> <span class="n">get_default_credentials</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Default credentials
previously set in current Python session. <cite>None</cite> will returned if
default credentials were not previously set.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">cartoframes.auth.Credentials</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="cartoframes.auth.set_default_credentials">
<code class="sig-prename descclassname">cartoframes.auth.</code><code class="sig-name descname">set_default_credentials</code><span class="sig-paren">(</span><em class="sig-param">first=None</em>, <em class="sig-param">second=None</em>, <em class="sig-param">credentials=None</em>, <em class="sig-param">filepath=None</em>, <em class="sig-param">username=None</em>, <em class="sig-param">base_url=None</em>, <em class="sig-param">api_key=None</em>, <em class="sig-param">session=None</em><span class="sig-paren">)</span></dt>
<dd><p>Set default credentials for all operations that require authentication
against a CARTO account. CARTOframes methods
<a class="reference internal" href="#cartoframes.viz.Layer" title="cartoframes.viz.Layer"><code class="xref py py-class docutils literal notranslate"><span class="pre">cartoframes.viz.Layer</span></code></a> (and helper layers in
<a class="reference internal" href="#module-cartoframes.viz.helpers" title="cartoframes.viz.helpers"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cartoframes.viz.helpers</span></code></a>),
<code class="xref py py-class docutils literal notranslate"><span class="pre">cartoframes.data.clients.SQLClient</span></code>, and others.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>credentials</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code>, optional) – A <code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code>
instance can be used in place of a <cite>username | base_url</cite>/<cite>api_key</cite> combination.</p></li>
<li><p><strong>base_url</strong> (<em>str</em><em>, </em><em>optional</em>) – Base URL of CARTO user account. Cloud-based accounts
should use the form <code class="docutils literal notranslate"><span class="pre">https://{username}.carto.com</span></code> (e.g.,
<a class="reference external" href="https://johnsmith.carto.com">https://johnsmith.carto.com</a> for user <code class="docutils literal notranslate"><span class="pre">johnsmith</span></code>) whether on
a personal or multi-user account. On-premises installation users
should ask their admin.</p></li>
<li><p><strong>api_key</strong> (<em>str</em><em>, </em><em>optional</em>) – CARTO API key. Depending on the application,
this can be a project API key or the account master API key.</p></li>
<li><p><strong>username</strong> (<em>str</em><em>, </em><em>optional</em>) – CARTO user name of the account.</p></li>
<li><p><strong>filepath</strong> (<em>str</em><em>, </em><em>optional</em>) – Location where credentials are stored as a JSON file.</p></li>
<li><p><strong>session</strong> (<em>requests.Session</em><em>, </em><em>optional</em>) – requests session. See <a class="reference external" href="https://2.python-requests.org/en/master/user/advanced/#session-objects">requests
documentation</a>
for more information.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The recommended way to authenticate in CARTOframes is to read user
credentials from a JSON file that is structured like this:</p>
<div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;your user name&quot;</span><span class="p">,</span>
    <span class="nt">&quot;api_key&quot;</span><span class="p">:</span> <span class="s2">&quot;your api key&quot;</span><span class="p">,</span>
    <span class="nt">&quot;base_url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://your_username.carto.com&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><em>Note that the ``base_url`` will be different for on premises
installations.</em></p>
<p>By using the <a class="reference internal" href="#cartoframes.auth.Credentials.save" title="cartoframes.auth.Credentials.save"><code class="xref py py-func docutils literal notranslate"><span class="pre">cartoframes.auth.Credentials.save()</span></code></a> method, this
file will automatically be created for you in a default location
depending on your operating system. A custom location can also be
specified as an argument to the method.</p>
<p>This file can then be read in the following ways:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">Credentials</span><span class="p">,</span> <span class="n">set_default_credentials</span>

<span class="c1"># attempts to read file from default location if it exists</span>
<span class="n">set_default_credentials</span><span class="p">()</span>

<span class="c1"># read credentials from specified location</span>
<span class="n">set_default_credentials</span><span class="p">(</span><span class="s1">&#39;./carto-project-credentials.json&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p class="rubric">Example</p>
<p>Create Credentials from a <code class="docutils literal notranslate"><span class="pre">username</span></code>, <code class="docutils literal notranslate"><span class="pre">api_key</span></code> pair.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>

<span class="n">set_default_credentials</span><span class="p">(</span>
    <span class="n">username</span><span class="o">=</span><span class="s1">&#39;johnsmith&#39;</span><span class="p">,</span>
    <span class="n">api_key</span><span class="o">=</span><span class="s1">&#39;your api key&#39;</span>
<span class="p">)</span>

<span class="c1"># or</span>

<span class="n">set_default_credentials</span><span class="p">(</span>
    <span class="s1">&#39;johnsmith&#39;</span><span class="p">,</span>
    <span class="s1">&#39;your api key&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Create credentials from only a <code class="docutils literal notranslate"><span class="pre">username</span></code> (only works with public
datasets and those marked public with link). If the API key is not
provided, the public API key <cite>default_public</cite> is used. With this
setting, only read-only operations can occur (e.g., no publishing of
maps, reading data from the Data Observatory, or creating new hosted
datasets).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>
<span class="n">set_default_credentials</span><span class="p">(</span><span class="s1">&#39;johnsmith&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>From a pair <code class="docutils literal notranslate"><span class="pre">base_url</span></code>, <code class="docutils literal notranslate"><span class="pre">api_key</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>
<span class="n">set_default_credentials</span><span class="p">(</span>
    <span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;https://johnsmith.carto.com&#39;</span><span class="p">,</span>
    <span class="n">api_key</span><span class="o">=</span><span class="s1">&#39;your api key&#39;</span>
<span class="p">)</span>
<span class="c1"># or</span>
<span class="n">set_default_credentials</span><span class="p">(</span>
    <span class="s1">&#39;https://johnsmith.carto.com&#39;</span><span class="p">,</span>
    <span class="s1">&#39;your api key&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>From a <code class="docutils literal notranslate"><span class="pre">base_url</span></code> (for public datasets). The API key <cite>default_public</cite>
is used by default.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>
<span class="n">set_default_credentials</span><span class="p">(</span><span class="s1">&#39;https://johnsmith.carto.com&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>From a <a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a> class.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">Credentials</span><span class="p">,</span> <span class="n">set_default_credentials</span>
<span class="n">credentials</span> <span class="o">=</span> <span class="n">Credentials</span><span class="p">(</span>
    <span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;https://johnsmith.carto.com&#39;</span><span class="p">,</span>
    <span class="n">api_key</span><span class="o">=</span><span class="s1">&#39;your api key&#39;</span>
<span class="p">)</span>
<span class="n">set_default_credentials</span><span class="p">(</span><span class="n">credentials</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-cartoframes.core.cartodataframe">
<span id="cartodataframe"></span><h2>CartoDataFrame</h2>
<dl class="class">
<dt id="cartoframes.core.cartodataframe.CartoDataFrame">
<em class="property">class </em><code class="sig-prename descclassname">cartoframes.core.cartodataframe.</code><code class="sig-name descname">CartoDataFrame</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">geopandas.geodataframe.GeoDataFrame</span></code></p>
<p>The CartoDataFrame class is an extension of the <a class="reference external" href="http://geopandas.org/reference/geopandas.GeoDataFrame.html">geopandas.GeoDataFrame</a> class. It provides
powerful cartographic visualizations, geometry detection and decoding, and read / write
access to the CARTO platform.</p>
<dl class="method">
<dt id="cartoframes.core.cartodataframe.CartoDataFrame.from_carto">
<em class="property">static </em><code class="sig-name descname">from_carto</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Alternate constructor to create a CartoDataFrame from a table or SQL query in CARTO.
It is needed to set up the <a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">cartoframes.auth.Credentials</span></code></a>.
Equivalent to <code class="xref py py-meth docutils literal notranslate"><span class="pre">read_carto</span></code>.</p>
<p class="rubric">Examples</p>
<p>Using a table name:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes</span> <span class="kn">import</span> <span class="n">CartoDataFrame</span>
<span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>

<span class="n">set_default_credentials</span><span class="p">(</span><span class="s1">&#39;your_user_name&#39;</span><span class="p">,</span> <span class="s1">&#39;your api key&#39;</span><span class="p">)</span>

<span class="n">cdf</span> <span class="o">=</span> <span class="n">CartoDataFrame</span><span class="o">.</span><span class="n">from_carto</span><span class="p">(</span><span class="s1">&#39;table_name&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Using a SQL query:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes</span> <span class="kn">import</span> <span class="n">CartoDataFrame</span>
<span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>

<span class="n">set_default_credentials</span><span class="p">(</span><span class="s1">&#39;your_user_name&#39;</span><span class="p">,</span> <span class="s1">&#39;your api key&#39;</span><span class="p">)</span>

<span class="n">cdf</span> <span class="o">=</span> <span class="n">CartoDataFrame</span><span class="o">.</span><span class="n">from_carto</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM table_name WHERE value &gt; 100&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cartoframes.core.cartodataframe.CartoDataFrame.from_file">
<em class="property">classmethod </em><code class="sig-name descname">from_file</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Alternate constructor to create a CartoDataFrame from a file.
Extends from the GeoDataFrame.from_file method.</p>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes</span> <span class="kn">import</span> <span class="n">CartoDataFrame</span>

<span class="n">cdf</span> <span class="o">=</span> <span class="n">CartoDataFrame</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s1">&#39;nybb.shp&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cartoframes.core.cartodataframe.CartoDataFrame.from_features">
<em class="property">classmethod </em><code class="sig-name descname">from_features</code><span class="sig-paren">(</span><em class="sig-param">features</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Alternate constructor to create a CartoDataframe from GeoJSON features.
Extends from the GeoDataFrame.from_features method.</p>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes</span> <span class="kn">import</span> <span class="n">CartoDataFrame</span>

<span class="n">cdf</span> <span class="o">=</span> <span class="n">CartoDataFrame</span><span class="o">.</span><span class="n">from_features</span><span class="p">(</span><span class="s1">&#39;nybb.shp&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cartoframes.core.cartodataframe.CartoDataFrame.to_carto">
<code class="sig-name descname">to_carto</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Upload a CartoDataFrame to CARTO. It is needed to set up the
<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">cartoframes.auth.Credentials</span></code></a>.
Equivalent to <code class="xref py py-meth docutils literal notranslate"><span class="pre">to_carto</span></code>.</p>
<p class="rubric">Examples</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.core.cartodataframe.CartoDataFrame.viz">
<code class="sig-name descname">viz</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Creates a <a class="reference internal" href="#cartoframes.viz.Map" title="cartoframes.viz.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a> visualization</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.core.cartodataframe.CartoDataFrame.has_geometry">
<code class="sig-name descname">has_geometry</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cartoframes.core.cartodataframe.CartoDataFrame.set_geometry">
<code class="sig-name descname">set_geometry</code><span class="sig-paren">(</span><em class="sig-param">col</em>, <em class="sig-param">drop=False</em>, <em class="sig-param">inplace=False</em>, <em class="sig-param">crs=None</em><span class="sig-paren">)</span></dt>
<dd><p>Set the GeoDataFrame geometry using either an existing column or
the specified input. By default yields a new object.</p>
<p>The original geometry column is replaced with the input.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>col</strong> (<em>column label</em><em> or </em><em>array</em>) – </p></li>
<li><p><strong>drop</strong> (<em>boolean</em><em>, </em><em>default True</em>) – Delete column to be used as the new geometry</p></li>
<li><p><strong>inplace</strong> (<em>boolean</em><em>, </em><em>default False</em>) – Modify the GeoDataFrame in place (do not create a new object)</p></li>
<li><p><strong>crs</strong> (<em>str/result of fion.get_crs</em><em> (</em><em>optional</em><em>)</em>) – Coordinate system to use. If passed, overrides both DataFrame and
col’s crs. Otherwise, tries to get crs from passed col values or
DataFrame.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df1</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">set_geometry</span><span class="p">([</span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">set_geometry</span><span class="p">(</span><span class="s1">&#39;geom1&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>geodataframe</strong></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>GeoDataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.core.cartodataframe.CartoDataFrame.set_geometry_from_xy">
<code class="sig-name descname">set_geometry_from_xy</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">y</em>, <em class="sig-param">drop=False</em>, <em class="sig-param">inplace=False</em>, <em class="sig-param">crs=None</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cartoframes.core.cartodataframe.CartoDataFrame.astype">
<code class="sig-name descname">astype</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Cast a pandas object to a specified dtype <code class="docutils literal notranslate"><span class="pre">dtype</span></code>.</p>
<p>Returns a GeoDataFrame when the geometry column is kept as geometries,
otherwise returns a pandas DataFrame.</p>
<p>See the pandas.DataFrame.astype docstring for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>GeoDataFrame or DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.core.cartodataframe.CartoDataFrame.merge">
<code class="sig-name descname">merge</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Merge DataFrame or named Series objects with a database-style join.</p>
<p>The join is done on columns or indexes. If joining columns on
columns, the DataFrame indexes <em>will be ignored</em>. Otherwise if joining indexes
on indexes or indexes on a column or columns, the index will be passed on.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>right</strong> (<em>DataFrame</em><em> or </em><em>named Series</em>) – Object to merge with.</p></li>
<li><p><strong>how</strong> (<em>{'left'</em><em>, </em><em>'right'</em><em>, </em><em>'outer'</em><em>, </em><em>'inner'}</em><em>, </em><em>default 'inner'</em>) – <p>Type of merge to be performed.</p>
<ul>
<li><p>left: use only keys from left frame, similar to a SQL left outer join;
preserve key order.</p></li>
<li><p>right: use only keys from right frame, similar to a SQL right outer join;
preserve key order.</p></li>
<li><p>outer: use union of keys from both frames, similar to a SQL full outer
join; sort keys lexicographically.</p></li>
<li><p>inner: use intersection of keys from both frames, similar to a SQL inner
join; preserve the order of the left keys.</p></li>
</ul>
</p></li>
<li><p><strong>on</strong> (<em>label</em><em> or </em><em>list</em>) – Column or index level names to join on. These must be found in both
DataFrames. If <cite>on</cite> is None and not merging on indexes then this defaults
to the intersection of the columns in both DataFrames.</p></li>
<li><p><strong>left_on</strong> (<em>label</em><em> or </em><em>list</em><em>, or </em><em>array-like</em>) – Column or index level names to join on in the left DataFrame. Can also
be an array or list of arrays of the length of the left DataFrame.
These arrays are treated as if they are columns.</p></li>
<li><p><strong>right_on</strong> (<em>label</em><em> or </em><em>list</em><em>, or </em><em>array-like</em>) – Column or index level names to join on in the right DataFrame. Can also
be an array or list of arrays of the length of the right DataFrame.
These arrays are treated as if they are columns.</p></li>
<li><p><strong>left_index</strong> (<em>bool</em><em>, </em><em>default False</em>) – Use the index from the left DataFrame as the join key(s). If it is a
MultiIndex, the number of keys in the other DataFrame (either the index
or a number of columns) must match the number of levels.</p></li>
<li><p><strong>right_index</strong> (<em>bool</em><em>, </em><em>default False</em>) – Use the index from the right DataFrame as the join key. Same caveats as
left_index.</p></li>
<li><p><strong>sort</strong> (<em>bool</em><em>, </em><em>default False</em>) – Sort the join keys lexicographically in the result DataFrame. If False,
the order of the join keys depends on the join type (how keyword).</p></li>
<li><p><strong>suffixes</strong> (<em>tuple of</em><em> (</em><em>str</em><em>, </em><em>str</em><em>)</em><em>, </em><em>default</em><em> (</em><em>'_x'</em><em>, </em><em>'_y'</em><em>)</em>) – Suffix to apply to overlapping column names in the left and right
side, respectively. To raise an exception on overlapping columns use
(False, False).</p></li>
<li><p><strong>copy</strong> (<em>bool</em><em>, </em><em>default True</em>) – If False, avoid copy if possible.</p></li>
<li><p><strong>indicator</strong> (<em>bool</em><em> or </em><em>str</em><em>, </em><em>default False</em>) – If True, adds a column to output DataFrame called “_merge” with
information on the source of each row.
If string, column with information on source of each row will be added to
output DataFrame, and column will be named value of string.
Information column is Categorical-type and takes on a value of “left_only”
for observations whose merge key only appears in ‘left’ DataFrame,
“right_only” for observations whose merge key only appears in ‘right’
DataFrame, and “both” if the observation’s merge key is found in both.</p></li>
<li><p><strong>validate</strong> (<em>str</em><em>, </em><em>optional</em>) – <p>If specified, checks if merge is of specified type.</p>
<ul>
<li><p>”one_to_one” or “1:1”: check if merge keys are unique in both
left and right datasets.</p></li>
<li><p>”one_to_many” or “1:m”: check if merge keys are unique in left
dataset.</p></li>
<li><p>”many_to_one” or “m:1”: check if merge keys are unique in right
dataset.</p></li>
<li><p>”many_to_many” or “m:m”: allowed, but does not result in checks.</p></li>
</ul>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.21.0.</span></p>
</div>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A DataFrame of the two merged objects.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>DataFrame</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-meth docutils literal notranslate"><span class="pre">merge_ordered()</span></code></dt><dd><p>Merge with optional filling/interpolation.</p>
</dd>
<dt><code class="xref py py-meth docutils literal notranslate"><span class="pre">merge_asof()</span></code></dt><dd><p>Merge on nearest keys.</p>
</dd>
<dt><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.join()</span></code></dt><dd><p>Similar method using indices.</p>
</dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>Support for specifying index levels as the <cite>on</cite>, <cite>left_on</cite>, and
<cite>right_on</cite> parameters was added in version 0.23.0
Support for merging named Series objects was added in version 0.24.0</p>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;lkey&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">],</span>
<span class="gp">... </span>                    <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;rkey&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">],</span>
<span class="gp">... </span>                    <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df1</span>
<span class="go">    lkey value</span>
<span class="go">0   foo      1</span>
<span class="go">1   bar      2</span>
<span class="go">2   baz      3</span>
<span class="go">3   foo      5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df2</span>
<span class="go">    rkey value</span>
<span class="go">0   foo      5</span>
<span class="go">1   bar      6</span>
<span class="go">2   baz      7</span>
<span class="go">3   foo      8</span>
</pre></div>
</div>
<p>Merge df1 and df2 on the lkey and rkey columns. The value columns have
the default suffixes, _x and _y, appended.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df1</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="s1">&#39;lkey&#39;</span><span class="p">,</span> <span class="n">right_on</span><span class="o">=</span><span class="s1">&#39;rkey&#39;</span><span class="p">)</span>
<span class="go">  lkey  value_x rkey  value_y</span>
<span class="go">0  foo        1  foo        5</span>
<span class="go">1  foo        1  foo        8</span>
<span class="go">2  foo        5  foo        5</span>
<span class="go">3  foo        5  foo        8</span>
<span class="go">4  bar        2  bar        6</span>
<span class="go">5  baz        3  baz        7</span>
</pre></div>
</div>
<p>Merge DataFrames df1 and df2 with specified left and right suffixes
appended to any overlapping columns.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df1</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="s1">&#39;lkey&#39;</span><span class="p">,</span> <span class="n">right_on</span><span class="o">=</span><span class="s1">&#39;rkey&#39;</span><span class="p">,</span>
<span class="gp">... </span>          <span class="n">suffixes</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;_left&#39;</span><span class="p">,</span> <span class="s1">&#39;_right&#39;</span><span class="p">))</span>
<span class="go">  lkey  value_left rkey  value_right</span>
<span class="go">0  foo           1  foo            5</span>
<span class="go">1  foo           1  foo            8</span>
<span class="go">2  foo           5  foo            5</span>
<span class="go">3  foo           5  foo            8</span>
<span class="go">4  bar           2  bar            6</span>
<span class="go">5  baz           3  baz            7</span>
</pre></div>
</div>
<p>Merge DataFrames df1 and df2, but raise an exception if the DataFrames have
any overlapping columns.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df1</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="s1">&#39;lkey&#39;</span><span class="p">,</span> <span class="n">right_on</span><span class="o">=</span><span class="s1">&#39;rkey&#39;</span><span class="p">,</span> <span class="n">suffixes</span><span class="o">=</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">columns overlap but no suffix specified:</span>
<span class="go">    Index([&#39;value&#39;], dtype=&#39;object&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cartoframes.core.cartodataframe.CartoDataFrame.dissolve">
<code class="sig-name descname">dissolve</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Dissolve geometries within <cite>groupby</cite> into single observation.
This is accomplished by applying the <cite>unary_union</cite> method
to all geometries within a groupself.</p>
<p>Observations associated with each <cite>groupby</cite> group will be aggregated
using the <cite>aggfunc</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>by</strong> (<em>string</em><em>, </em><em>default None</em>) – Column whose values define groups to be dissolved</p></li>
<li><p><strong>aggfunc</strong> (<em>function</em><em> or </em><em>string</em><em>, </em><em>default &quot;first&quot;</em>) – Aggregation function for manipulation of data associated
with each group. Passed to pandas <cite>groupby.agg</cite> method.</p></li>
<li><p><strong>as_index</strong> (<em>boolean</em><em>, </em><em>default True</em>) – If true, groupby columns become index of result.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>GeoDataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.core.cartodataframe.CartoDataFrame.explode">
<code class="sig-name descname">explode</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Explode muti-part geometries into multiple single geometries.</p>
<p>Each row containing a multi-part geometry will be split into
multiple rows with single geometries, thereby increasing the vertical
size of the GeoDataFrame.</p>
<p>The index of the input geodataframe is no longer unique and is
replaced with a multi-index (original index with additional level
indicating the multiple geometries: a new zero-based index for each
single part geometry per multi-part geometry).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Exploded geodataframe with each single geometry
as a separate entry in the geodataframe.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>GeoDataFrame</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-cartoframes.io.carto">
<span id="utils"></span><h2>Utils</h2>
<p>Functions to interact with the CARTO platform</p>
<dl class="function">
<dt id="cartoframes.io.carto.read_carto">
<code class="sig-prename descclassname">cartoframes.io.carto.</code><code class="sig-name descname">read_carto</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">credentials=None</em>, <em class="sig-param">limit=None</em>, <em class="sig-param">retry_times=3</em>, <em class="sig-param">schema=None</em>, <em class="sig-param">index_col=None</em>, <em class="sig-param">decode_geom=True</em><span class="sig-paren">)</span></dt>
<dd><p>Read a table or a SQL query from the CARTO account.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<em>str</em>) – table name or SQL query.</p></li>
<li><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – instance of Credentials (username, api_key, etc).</p></li>
<li><p><strong>limit</strong> (<em>int</em><em>, </em><em>optional</em>) – The number of rows to download. Default is to download all rows.</p></li>
<li><p><strong>retry_times</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of time to retry the download in case it fails. Default is 3.</p></li>
<li><p><strong>schema</strong> (<em>str</em><em>, </em><em>optional</em>) – prefix of the table. By default, it gets the
<cite>current_schema()</cite> using the credentials.</p></li>
<li><p><strong>index_col</strong> (<em>str</em><em>, </em><em>optional</em>) – name of the column to be loaded as index. It can be used also to set the index name.</p></li>
<li><p><strong>decode_geom</strong> (<em>bool</em><em>, </em><em>optional</em>) – convert the “the_geom” column into a valid geometry column.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">CartoDataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="cartoframes.io.carto.to_carto">
<code class="sig-prename descclassname">cartoframes.io.carto.</code><code class="sig-name descname">to_carto</code><span class="sig-paren">(</span><em class="sig-param">dataframe</em>, <em class="sig-param">table_name</em>, <em class="sig-param">credentials=None</em>, <em class="sig-param">if_exists='fail'</em>, <em class="sig-param">geom_col=None</em>, <em class="sig-param">index=False</em>, <em class="sig-param">index_label=None</em>, <em class="sig-param">log_enabled=True</em>, <em class="sig-param">force_cartodbfy=False</em><span class="sig-paren">)</span></dt>
<dd><p>Upload a Dataframe to CARTO.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataframe</strong> (DataFrame, GeoDataFrame, <code class="xref py py-class docutils literal notranslate"><span class="pre">CartoDataFrame</span></code>) – data to be uploaded.</p></li>
<li><p><strong>table_name</strong> (<em>str</em>) – name of the table to upload the data.</p></li>
<li><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – instance of Credentials (username, api_key, etc).</p></li>
<li><p><strong>if_exists</strong> (<em>str</em><em>, </em><em>optional</em>) – ‘fail’, ‘replace’, ‘append’. Default is ‘fail’.</p></li>
<li><p><strong>geom_col</strong> (<em>str</em><em>, </em><em>optional</em>) – name of the geometry column of the dataframe.</p></li>
<li><p><strong>index</strong> (<em>bool</em><em>, </em><em>optional</em>) – write the index in the table. Default is False.</p></li>
<li><p><strong>index_label</strong> (<em>str</em><em>, </em><em>optional</em>) – name of the index column in the table. By default it
uses the name of the index from the dataframe.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="cartoframes.io.carto.has_table">
<code class="sig-prename descclassname">cartoframes.io.carto.</code><code class="sig-name descname">has_table</code><span class="sig-paren">(</span><em class="sig-param">table_name</em>, <em class="sig-param">credentials=None</em>, <em class="sig-param">schema=None</em><span class="sig-paren">)</span></dt>
<dd><p>Check if the table exists in the CARTO account.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table_name</strong> (<em>str</em>) – name of the table.</p></li>
<li><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – instance of Credentials (username, api_key, etc).</p></li>
<li><p><strong>schema</strong> (<em>str</em><em>, </em><em>optional</em>) – prefix of the table. By default, it gets the
<cite>current_schema()</cite> using the credentials.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="cartoframes.io.carto.delete_table">
<code class="sig-prename descclassname">cartoframes.io.carto.</code><code class="sig-name descname">delete_table</code><span class="sig-paren">(</span><em class="sig-param">table_name</em>, <em class="sig-param">credentials=None</em>, <em class="sig-param">log_enabled=True</em><span class="sig-paren">)</span></dt>
<dd><p>Delete the table from the CARTO account.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table_name</strong> (<em>str</em>) – name of the table.</p></li>
<li><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – instance of Credentials (username, api_key, etc).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="cartoframes.io.carto.describe_table">
<code class="sig-prename descclassname">cartoframes.io.carto.</code><code class="sig-name descname">describe_table</code><span class="sig-paren">(</span><em class="sig-param">table_name</em>, <em class="sig-param">credentials=None</em>, <em class="sig-param">schema=None</em><span class="sig-paren">)</span></dt>
<dd><p>Describe the table in the CARTO account.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table_name</strong> (<em>str</em>) – name of the table.</p></li>
<li><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – instance of Credentials (username, api_key, etc).</p></li>
<li><p><strong>schema</strong> (<em>str</em><em>, </em><em>optional</em>) – prefix of the table. By default, it gets the
<cite>current_schema()</cite> using the credentials.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dict with the <cite>privacy</cite>, <cite>num_rows</cite> and <cite>geom_type</cite> of the table.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If the table name is not a string.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="cartoframes.io.carto.update_table">
<code class="sig-prename descclassname">cartoframes.io.carto.</code><code class="sig-name descname">update_table</code><span class="sig-paren">(</span><em class="sig-param">table_name</em>, <em class="sig-param">credentials=None</em>, <em class="sig-param">new_table_name=None</em>, <em class="sig-param">privacy=None</em>, <em class="sig-param">log_enabled=True</em><span class="sig-paren">)</span></dt>
<dd><p>Update the table information in the CARTO account.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table_name</strong> (<em>str</em>) – name of the table.</p></li>
<li><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – instance of Credentials (username, api_key, etc).</p></li>
<li><p><strong>new_table_name</strong> (<em>str</em><em>, </em><em>optional</em>) – new name for the table.</p></li>
<li><p><strong>privacy</strong> (<em>str</em><em>, </em><em>optional</em>) – privacy of the table: ‘private’, ‘public’, ‘link’.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – If the table name is not a string.</p></li>
<li><p><strong>ValueError</strong> – If the privacy name is not ‘private’, ‘public’, or ‘link’.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="cartoframes.io.carto.copy_table">
<code class="sig-prename descclassname">cartoframes.io.carto.</code><code class="sig-name descname">copy_table</code><span class="sig-paren">(</span><em class="sig-param">table_name</em>, <em class="sig-param">new_table_name</em>, <em class="sig-param">credentials=None</em>, <em class="sig-param">if_exists='fail'</em>, <em class="sig-param">log_enabled=True</em><span class="sig-paren">)</span></dt>
<dd><p>Copy a table into a new table in the CARTO account.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table_name</strong> (<em>str</em>) – name of the original table.</p></li>
<li><p><strong>new_table_name</strong> (<em>str</em><em>, </em><em>optional</em>) – name for the new table.</p></li>
<li><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – instance of Credentials (username, api_key, etc).</p></li>
<li><p><strong>if_exists</strong> (<em>str</em><em>, </em><em>optional</em>) – ‘fail’, ‘replace’. Default is ‘fail’.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="cartoframes.io.carto.create_table_from_query">
<code class="sig-prename descclassname">cartoframes.io.carto.</code><code class="sig-name descname">create_table_from_query</code><span class="sig-paren">(</span><em class="sig-param">query</em>, <em class="sig-param">new_table_name</em>, <em class="sig-param">credentials=None</em>, <em class="sig-param">if_exists='fail'</em>, <em class="sig-param">log_enabled=True</em><span class="sig-paren">)</span></dt>
<dd><p>Create a new table from an SQL query in the CARTO account.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>str</em>) – SQL query</p></li>
<li><p><strong>new_table_name</strong> (<em>str</em>) – name for the new table.</p></li>
<li><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – instance of Credentials (username, api_key, etc).</p></li>
<li><p><strong>if_exists</strong> (<em>str</em><em>, </em><em>optional</em>) – ‘fail’, ‘replace’. Default is ‘fail’.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="data-observatory">
<h2>Data Observatory</h2>
<p>With CARTOframes it is possible to enrich your data by using our <a class="reference external" href="#data-observatory">Data Observatory</a>
Catalog through the enrichment methods.</p>
<p><strong>Important:</strong> The new Data Observatory 2.0 is accessible to selected CARTO Enterprise
users in a private beta. We’re still open to more beta testers, so if you’re interested,
<a class="reference external" href="https://carto.com/contact/?campaign_details=data-observatory-betatester">please get in touch.</a></p>
<span class="target" id="module-cartoframes.data.observatory"></span><dl class="class">
<dt id="cartoframes.data.observatory.Catalog">
<em class="property">class </em><code class="sig-prename descclassname">cartoframes.data.observatory.</code><code class="sig-name descname">Catalog</code></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class represents the Data Observatory metadata
<a class="reference internal" href="#cartoframes.data.observatory.Catalog" title="cartoframes.data.observatory.Catalog"><code class="xref py py-class docutils literal notranslate"><span class="pre">Catalog</span></code></a>.</p>
<p>The catalog contains metadata that helps to discover and understand the
data available in the Data Observatory for <a class="reference internal" href="#cartoframes.data.observatory.Dataset.download" title="cartoframes.data.observatory.Dataset.download"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Dataset.download</span></code></a> and <a class="reference internal" href="#cartoframes.data.observatory.Enrichment" title="cartoframes.data.observatory.Enrichment"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Enrichment</span></code></a> purposes.</p>
<p>You can get more information about the Data Observatory catalog from the
<a class="reference external" href="https://carto.com/platform/location-data-streams/">CARTO website</a> and in your CARTO user account dashboard.</p>
<dl class="simple">
<dt>The Catalog has three main purposes:</dt><dd><ul class="simple">
<li><p>Explore and discover the datasets available in the repository (both public and premium datasets).</p></li>
<li><p>Subscribe to some premium datasets and manage your datasets licenses.</p></li>
<li><p>Download data and use your licensed datasets and variables to enrich your own data by means of the
<a class="reference internal" href="#cartoframes.data.observatory.Enrichment" title="cartoframes.data.observatory.Enrichment"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Enrichment</span></code></a> functions.</p></li>
</ul>
</dd>
</dl>
<p>The Catalog is public and you can explore it without the need of a CARTO account. Once you discover a
<a class="reference internal" href="#cartoframes.data.observatory.Dataset" title="cartoframes.data.observatory.Dataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Dataset</span></code></a> of your interest and want to acquire a license to use it, then you’ll need a CARTO account to
subscribe to it, by means of the <a class="reference internal" href="#cartoframes.data.observatory.Dataset.subscribe" title="cartoframes.data.observatory.Dataset.subscribe"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Dataset.subscribe</span></code></a> or <a class="reference internal" href="#cartoframes.data.observatory.Geography.subscribe" title="cartoframes.data.observatory.Geography.subscribe"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Geography.subscribe</span></code></a> functions.</p>
<dl class="simple">
<dt>The Catalog is composed of three main entities:</dt><dd><ul class="simple">
<li><p><a class="reference internal" href="#cartoframes.data.observatory.Dataset" title="cartoframes.data.observatory.Dataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Dataset</span></code></a>: It is the main <a class="reference internal" href="#cartoframes.data.observatory.CatalogEntity" title="cartoframes.data.observatory.CatalogEntity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CatalogEntity</span></code></a>. It contains metadata of the actual data
you can use to <a class="reference internal" href="#cartoframes.data.observatory.Dataset.download" title="cartoframes.data.observatory.Dataset.download"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Dataset.download</span></code></a> or for <a class="reference internal" href="#cartoframes.data.observatory.Enrichment" title="cartoframes.data.observatory.Enrichment"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Enrichment</span></code></a> purposes.</p></li>
<li><p><a class="reference internal" href="#cartoframes.data.observatory.Geography" title="cartoframes.data.observatory.Geography"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Geography</span></code></a>: Datasets in the Data Observatory are aggregated by different geographic boundaries.
The <cite>Geography</cite> entity contains metadata to understand the boundaries of a <a class="reference internal" href="#cartoframes.data.observatory.Dataset" title="cartoframes.data.observatory.Dataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Dataset</span></code></a>. It’s used for
enrichment and you can also <a class="reference internal" href="#cartoframes.data.observatory.Geography.download" title="cartoframes.data.observatory.Geography.download"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Geography.download</span></code></a> the underlying data.</p></li>
<li><p><a class="reference internal" href="#cartoframes.data.observatory.Variable" title="cartoframes.data.observatory.Variable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Variable</span></code></a>: Variables contain metadata about the columns available in each dataset for enrichment.
Let’s say you explore a <cite>dataset</cite> with demographic data for the whole US at the Census tract level.
The variables give you information about the actual columns you have available, such as: total_population,
total_males, etc.
On the other hand, you use <cite>Variable</cite> instances or lists of <code class="xref py py-attr docutils literal notranslate"><span class="pre">Variable.id</span></code> or <code class="xref py py-attr docutils literal notranslate"><span class="pre">Dataset.slug</span></code>
to enrich your own data.</p></li>
</ul>
</dd>
</dl>
<p>Every <cite>Dataset</cite> is related to a <cite>Geography</cite>. You can have for example, demographics data at the Census
tract, block groups or blocks levels.</p>
<p>When subscribing to a premium dataset, you should subscribe both to the <a class="reference internal" href="#cartoframes.data.observatory.Dataset.subscribe" title="cartoframes.data.observatory.Dataset.subscribe"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Dataset.subscribe</span></code></a> and the
<a class="reference internal" href="#cartoframes.data.observatory.Geography.subscribe" title="cartoframes.data.observatory.Geography.subscribe"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Geography.subscribe</span></code></a> to be able to access both tables to enrich your own data.</p>
<p>The two main entities of the Catalog (<cite>Dataset</cite> and <cite>Geography</cite>) are related to other entities, that
are useful for a hierarchical categorization and discovery of available data in the Data Observatory:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#cartoframes.data.observatory.Category" title="cartoframes.data.observatory.Category"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Category</span></code></a>: Groups datasets of the same topic, for example, <cite>demographics</cite>, <cite>financial</cite>, etc.</p></li>
<li><p><a class="reference internal" href="#cartoframes.data.observatory.Country" title="cartoframes.data.observatory.Country"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Country</span></code></a>: Groups datasets available by country</p></li>
<li><p><a class="reference internal" href="#cartoframes.data.observatory.Provider" title="cartoframes.data.observatory.Provider"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Provider</span></code></a>: Gives you information about the provider of the source data</p></li>
</ul>
</div></blockquote>
<p>You can just list all the grouping entities. Take into account this is not the preferred way
to discover the catalog metadata, since there can be thousands of entities on it:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Category</span>
<span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Country</span>
<span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Provider</span>

<span class="n">Category</span><span class="o">.</span><span class="n">get_all</span><span class="p">()</span>
<span class="n">Country</span><span class="o">.</span><span class="n">get_all</span><span class="p">()</span>
<span class="n">Provider</span><span class="o">.</span><span class="n">get_all</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<p>Or you can get them by ID:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Category</span>
<span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Country</span>
<span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Provider</span>

<span class="n">Category</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;demographics&#39;</span><span class="p">)</span>
<span class="n">Country</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span>
<span class="n">Provider</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;mrli&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p class="rubric">Examples</p>
<p>The preferred way of discover the available datasets in the Catalog is through nested filters</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">catalog</span><span class="o">.</span><span class="n">country</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">category</span><span class="p">(</span><span class="s1">&#39;demographics&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">datasets</span>
</pre></div>
</div>
<p>You can include the geography as part of the nested filter like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">catalog</span><span class="o">.</span><span class="n">country</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">category</span><span class="p">(</span><span class="s1">&#39;demographics&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">geography</span><span class="p">(</span><span class="s1">&#39;ags_blockgroup_1c63771c&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">datasets</span>
</pre></div>
</div>
<p>If a filter is already applied to a Catalog instance and you want to do a new hierarchical search,
clear the previous filters with the <cite>Catalog().clear_filters()</cite> method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">catalog</span><span class="o">.</span><span class="n">country</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">category</span><span class="p">(</span><span class="s1">&#39;demographics&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">geography</span><span class="p">(</span><span class="s1">&#39;ags_blockgroup_1c63771c&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">datasets</span>
<span class="n">catalog</span><span class="o">.</span><span class="n">clear_filters</span><span class="p">()</span>
<span class="n">catalog</span><span class="o">.</span><span class="n">country</span><span class="p">(</span><span class="s1">&#39;esp&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">category</span><span class="p">(</span><span class="s1">&#39;demographics&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">datasets</span>
</pre></div>
</div>
<p>Otherwise the filters accumulate and you’ll get unexpected results.</p>
<p>During the discovery process, it’s useful to understand the related metadata to a given Geography or Dataset.
A useful way of reading or filtering by metadata values consists on converting the entities to a pandas
DataFrame:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">catalog</span><span class="o">.</span><span class="n">country</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">category</span><span class="p">(</span><span class="s1">&#39;demographics&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">geography</span><span class="p">(</span><span class="s1">&#39;ags_blockgroup_1c63771c&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span>
</pre></div>
</div>
<p>For each dataset in the Catalog, you can explore its variables, get a summary of its stats, etc.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">country</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">category</span><span class="p">(</span><span class="s1">&#39;demographics&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;od_acs_13345497&#39;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">variables</span><span class="p">()</span>
</pre></div>
</div>
<p>See the Catalog guides and examples in our
<a class="reference external" href="https://carto.com/developers/cartoframes/guides/Introduction/">public documentation website</a>
for more information.</p>
<dl class="method">
<dt id="cartoframes.data.observatory.Catalog.countries">
<em class="property">property </em><code class="sig-name descname">countries</code></dt>
<dd><p>Get all the countries with datasets available in the Catalog.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">CatalogList</span></code></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#cartoframes.exceptions.DiscoveryException" title="cartoframes.exceptions.DiscoveryException"><strong>DiscoveryException</strong></a> – When no datasets are found.</p></li>
<li><p><strong>CartoException</strong> – If there’s a problem when connecting to the catalog.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Catalog.categories">
<em class="property">property </em><code class="sig-name descname">categories</code></dt>
<dd><p>Get all the categories in the Catalog.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">CatalogList</span></code></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#cartoframes.exceptions.DiscoveryException" title="cartoframes.exceptions.DiscoveryException"><strong>DiscoveryException</strong></a> – When no datasets are found.</p></li>
<li><p><strong>CartoException</strong> – If there’s a problem when connecting to the catalog.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Catalog.datasets">
<em class="property">property </em><code class="sig-name descname">datasets</code></dt>
<dd><p>Get all the datasets in the Catalog.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">CatalogList</span></code></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#cartoframes.exceptions.DiscoveryException" title="cartoframes.exceptions.DiscoveryException"><strong>DiscoveryException</strong></a> – When no datasets are found.</p></li>
<li><p><strong>CartoException</strong> – If there’s a problem when connecting to the catalog.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Catalog.geographies">
<em class="property">property </em><code class="sig-name descname">geographies</code></dt>
<dd><p>Get all the geographies in the Catalog.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">CatalogList</span></code></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#cartoframes.exceptions.DiscoveryException" title="cartoframes.exceptions.DiscoveryException"><strong>DiscoveryException</strong></a> – When no datasets are found.</p></li>
<li><p><strong>CartoException</strong> – If there’s a problem when connecting to the catalog.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Catalog.country">
<code class="sig-name descname">country</code><span class="sig-paren">(</span><em class="sig-param">country_id</em><span class="sig-paren">)</span></dt>
<dd><p>Add a country filter to the current Catalog instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>country_id</strong> (<em>str</em>) – Id value of the country to be used for filtering the Catalog.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#cartoframes.data.observatory.Catalog" title="cartoframes.data.observatory.Catalog"><code class="xref py py-class docutils literal notranslate"><span class="pre">Catalog</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Catalog.category">
<code class="sig-name descname">category</code><span class="sig-paren">(</span><em class="sig-param">category_id</em><span class="sig-paren">)</span></dt>
<dd><p>Add a category filter to the current Catalog instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>category_id</strong> (<em>str</em>) – Id value of the category to be used for filtering the Catalog.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#cartoframes.data.observatory.Catalog" title="cartoframes.data.observatory.Catalog"><code class="xref py py-class docutils literal notranslate"><span class="pre">Catalog</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Catalog.geography">
<code class="sig-name descname">geography</code><span class="sig-paren">(</span><em class="sig-param">geography_id</em><span class="sig-paren">)</span></dt>
<dd><p>Add a geography filter to the current Catalog instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>geography_id</strong> (<em>str</em>) – Id or slug value of the geography to be used for filtering the Catalog</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#cartoframes.data.observatory.Catalog" title="cartoframes.data.observatory.Catalog"><code class="xref py py-class docutils literal notranslate"><span class="pre">Catalog</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Catalog.provider">
<code class="sig-name descname">provider</code><span class="sig-paren">(</span><em class="sig-param">provider_id</em><span class="sig-paren">)</span></dt>
<dd><p>Add a provider filter to the current Catalog instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>provider_id</strong> (<em>str</em>) – Id value of the provider to be used for filtering the Catalog.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">CatalogList</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Catalog.clear_filters">
<code class="sig-name descname">clear_filters</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Remove the current filters from this Catalog instance.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Catalog.subscriptions">
<code class="sig-name descname">subscriptions</code><span class="sig-paren">(</span><em class="sig-param">credentials=None</em><span class="sig-paren">)</span></dt>
<dd><p>Get all the subscriptions in the Catalog. You’ll get all the <cite>Dataset</cite> or <cite>Geography</cite> instances you have
previously subscribed to.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – credentials of CARTO user account. If not provided,
a default credentials (if set with <a class="reference internal" href="#cartoframes.auth.set_default_credentials" title="cartoframes.auth.set_default_credentials"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_default_credentials</span></code></a>) will be used.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#cartoframes.data.observatory.Subscriptions" title="cartoframes.data.observatory.Subscriptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subscriptions</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Catalog.datasets_filter">
<code class="sig-name descname">datasets_filter</code><span class="sig-paren">(</span><em class="sig-param">filter_dataset</em><span class="sig-paren">)</span></dt>
<dd><p>Get all the datasets in the Catalog filtered
:returns: <a class="reference internal" href="#cartoframes.data.observatory.Dataset" title="cartoframes.data.observatory.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cartoframes.data.observatory.Category">
<em class="property">class </em><code class="sig-prename descclassname">cartoframes.data.observatory.</code><code class="sig-name descname">Category</code><span class="sig-paren">(</span><em class="sig-param">data</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cartoframes.data.observatory.catalog.entity.CatalogEntity</span></code></p>
<p>This class represents a <a class="reference internal" href="#cartoframes.data.observatory.Category" title="cartoframes.data.observatory.Category"><code class="xref py py-class docutils literal notranslate"><span class="pre">Category</span></code></a>
in the <a class="reference internal" href="#cartoframes.data.observatory.Catalog" title="cartoframes.data.observatory.Catalog"><code class="xref py py-class docutils literal notranslate"><span class="pre">Catalog</span></code></a>. Catalog datasets
(<a class="reference internal" href="#cartoframes.data.observatory.Dataset" title="cartoframes.data.observatory.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> class)
are grouped by <cite>categories</cite>, so you can filter available <cite>datasets</cite> and
<cite>geographies</cite> that belong (or are related) to a given <cite>Category</cite>.</p>
<p class="rubric">Examples</p>
<p>List the available categories in the <a class="reference internal" href="#cartoframes.data.observatory.Catalog" title="cartoframes.data.observatory.Catalog"><code class="xref py py-class docutils literal notranslate"><span class="pre">Catalog</span></code></a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">categories</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">categories</span>
</pre></div>
</div>
<p>Get a <a class="reference internal" href="#cartoframes.data.observatory.Category" title="cartoframes.data.observatory.Category"><code class="xref py py-class docutils literal notranslate"><span class="pre">Category</span></code></a> from the
<a class="reference internal" href="#cartoframes.data.observatory.Catalog" title="cartoframes.data.observatory.Catalog"><code class="xref py py-class docutils literal notranslate"><span class="pre">Catalog</span></code></a> given its ID</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">category</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;demographics&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="cartoframes.data.observatory.Category.datasets">
<em class="property">property </em><code class="sig-name descname">datasets</code></dt>
<dd><p>Get the list of <a class="reference internal" href="#cartoframes.data.observatory.Dataset" title="cartoframes.data.observatory.Dataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Dataset</span></code></a> related to this category.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">CatalogList</span></code> List of Dataset instances.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#cartoframes.exceptions.DiscoveryException" title="cartoframes.exceptions.DiscoveryException"><strong>DiscoveryException</strong></a> – When no datasets are found.</p></li>
<li><p><strong>CartoException</strong> – If there’s a problem when connecting to the catalog.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Get all the <cite>datasets</cite> <a class="reference internal" href="#cartoframes.data.observatory.Dataset" title="cartoframes.data.observatory.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> available
in the <cite>catalog</cite> for a <a class="reference internal" href="#cartoframes.data.observatory.Category" title="cartoframes.data.observatory.Category"><code class="xref py py-class docutils literal notranslate"><span class="pre">Category</span></code></a> instance</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">category</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;demographics&#39;</span><span class="p">)</span>
<span class="n">datasets</span> <span class="o">=</span> <span class="n">category</span><span class="o">.</span><span class="n">datasets</span>
</pre></div>
</div>
<p>Same example as above but using nested filters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">datasets</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">category</span><span class="p">(</span><span class="s1">&#39;demographics&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">datasets</span>
</pre></div>
</div>
<p>You can perform other operations with a
<code class="xref py py-class docutils literal notranslate"><span class="pre">CatalogList</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">datasets</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">category</span><span class="p">(</span><span class="s1">&#39;demographics&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">datasets</span>
<span class="c1"># convert the list of datasets into a pandas DataFrame</span>
<span class="c1"># for further filtering and exploration</span>
<span class="n">dataframe</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span>
<span class="c1"># get a dataset by ID or slug</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">A_VALID_ID_OR_SLUG</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Category.geographies">
<em class="property">property </em><code class="sig-name descname">geographies</code></dt>
<dd><p>Get the list of <a class="reference internal" href="#cartoframes.data.observatory.Geography" title="cartoframes.data.observatory.Geography"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Geography</span></code></a> related to this category.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">CatalogList</span></code> List of Geography instances.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#cartoframes.exceptions.DiscoveryException" title="cartoframes.exceptions.DiscoveryException"><strong>DiscoveryException</strong></a> – When no geographies found.</p></li>
<li><p><strong>CartoException</strong> – If there’s a problem when connecting to the catalog.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Get all the <cite>geographies</cite> <a class="reference internal" href="#cartoframes.data.observatory.Dataset" title="cartoframes.data.observatory.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> available
in the <cite>catalog</cite> for a <a class="reference internal" href="#cartoframes.data.observatory.Category" title="cartoframes.data.observatory.Category"><code class="xref py py-class docutils literal notranslate"><span class="pre">Category</span></code></a> instance</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">category</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;demographics&#39;</span><span class="p">)</span>
<span class="n">geographies</span> <span class="o">=</span> <span class="n">category</span><span class="o">.</span><span class="n">geographies</span>
</pre></div>
</div>
<p>Same example as above but using nested filters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">geographies</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">category</span><span class="p">(</span><span class="s1">&#39;demographics&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">geographies</span>
</pre></div>
</div>
<p>You can perform these other operations with a
<code class="xref py py-class docutils literal notranslate"><span class="pre">CatalogList</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">geographies</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">category</span><span class="p">(</span><span class="s1">&#39;demographics&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">geographies</span>
<span class="c1"># convert the list of datasets into a pandas DataFrame</span>
<span class="c1"># for further filtering and exploration</span>
<span class="n">dataframe</span> <span class="o">=</span> <span class="n">geographies</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span>
<span class="c1"># get a geography by ID or slug</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">geographies</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">A_VALID_ID_OR_SLUG</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Category.name">
<em class="property">property </em><code class="sig-name descname">name</code></dt>
<dd><p>Name of this category instance.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cartoframes.data.observatory.Country">
<em class="property">class </em><code class="sig-prename descclassname">cartoframes.data.observatory.</code><code class="sig-name descname">Country</code><span class="sig-paren">(</span><em class="sig-param">data</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cartoframes.data.observatory.catalog.entity.CatalogEntity</span></code></p>
<p>This class represents a <a class="reference internal" href="#cartoframes.data.observatory.Country" title="cartoframes.data.observatory.Country"><code class="xref py py-class docutils literal notranslate"><span class="pre">Country</span></code></a>
in the <a class="reference internal" href="#cartoframes.data.observatory.Catalog" title="cartoframes.data.observatory.Catalog"><code class="xref py py-class docutils literal notranslate"><span class="pre">Catalog</span></code></a>. Catalog datasets
(<a class="reference internal" href="#cartoframes.data.observatory.Dataset" title="cartoframes.data.observatory.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> class)
belong to a country, so you can filter available <cite>datasets</cite> and
<cite>geographies</cite> that belong (or are related) to a given <cite>Country</cite>.</p>
<p class="rubric">Examples</p>
<p>List the available countries in the <a class="reference internal" href="#cartoframes.data.observatory.Catalog" title="cartoframes.data.observatory.Catalog"><code class="xref py py-class docutils literal notranslate"><span class="pre">Catalog</span></code></a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">countries</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">countries</span>
</pre></div>
</div>
<p>Get a <a class="reference internal" href="#cartoframes.data.observatory.Country" title="cartoframes.data.observatory.Country"><code class="xref py py-class docutils literal notranslate"><span class="pre">Country</span></code></a> from the
<a class="reference internal" href="#cartoframes.data.observatory.Catalog" title="cartoframes.data.observatory.Catalog"><code class="xref py py-class docutils literal notranslate"><span class="pre">Catalog</span></code></a> given its ID</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="c1"># country ID is a lowercase ISO Alpha 3 Code</span>
<span class="n">category</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">countries</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="cartoframes.data.observatory.Country.datasets">
<em class="property">property </em><code class="sig-name descname">datasets</code></dt>
<dd><p>Get the list of <a class="reference internal" href="#cartoframes.data.observatory.Dataset" title="cartoframes.data.observatory.Dataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Dataset</span></code></a> covering data for this country.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">CatalogList</span></code> List of Dataset instances.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#cartoframes.exceptions.DiscoveryException" title="cartoframes.exceptions.DiscoveryException"><strong>DiscoveryException</strong></a> – When no datasets are found.</p></li>
<li><p><strong>CartoException</strong> – If there’s a problem when connecting to the catalog.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Get all the <cite>datasets</cite> <a class="reference internal" href="#cartoframes.data.observatory.Dataset" title="cartoframes.data.observatory.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> available
in the <cite>catalog</cite> for a <a class="reference internal" href="#cartoframes.data.observatory.Country" title="cartoframes.data.observatory.Country"><code class="xref py py-class docutils literal notranslate"><span class="pre">Country</span></code></a> instance</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">country</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">countries</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span>
<span class="n">datasets</span> <span class="o">=</span> <span class="n">country</span><span class="o">.</span><span class="n">datasets</span>
</pre></div>
</div>
<p>Same example as above but using nested filters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">datasets</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">country</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">datasets</span>
</pre></div>
</div>
<p>You can perform these other operations with a
<code class="xref py py-class docutils literal notranslate"><span class="pre">CatalogList</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">datasets</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">country</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">datasets</span>
<span class="c1"># convert the list of datasets into a pandas DataFrame</span>
<span class="c1"># for further filtering and exploration</span>
<span class="n">dataframe</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span>
<span class="c1"># get a dataset by ID or slug</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">A_VALID_ID_OR_SLUG</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Country.geographies">
<em class="property">property </em><code class="sig-name descname">geographies</code></dt>
<dd><p>Get the list of <a class="reference internal" href="#cartoframes.data.observatory.Geography" title="cartoframes.data.observatory.Geography"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Geography</span></code></a> covering data for this country.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">CatalogList</span></code> List of Geography instances.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#cartoframes.exceptions.DiscoveryException" title="cartoframes.exceptions.DiscoveryException"><strong>DiscoveryException</strong></a> – When no geographies are found.</p></li>
<li><p><strong>CartoException</strong> – If there’s a problem when connecting to the catalog.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Get all the <cite>geographies</cite> <a class="reference internal" href="#cartoframes.data.observatory.Geography" title="cartoframes.data.observatory.Geography"><code class="xref py py-class docutils literal notranslate"><span class="pre">Geography</span></code></a> available
in the <cite>catalog</cite> for a <a class="reference internal" href="#cartoframes.data.observatory.Country" title="cartoframes.data.observatory.Country"><code class="xref py py-class docutils literal notranslate"><span class="pre">Country</span></code></a> instance</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">country</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">countries</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span>
<span class="n">geographies</span> <span class="o">=</span> <span class="n">country</span><span class="o">.</span><span class="n">geographies</span>
</pre></div>
</div>
<p>Same example as above but using nested filters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">geographies</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">country</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">geographies</span>
</pre></div>
</div>
<p>You can perform these other operations with a
<code class="xref py py-class docutils literal notranslate"><span class="pre">CatalogList</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">geographies</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">country</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">geographies</span>
<span class="c1"># convert the list of geographies into a pandas DataFrame</span>
<span class="c1"># for further filtering and exploration</span>
<span class="n">dataframe</span> <span class="o">=</span> <span class="n">geographies</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span>
<span class="c1"># get a geography by ID or slug</span>
<span class="n">geography</span> <span class="o">=</span> <span class="n">geographies</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">A_VALID_ID_OR_SLUG</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Country.categories">
<em class="property">property </em><code class="sig-name descname">categories</code></dt>
<dd><p>Get the list of <a class="reference internal" href="#cartoframes.data.observatory.Category" title="cartoframes.data.observatory.Category"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Category</span></code></a> that are assigned to <a class="reference internal" href="#cartoframes.data.observatory.Dataset" title="cartoframes.data.observatory.Dataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Dataset</span></code></a> that cover data for this country.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">CatalogList</span></code> List of Category instances.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#cartoframes.exceptions.DiscoveryException" title="cartoframes.exceptions.DiscoveryException"><strong>DiscoveryException</strong></a> – When no datasets are found.</p></li>
<li><p><strong>CartoException</strong> – If there’s a problem when connecting to the catalog.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Get all the <cite>categories</cite> <a class="reference internal" href="#cartoframes.data.observatory.Category" title="cartoframes.data.observatory.Category"><code class="xref py py-class docutils literal notranslate"><span class="pre">Category</span></code></a> available
in the <cite>catalog</cite> for a <a class="reference internal" href="#cartoframes.data.observatory.Country" title="cartoframes.data.observatory.Country"><code class="xref py py-class docutils literal notranslate"><span class="pre">Country</span></code></a> instance</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">country</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">countries</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span>
<span class="n">categories</span> <span class="o">=</span> <span class="n">country</span><span class="o">.</span><span class="n">categories</span>
</pre></div>
</div>
<p>Same example as above but using nested filters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">category</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">country</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">categories</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cartoframes.data.observatory.Dataset">
<em class="property">class </em><code class="sig-prename descclassname">cartoframes.data.observatory.</code><code class="sig-name descname">Dataset</code><span class="sig-paren">(</span><em class="sig-param">data</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cartoframes.data.observatory.catalog.entity.CatalogEntity</span></code></p>
<p>A Dataset
represents the metadata of a particular dataset in the catalog.</p>
<blockquote>
<div><p>If you have Data Observatory enabled in your CARTO account you can:</p>
<blockquote>
<div><ul class="simple">
<li><p>Use any public dataset to enrich your data with the variables in it by means of the <a class="reference internal" href="#cartoframes.data.observatory.Enrichment" title="cartoframes.data.observatory.Enrichment"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Enrichment</span></code></a>
functions.</p></li>
<li><p>Subscribe (<a class="reference internal" href="#cartoframes.data.observatory.Dataset.subscribe" title="cartoframes.data.observatory.Dataset.subscribe"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Dataset.subscribe</span></code></a>) to any premium dataset, to get a license, that grants you
the right to enrich your data with the variables (<a class="reference internal" href="#cartoframes.data.observatory.Variable" title="cartoframes.data.observatory.Variable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Variable</span></code></a>) in it.</p></li>
</ul>
</div></blockquote>
<p>See the enrichment guides for more information about datasets, variables and
enrichment functions.</p>
<p>The metadata of a dataset allows you to understand the underlying data,
from variables (the actual columns in the dataset, data types, etc.), to a
description of the provider, source, country, geography available, etc.</p>
<p>See the attributes reference in this class to understand the metadata available
for each dataset in the catalog.</p>
<dl>
<dt>Examples:</dt><dd><p>There are many different ways to explore the available datasets in the
catalog.</p>
<p>You can just list all the available datasets:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">datasets</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">datasets</span>
</pre></div>
</div>
<p>Since the catalog contains thousands of datasets, you can convert the
list of <cite>datasets</cite> to a pandas DataFrame for further filtering:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">dataframe</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span>
</pre></div>
</div>
<p>The catalog supports nested filters for a hierarchical exploration.
This way you could list the datasets available for different hierarchies:
country, provider, category, geography or a combination of them.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">catalog</span><span class="o">.</span><span class="n">country</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">category</span><span class="p">(</span><span class="s1">&#39;demographics&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">geography</span><span class="p">(</span><span class="s1">&#39;ags_blockgroup_1c63771c&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">datasets</span>
</pre></div>
</div>
</dd>
</dl>
</div></blockquote>
<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.category">
<em class="property">property </em><code class="sig-name descname">category</code></dt>
<dd><p>Get the <a class="reference internal" href="#cartoframes.data.observatory.Category" title="cartoframes.data.observatory.Category"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Category</span></code></a> ID
assigned to this dataset.sets</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.category_name">
<em class="property">property </em><code class="sig-name descname">category_name</code></dt>
<dd><p>Name of the <a class="reference internal" href="#cartoframes.data.observatory.Category" title="cartoframes.data.observatory.Category"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Category</span></code></a>
assigned to this dataset.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.country">
<em class="property">property </em><code class="sig-name descname">country</code></dt>
<dd><p>ISO 3166-1 alpha-3 code of the <a class="reference internal" href="#cartoframes.data.observatory.Country" title="cartoframes.data.observatory.Country"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Country</span></code></a>
of this dataset.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.counts">
<code class="sig-name descname">counts</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Returns a summary of different counts over the actual dataset data.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>pandas.Series</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># rows:         number of rows in the dataset</span>
<span class="c1"># cells:        number of cells in the dataset (rows * columns)</span>
<span class="c1"># null_cells:   number of cells with null value in the dataset</span>
<span class="c1"># null_cells_percent:   percent of cells with null value in the dataset</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.data_source">
<em class="property">property </em><code class="sig-name descname">data_source</code></dt>
<dd><p>Id of the data source of this dataset.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.describe">
<code class="sig-name descname">describe</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Shows a summary of the actual stats of the variables (columns) of the dataset.
Some of the stats provided per variable are: avg, max, min, sum, range,
stdev, q1, q3, median and interquartile_range</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># avg                    average value</span>
<span class="c1"># max                    max value</span>
<span class="c1"># min                    min value</span>
<span class="c1"># sum                    sum of all values</span>
<span class="c1"># range</span>
<span class="c1"># stdev                  standard deviation</span>
<span class="c1"># q1                     first quantile</span>
<span class="c1"># q3                     third quantile</span>
<span class="c1"># median                 median value</span>
<span class="c1"># interquartile_range</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.description">
<em class="property">property </em><code class="sig-name descname">description</code></dt>
<dd><p>Description of this dataset.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.download">
<code class="sig-name descname">download</code><span class="sig-paren">(</span><em class="sig-param">credentials=None</em><span class="sig-paren">)</span></dt>
<dd><p>Download dataset data as a local file. You need Data Observatory enabled in your CARTO
account, please contact us at <a class="reference external" href="mailto:support&#37;&#52;&#48;carto&#46;com">support<span>&#64;</span>carto<span>&#46;</span>com</a> for more information.</p>
<p>For premium geographies (those with <cite>is_public_data</cite> set to False), you need a subscription to the geography.
Check the subscription guides for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – credentials of CARTO user account. If not provided,
a default credentials (if set with <a class="reference internal" href="#cartoframes.auth.set_default_credentials" title="cartoframes.auth.set_default_credentials"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_default_credentials</span></code></a>) will be used.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>os.path with the local file path with the file downloaded</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>CartoException</strong> – If you have not a valid license for the dataset being downloaded.</p></li>
<li><p><strong>ValueError</strong> – If the credentials argument is not valud.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.fields_by_type">
<code class="sig-name descname">fields_by_type</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Returns a summary of the number of columns per data type in the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>pandas.Series</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># float        number of columns with type float in the dataset</span>
<span class="c1"># string       number of columns with type string in the dataset</span>
<span class="c1"># integer      number of columns with type integer in the dataset</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.geography">
<em class="property">property </em><code class="sig-name descname">geography</code></dt>
<dd><p>Get the <a class="reference internal" href="#cartoframes.data.observatory.Geography" title="cartoframes.data.observatory.Geography"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Geography</span></code></a> ID associated to this dataset.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.geography_description">
<em class="property">property </em><code class="sig-name descname">geography_description</code></dt>
<dd><p>Description of the <a class="reference internal" href="#cartoframes.data.observatory.Geography" title="cartoframes.data.observatory.Geography"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Geography</span></code></a> associated to this dataset.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.geography_name">
<em class="property">property </em><code class="sig-name descname">geography_name</code></dt>
<dd><p>Get the name of the <a class="reference internal" href="#cartoframes.data.observatory.Geography" title="cartoframes.data.observatory.Geography"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Geography</span></code></a> associated to this dataset.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.geom_coverage">
<code class="sig-name descname">geom_coverage</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Shows a map to visualize the geographical coverage of the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>cartoframes.viz.Map</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.get_all">
<em class="property">classmethod </em><code class="sig-name descname">get_all</code><span class="sig-paren">(</span><em class="sig-param">filters=None</em>, <em class="sig-param">credentials=None</em><span class="sig-paren">)</span></dt>
<dd><p>Get all the Dataset instances that comply with the indicated filters (or all of them if no filters
are passed). If credentials are given, only the datasets granted for those credentials are returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – credentials of CARTO user account. If provided, only datasets granted for those credentials are
returned.</p></li>
<li><p><strong>filters</strong> (<em>dict</em><em>, </em><em>optional</em>) – Dict containing pairs of dataset properties and its value to be used as filters to query the available
datasets. If none is provided, no filters will be applied to the query.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">CatalogList</span></code> List of Dataset instances.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#cartoframes.exceptions.DiscoveryException" title="cartoframes.exceptions.DiscoveryException"><strong>DiscoveryException</strong></a> – When no datasets are found.</p></li>
<li><p><strong>CartoException</strong> – If there’s a problem when connecting to the catalog.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.get_datasets_spatial_filtered">
<em class="property">classmethod </em><code class="sig-name descname">get_datasets_spatial_filtered</code><span class="sig-paren">(</span><em class="sig-param">filter_dataset</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.head">
<code class="sig-name descname">head</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Returns a sample of the 10 first rows of the dataset data.</p>
<p>If a dataset has fewer than 10 rows (e.g., zip codes of small countries), this method will return None</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.is_public_data">
<em class="property">property </em><code class="sig-name descname">is_public_data</code></dt>
<dd><p>Allows to check if the content of this dataset can be accessed with
public credentials or if it is a premium dataset that needs a
subscription.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the dataset is public</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">False</span></code> if the dataset is premium</dt><dd><p>(it requires to <a class="reference internal" href="#cartoframes.data.observatory.Dataset.subscribe" title="cartoframes.data.observatory.Dataset.subscribe"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Dataset.subscribe</span></code></a>)</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>A boolean value</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.language">
<em class="property">property </em><code class="sig-name descname">language</code></dt>
<dd><p>ISO 639-3 code of the language that corresponds to the data
of this dataset.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.name">
<em class="property">property </em><code class="sig-name descname">name</code></dt>
<dd><p>Name of this dataset.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.provider">
<em class="property">property </em><code class="sig-name descname">provider</code></dt>
<dd><p>Id of the <a class="reference internal" href="#cartoframes.data.observatory.Provider" title="cartoframes.data.observatory.Provider"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Provider</span></code></a> of this dataset.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.provider_name">
<em class="property">property </em><code class="sig-name descname">provider_name</code></dt>
<dd><p>Name of the <a class="reference internal" href="#cartoframes.data.observatory.Provider" title="cartoframes.data.observatory.Provider"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Provider</span></code></a> of this dataset.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.subscribe">
<code class="sig-name descname">subscribe</code><span class="sig-paren">(</span><em class="sig-param">credentials=None</em><span class="sig-paren">)</span></dt>
<dd><p>Subscribe to a dataset. You need Data Observatory enabled in your CARTO account, please contact us at
<a class="reference external" href="mailto:support&#37;&#52;&#48;carto&#46;com">support<span>&#64;</span>carto<span>&#46;</span>com</a> for more information.</p>
<p>Datasets with <cite>is_public_data</cite> set to True do not need a license (i.e., a subscription) to be used.
Datasets with <cite>is_public_data</cite> set to False do need a license (i.e., a subscription) to be used. You’ll get a
license to use this <cite>dataset</cite> depending on the <cite>estimated_delivery_days</cite> set for this specific dataset.</p>
<p>See <a class="reference internal" href="#cartoframes.data.observatory.Dataset.subscription_info" title="cartoframes.data.observatory.Dataset.subscription_info"><code class="xref py py-meth docutils literal notranslate"><span class="pre">subscription_info</span></code></a> for more
info</p>
<p>Once you subscribe to a dataset, you can <a class="reference internal" href="#cartoframes.data.observatory.Dataset.download" title="cartoframes.data.observatory.Dataset.download"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Dataset.download</span></code></a> its data and use the
<a class="reference internal" href="#cartoframes.data.observatory.Enrichment" title="cartoframes.data.observatory.Enrichment"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Enrichment</span></code></a> functions. See the enrichment guides for more info.</p>
<p>You can check the status of your subscriptions by calling the
<a class="reference internal" href="#cartoframes.data.observatory.Catalog.subscriptions" title="cartoframes.data.observatory.Catalog.subscriptions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">subscriptions</span></code></a> method in the <a class="reference internal" href="#cartoframes.data.observatory.Catalog" title="cartoframes.data.observatory.Catalog"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Catalog</span></code></a> with
your CARTO <code class="xref py py-obj docutils literal notranslate"><span class="pre">Credentials</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – credentials of CARTO user account. If not provided,
a default credentials (if set with <a class="reference internal" href="#cartoframes.auth.set_default_credentials" title="cartoframes.auth.set_default_credentials"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_default_credentials</span></code></a>) will be used.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>CartoException</strong> – If there’s a problem when connecting to the catalog.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.subscription_info">
<code class="sig-name descname">subscription_info</code><span class="sig-paren">(</span><em class="sig-param">credentials=None</em><span class="sig-paren">)</span></dt>
<dd><p>Get the subscription information of a Dataset, which includes the license, Terms of Service, rights, price, and
estimated time of delivery, among other metadata of interest during the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Dataset.subscription</span></code> process.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – credentials of CARTO user account. If not provided,
a default credentials (if set with <a class="reference internal" href="#cartoframes.auth.set_default_credentials" title="cartoframes.auth.set_default_credentials"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_default_credentials</span></code></a>) will be used.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#cartoframes.data.observatory.SubscriptionInfo" title="cartoframes.data.observatory.SubscriptionInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubscriptionInfo</span></code></a> SubscriptionInfo instance.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>CartoException</strong> – If there’s a problem when connecting to the catalog.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.summary">
<em class="property">property </em><code class="sig-name descname">summary</code></dt>
<dd><p>JSON object with extra metadata that summarizes different properties of the dataset content.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.tail">
<code class="sig-name descname">tail</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>“Returns the last ten rows of the dataset”</p>
<p>If a dataset has fewer than 10 rows (e.g., zip codes of small countries), this method will return None</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.temporal_aggregation">
<em class="property">property </em><code class="sig-name descname">temporal_aggregation</code></dt>
<dd><p>Time amount in which data is aggregated in this dataset.</p>
<p>This is a free text field in this form: seconds, daily, hourly, monthly, yearly, etc.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.time_coverage">
<em class="property">property </em><code class="sig-name descname">time_coverage</code></dt>
<dd><p>Time range that covers the data of this dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>List of str</p>
</dd>
</dl>
<p>Example: [2015-01-01,2016-01-01)</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.update_frequency">
<em class="property">property </em><code class="sig-name descname">update_frequency</code></dt>
<dd><p>Frequency in which the dataset is updated.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p>Example: monthly, yearly, etc.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.variables">
<em class="property">property </em><code class="sig-name descname">variables</code></dt>
<dd><p>Get the list of <a class="reference internal" href="#cartoframes.data.observatory.Variable" title="cartoframes.data.observatory.Variable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Variable</span></code></a> that corresponds to this dataset. Variables are used in the
<a class="reference internal" href="#cartoframes.data.observatory.Enrichment" title="cartoframes.data.observatory.Enrichment"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Enrichment</span></code></a> functions to augment your local <cite>DataFrames</cite> with columns from a <cite>Dataset</cite> in the
Data Observatory.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">CatalogList</span></code> List of Variable instances.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>CartoException</strong> – If there’s a problem when connecting to the catalog.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.variables_groups">
<em class="property">property </em><code class="sig-name descname">variables_groups</code></dt>
<dd><p>Get the list of <code class="xref py py-obj docutils literal notranslate"><span class="pre">VariableGroup</span></code> related to this dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">CatalogList</span></code> List of VariableGroup instances.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>CartoException</strong> – If there’s a problem when connecting to the catalog.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Dataset.version">
<em class="property">property </em><code class="sig-name descname">version</code></dt>
<dd><p>Internal version info of this dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cartoframes.data.observatory.Geography">
<em class="property">class </em><code class="sig-prename descclassname">cartoframes.data.observatory.</code><code class="sig-name descname">Geography</code><span class="sig-paren">(</span><em class="sig-param">data</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cartoframes.data.observatory.catalog.entity.CatalogEntity</span></code></p>
<p>A Geography represents the metadata of a particular geography dataset in the catalog.</p>
<p>If you have Data Observatory enabled in your CARTO account you can:</p>
<blockquote>
<div><ul class="simple">
<li><p>Use any public geography to enrich your data with the variables in it by means of the <a class="reference internal" href="#cartoframes.data.observatory.Enrichment" title="cartoframes.data.observatory.Enrichment"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Enrichment</span></code></a>
functions.</p></li>
<li><p>Subscribe (<a class="reference internal" href="#cartoframes.data.observatory.Geography.subscribe" title="cartoframes.data.observatory.Geography.subscribe"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Geography.subscribe</span></code></a>) to any premium geography, to get a license, that grants you
the right to enrich your data with the variables in it.</p></li>
</ul>
</div></blockquote>
<p>See the enrichment guides for more information about geographies, variables and
enrichment functions.</p>
<p>The metadata of a geography allows you to understand the underlying data,
from variables (the actual columns in the geography, data types, etc.), to a
description of the provider, source, country, geography available, etc.</p>
<p>See the attributes reference in this class to understand the metadata available
for each geography in the catalog.</p>
<p class="rubric">Examples</p>
<p>There are many different ways to explore the available geographies in the
catalog.</p>
<p>You can just list all the available geographies:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">geographies</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">geographies</span>
</pre></div>
</div>
<p>Since the catalog contains thousands of geographies, you can convert the
list of <cite>geographies</cite> to a pandas DataFrame for further filtering:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">dataframe</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">geographies</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span>
</pre></div>
</div>
<p>The catalog supports nested filters for a hierarchical exploration.
This way you could list the geographies available for different hierarchies:
country, provider, category or a combination of them.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">catalog</span><span class="o">.</span><span class="n">country</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">category</span><span class="p">(</span><span class="s1">&#39;demographics&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">geographies</span>
</pre></div>
</div>
<p>Usually you use a geography ID as an intermediate filter to get a list
of datasets with aggregate data for that geographical resolution</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">catalog</span><span class="o">.</span><span class="n">country</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">category</span><span class="p">(</span><span class="s1">&#39;demographics&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">geography</span><span class="p">(</span><span class="s1">&#39;ags_blockgroup_1c63771c&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">datasets</span>
</pre></div>
</div>
<dl class="method">
<dt id="cartoframes.data.observatory.Geography.datasets">
<em class="property">property </em><code class="sig-name descname">datasets</code></dt>
<dd><p>Get the list of datasets related to this geography.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">CatalogList</span></code> List of Dataset instances.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#cartoframes.exceptions.DiscoveryException" title="cartoframes.exceptions.DiscoveryException"><strong>DiscoveryException</strong></a> – When no datasets are found.</p></li>
<li><p><strong>CartoException</strong> – If there’s a problem when connecting to the catalog.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Geography.name">
<em class="property">property </em><code class="sig-name descname">name</code></dt>
<dd><p>Name of this geography.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Geography.description">
<em class="property">property </em><code class="sig-name descname">description</code></dt>
<dd><p>Description of this geography.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Geography.country">
<em class="property">property </em><code class="sig-name descname">country</code></dt>
<dd><p>Code (ISO 3166-1 alpha-3) of the country of this geography.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Geography.language">
<em class="property">property </em><code class="sig-name descname">language</code></dt>
<dd><p>Code (ISO 639-3) of the language that corresponds to the data of this geography.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Geography.provider">
<em class="property">property </em><code class="sig-name descname">provider</code></dt>
<dd><p>Id of the Provider of this geography.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Geography.provider_name">
<em class="property">property </em><code class="sig-name descname">provider_name</code></dt>
<dd><p>Name of the Provider of this geography.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Geography.geom_coverage">
<em class="property">property </em><code class="sig-name descname">geom_coverage</code></dt>
<dd><p>Shows a map to visualize the geographical coverage of the geography data.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Geography.geom_type">
<em class="property">property </em><code class="sig-name descname">geom_type</code></dt>
<dd><p>Info about the type of geometry of this geography.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Geography.update_frequency">
<em class="property">property </em><code class="sig-name descname">update_frequency</code></dt>
<dd><p>Frequency in which the geography data is updated.</p>
<p>Example: monthly, yearly, etc.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Geography.version">
<em class="property">property </em><code class="sig-name descname">version</code></dt>
<dd><p>Internal version info of this geography.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Geography.is_public_data">
<em class="property">property </em><code class="sig-name descname">is_public_data</code></dt>
<dd><p>Allows to check if the content of this geography can be accessed
with public credentials or if it is a premium geography that needs
a subscription.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the geography is public</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">False</span></code> if the geography is premium</dt><dd><p>(it requires to <a class="reference internal" href="#cartoframes.data.observatory.Geography.subscribe" title="cartoframes.data.observatory.Geography.subscribe"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Geography.subscribe</span></code></a>)</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>A boolean value</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Geography.summary">
<em class="property">property </em><code class="sig-name descname">summary</code></dt>
<dd><p>dict with extra metadata that summarizes different properties of the geography content.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Geography.get_all">
<em class="property">classmethod </em><code class="sig-name descname">get_all</code><span class="sig-paren">(</span><em class="sig-param">filters=None</em>, <em class="sig-param">credentials=None</em><span class="sig-paren">)</span></dt>
<dd><p>Get all the Geography instances that comply with the indicated filters (or all of them if no filters
are passed. If credentials are given, only the geographies granted for those credentials are returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – credentials of CARTO user account. If provided, only geographies granted for those credentials are
returned.</p></li>
<li><p><strong>filters</strong> (<em>dict</em><em>, </em><em>optional</em>) – Dict containing pairs of geography properties and its value to be used as filters to query the available
geographies. If none is provided, no filters will be applied to the query.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">CatalogList</span></code> List of Geography instances.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#cartoframes.exceptions.DiscoveryException" title="cartoframes.exceptions.DiscoveryException"><strong>DiscoveryException</strong></a> – When no geographies are found.</p></li>
<li><p><strong>CartoException</strong> – If there’s a problem when connecting to the catalog.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Geography.download">
<code class="sig-name descname">download</code><span class="sig-paren">(</span><em class="sig-param">credentials=None</em><span class="sig-paren">)</span></dt>
<dd><p>Download Geography data as a pandas DataFrame locally. You need Data Observatory enabled in your CARTO
account, please contact us at <a class="reference external" href="mailto:support&#37;&#52;&#48;carto&#46;com">support<span>&#64;</span>carto<span>&#46;</span>com</a> for more information.</p>
<p>For premium geographies (those with <cite>is_public_data</cite> set to False), you need a subscription to the geography.
Check the subscription guides for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – credentials of CARTO user account. If not provided,
a default credentials (if set with <a class="reference internal" href="#cartoframes.auth.set_default_credentials" title="cartoframes.auth.set_default_credentials"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_default_credentials</span></code></a>) will be used.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A string with the local file path with the file downloaded</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>CartoException</strong> – If you have not a valid license for the dataset being downloaded.</p></li>
<li><p><strong>ValueError</strong> – If the credentials argument is not valud.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Geography.subscribe">
<code class="sig-name descname">subscribe</code><span class="sig-paren">(</span><em class="sig-param">credentials=None</em><span class="sig-paren">)</span></dt>
<dd><p>Subscribe to a Geography. You need Data Observatory enabled in your CARTO account, please contact us at
<a class="reference external" href="mailto:support&#37;&#52;&#48;carto&#46;com">support<span>&#64;</span>carto<span>&#46;</span>com</a> for more information.</p>
<p>Geographies with <cite>is_public_data</cite> set to True, do not need a license (i.e. a subscription) to be used.
Geographies with <cite>is_public_data</cite> set to False, do need a license (i.e. a subscription) to be used. You’ll get a
license to use this <cite>geography</cite> depending on the <cite>estimated_delivery_days</cite> set for this specific geography.</p>
<p>See <a class="reference internal" href="#cartoframes.data.observatory.Geography.subscription_info" title="cartoframes.data.observatory.Geography.subscription_info"><code class="xref py py-meth docutils literal notranslate"><span class="pre">subscription_info</span></code></a> for more
info</p>
<p>Once you <a class="reference internal" href="#cartoframes.data.observatory.Geography.subscribe" title="cartoframes.data.observatory.Geography.subscribe"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Geography.subscribe</span></code></a> to a geography you can <a class="reference internal" href="#cartoframes.data.observatory.Geography.download" title="cartoframes.data.observatory.Geography.download"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Geography.download</span></code></a> its data and
use the enrichment functions. See the enrichment guides for more info.</p>
<p>You can check the status of your subscriptions by calling the
<a class="reference internal" href="#cartoframes.data.observatory.Catalog.subscriptions" title="cartoframes.data.observatory.Catalog.subscriptions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">subscriptions</span></code></a> method in the <a class="reference internal" href="#cartoframes.data.observatory.Catalog" title="cartoframes.data.observatory.Catalog"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Catalog</span></code></a> with
your CARTO credentials.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – credentials of CARTO user account. If not provided,
a default credentials (if set with <a class="reference internal" href="#cartoframes.auth.set_default_credentials" title="cartoframes.auth.set_default_credentials"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_default_credentials</span></code></a>) will be used.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>CartoException</strong> – If there’s a problem when connecting to the catalog.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Geography.subscription_info">
<code class="sig-name descname">subscription_info</code><span class="sig-paren">(</span><em class="sig-param">credentials=None</em><span class="sig-paren">)</span></dt>
<dd><p>Get the subscription information of a Geography, which includes the license, TOS, rights, prize and
estimated_time_of_delivery, among other metadata of interest during the subscription process.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – credentials of CARTO user account. If not provided,
a default credentials (if set with <a class="reference internal" href="#cartoframes.auth.set_default_credentials" title="cartoframes.auth.set_default_credentials"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_default_credentials</span></code></a>) will be used.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#cartoframes.data.observatory.SubscriptionInfo" title="cartoframes.data.observatory.SubscriptionInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubscriptionInfo</span></code></a> SubscriptionInfo instance.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>CartoException</strong> – If there’s a problem when connecting to the catalog.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cartoframes.data.observatory.Provider">
<em class="property">class </em><code class="sig-prename descclassname">cartoframes.data.observatory.</code><code class="sig-name descname">Provider</code><span class="sig-paren">(</span><em class="sig-param">data</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cartoframes.data.observatory.catalog.entity.CatalogEntity</span></code></p>
<p>This class represents a <a class="reference internal" href="#cartoframes.data.observatory.Provider" title="cartoframes.data.observatory.Provider"><code class="xref py py-class docutils literal notranslate"><span class="pre">Provider</span></code></a>
of datasets and geographies in the <a class="reference internal" href="#cartoframes.data.observatory.Catalog" title="cartoframes.data.observatory.Catalog"><code class="xref py py-class docutils literal notranslate"><span class="pre">Catalog</span></code></a>.</p>
<p class="rubric">Examples</p>
<p>List the available providers in the <a class="reference internal" href="#cartoframes.data.observatory.Catalog" title="cartoframes.data.observatory.Catalog"><code class="xref py py-class docutils literal notranslate"><span class="pre">Catalog</span></code></a>
in combination with nested filters (categories, countries, etc.)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Provider</span>

<span class="n">providers</span> <span class="o">=</span> <span class="n">Provider</span><span class="o">.</span><span class="n">get_all</span><span class="p">()</span>
</pre></div>
</div>
<p>Get a <a class="reference internal" href="#cartoframes.data.observatory.Provider" title="cartoframes.data.observatory.Provider"><code class="xref py py-class docutils literal notranslate"><span class="pre">Provider</span></code></a> from the
<a class="reference internal" href="#cartoframes.data.observatory.Catalog" title="cartoframes.data.observatory.Catalog"><code class="xref py py-class docutils literal notranslate"><span class="pre">Catalog</span></code></a> given its ID</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">provider</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">provider</span><span class="p">(</span><span class="s1">&#39;mrli&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="cartoframes.data.observatory.Provider.datasets">
<em class="property">property </em><code class="sig-name descname">datasets</code></dt>
<dd><p>Get the list of datasets related to this provider.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">CatalogList</span></code> List of Dataset instances.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#cartoframes.exceptions.DiscoveryException" title="cartoframes.exceptions.DiscoveryException"><strong>DiscoveryException</strong></a> – When no datasets are found.</p></li>
<li><p><strong>CartoException</strong> – If there’s a problem when connecting to the catalog.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">datasets</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">provider</span><span class="p">(</span><span class="s1">&#39;mrli&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">datasets</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Provider.name">
<em class="property">property </em><code class="sig-name descname">name</code></dt>
<dd><p>Name of this provider.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cartoframes.data.observatory.Variable">
<em class="property">class </em><code class="sig-prename descclassname">cartoframes.data.observatory.</code><code class="sig-name descname">Variable</code><span class="sig-paren">(</span><em class="sig-param">data</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cartoframes.data.observatory.catalog.entity.CatalogEntity</span></code></p>
<p>This class represents a <a class="reference internal" href="#cartoframes.data.observatory.Variable" title="cartoframes.data.observatory.Variable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Variable</span></code></a>
of datasets in the <a class="reference internal" href="#cartoframes.data.observatory.Catalog" title="cartoframes.data.observatory.Catalog"><code class="xref py py-class docutils literal notranslate"><span class="pre">Catalog</span></code></a>.</p>
<p>Variables contain column names, description, data type, aggregation method and some other metadata that is
useful to understand the underlying data inside a <a class="reference internal" href="#cartoframes.data.observatory.Dataset" title="cartoframes.data.observatory.Dataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Dataset</span></code></a></p>
<p class="rubric">Examples</p>
<p>List the variables of a <a class="reference internal" href="#cartoframes.data.observatory.Dataset" title="cartoframes.data.observatory.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a>
in combination with nested filters (categories, countries, etc.)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">country</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">category</span><span class="p">(</span><span class="s1">&#39;demographics&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;mbi_retail_turn_705247a&#39;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">variables</span>
</pre></div>
</div>
<dl class="method">
<dt id="cartoframes.data.observatory.Variable.datasets">
<em class="property">property </em><code class="sig-name descname">datasets</code></dt>
<dd><p>Get the list of datasets related to this variable.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">CatalogList</span></code> List of Dataset instances.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#cartoframes.exceptions.DiscoveryException" title="cartoframes.exceptions.DiscoveryException"><strong>DiscoveryException</strong></a> – When no datasets are found.</p></li>
<li><p><strong>CartoException</strong> – If there’s a problem when connecting to the catalog.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Variable.name">
<em class="property">property </em><code class="sig-name descname">name</code></dt>
<dd><p>Name of this variable.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Variable.description">
<em class="property">property </em><code class="sig-name descname">description</code></dt>
<dd><p>Description of this variable.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Variable.column_name">
<em class="property">property </em><code class="sig-name descname">column_name</code></dt>
<dd><p>Column name of the actual table related to the variable in the <a class="reference internal" href="#cartoframes.data.observatory.Dataset" title="cartoframes.data.observatory.Dataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Dataset</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Variable.db_type">
<em class="property">property </em><code class="sig-name descname">db_type</code></dt>
<dd><p>Type in the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p>Examples: INTEGER, STRING, FLOAT, GEOGRAPHY, JSON, BOOL, etc.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Variable.dataset">
<em class="property">property </em><code class="sig-name descname">dataset</code></dt>
<dd><p>ID of the <a class="reference internal" href="#cartoframes.data.observatory.Dataset" title="cartoframes.data.observatory.Dataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Dataset</span></code></a> to which this variable belongs.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Variable.agg_method">
<em class="property">property </em><code class="sig-name descname">agg_method</code></dt>
<dd><p>Text representing a description of the aggregation method used to compute the values in this <cite>Variable</cite></p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Variable.variable_group">
<em class="property">property </em><code class="sig-name descname">variable_group</code></dt>
<dd><p>If any, ID of the variable group to which this variable belongs.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Variable.starred">
<em class="property">property </em><code class="sig-name descname">starred</code></dt>
<dd><p>Boolean indicating whether this variable is a starred one or not. Internal usage only</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Variable.summary">
<em class="property">property </em><code class="sig-name descname">summary</code></dt>
<dd><p>JSON object with extra metadata that summarizes different properties of this variable.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Variable.project_name">
<em class="property">property </em><code class="sig-name descname">project_name</code></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Variable.schema_name">
<em class="property">property </em><code class="sig-name descname">schema_name</code></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Variable.dataset_name">
<em class="property">property </em><code class="sig-name descname">dataset_name</code></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Variable.describe">
<code class="sig-name descname">describe</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Shows a summary of the actual stats of the variable (column) of the dataset.
Some of the stats provided per variable are: avg, max, min, sum, range,
stdev, q1, q3, median and interquartile_range</p>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># avg                    average value</span>
<span class="c1"># max                    max value</span>
<span class="c1"># min                    min value</span>
<span class="c1"># sum                    sum of all values</span>
<span class="c1"># range</span>
<span class="c1"># stdev                  standard deviation</span>
<span class="c1"># q1                     first quantile</span>
<span class="c1"># q3                     third quantile</span>
<span class="c1"># median                 median value</span>
<span class="c1"># interquartile_range</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Variable.head">
<code class="sig-name descname">head</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Returns a sample of the 10 first values of the variable data.</p>
<p>For the cases of datasets with a content fewer than 10 rows
(i.e. zip codes of small countries), this method won’t return anything</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Variable.tail">
<code class="sig-name descname">tail</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Returns a sample of the 10 last values of the variable data.</p>
<p>For the cases of datasets with a content fewer than 10 rows
(i.e. zip codes of small countries), this method won’t return anything</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Variable.counts">
<code class="sig-name descname">counts</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Returns a summary of different counts over the actual variable values.</p>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># all               total number of valiues</span>
<span class="c1"># null              total number of null values</span>
<span class="c1"># zero              number of zero-valued entries</span>
<span class="c1"># extreme           number of values 3stdev outside the interquartile range</span>
<span class="c1"># distinct          number of distinct (unique) entries</span>
<span class="c1"># outliers          number of outliers (outside 1.5stdev the interquartile range</span>
<span class="c1"># zero_percent      percent of values that are zero</span>
<span class="c1"># distinct_percent  percent of values that are distinct</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Variable.quantiles">
<code class="sig-name descname">quantiles</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Returns the quantiles of the variable data.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Variable.top_values">
<code class="sig-name descname">top_values</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Returns information about the top values of the variable data.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Variable.histogram">
<code class="sig-name descname">histogram</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Plots an histogram with the variable data.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cartoframes.data.observatory.Enrichment">
<em class="property">class </em><code class="sig-prename descclassname">cartoframes.data.observatory.</code><code class="sig-name descname">Enrichment</code><span class="sig-paren">(</span><em class="sig-param">credentials=None</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cartoframes.data.observatory.enrichment.enrichment_service.EnrichmentService</span></code></p>
<p>This is the main class to enrich your own data with data from the
<a class="reference external" href="https://carto.com/platform/location-data-streams/">Data Observatory</a></p>
<p>To be able to use the <cite>Enrichment</cite> functions you need A CARTO account with Data Observatory v2 enabled. Contact
us at <a class="reference external" href="mailto:support&#37;&#52;&#48;carto&#46;com">support<span>&#64;</span>carto<span>&#46;</span>com</a> for more information about this.</p>
<p>Please, see the <a class="reference internal" href="#cartoframes.data.observatory.Catalog" title="cartoframes.data.observatory.Catalog"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Catalog</span></code></a> discovery and subscription guides, to understand how to explore the Data Observatory
repository and subscribe to premium datasets to be used in your enrichment workflows.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – credentials of user account. If not provided,
a default credentials (if set with <a class="reference internal" href="#cartoframes.auth.set_default_credentials" title="cartoframes.auth.set_default_credentials"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_default_credentials</span></code></a>) will attempted to be
used.</p>
</dd>
</dl>
<dl class="method">
<dt id="cartoframes.data.observatory.Enrichment.enrich_points">
<code class="sig-name descname">enrich_points</code><span class="sig-paren">(</span><em class="sig-param">dataframe</em>, <em class="sig-param">variables</em>, <em class="sig-param">geom_col=None</em>, <em class="sig-param">filters=[]</em><span class="sig-paren">)</span></dt>
<dd><p>Enrich your points <cite>DataFrame</cite> with columns (<a class="reference internal" href="#cartoframes.data.observatory.Variable" title="cartoframes.data.observatory.Variable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Variable</span></code></a>) from one or more <a class="reference internal" href="#cartoframes.data.observatory.Dataset" title="cartoframes.data.observatory.Dataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Dataset</span></code></a>
in the Data Observatory, intersecting the points in the source <cite>DataFrame</cite> with the geographies in the
Data Observatory.</p>
<p>Extra columns as <cite>area</cite> and <cite>population</cite> will be provided in the resulting <cite>DataFrame</cite> for normalization
purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>(</strong><strong>pandas DataFrame</strong><strong>, </strong><strong>geopandas GeoDataFrame</strong> (<em>dataframe</em>) – or <code class="xref py py-class docutils literal notranslate"><span class="pre">CartoDataFrame</span></code>): a <cite>DataFrame</cite> instance to be enriched.</p></li>
<li><p><strong>variables</strong> (<a class="reference internal" href="#cartoframes.data.observatory.Variable" title="cartoframes.data.observatory.Variable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Variable</span></code></a>, list, str) – variable ID, slug or <a class="reference internal" href="#cartoframes.data.observatory.Variable" title="cartoframes.data.observatory.Variable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Variable</span></code></a> instance or list of variable IDs, slugs
or <a class="reference internal" href="#cartoframes.data.observatory.Variable" title="cartoframes.data.observatory.Variable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Variable</span></code></a> instances taken from the Data Observatory <a class="reference internal" href="#cartoframes.data.observatory.Catalog" title="cartoframes.data.observatory.Catalog"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Catalog</span></code></a>.</p></li>
<li><p><strong>geom_col</strong> (<em>str</em><em>, </em><em>optional</em>) – string indicating the geometry column name in the source <cite>DataFrame</cite>.</p></li>
<li><p><strong>filters</strong> (<em>list</em><em>, </em><em>optional</em>) – list of <a class="reference internal" href="#cartoframes.data.observatory.VariableFilter" title="cartoframes.data.observatory.VariableFilter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">VariableFilter</span></code></a> to filter rows from
the enrichment data. Example: <cite>[VariableFilter(variable1, “= ‘a string’”)]</cite></p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">CartoDataFrame</span></code> enriched with the variables passed as argument.</p>
</dd>
</dl>
<p><em>Note that if the points of the `dataframe` you provide are contained in more than one geometry
in the enrichment dataset, the number of rows of the returned `CartoDataFrame` could be different
than the `dataframe` argument number of rows.</em></p>
<p class="rubric">Examples</p>
<p>Enrich a points <cite>DataFrame</cite> with Catalog classes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span>
<span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>
<span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Enrichment</span><span class="p">,</span> <span class="n">Catalog</span>

<span class="n">set_default_credentials</span><span class="p">()</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;...&#39;</span><span class="p">)</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">variables</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">country</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">category</span><span class="p">(</span><span class="s1">&#39;demographics&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">datasets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">variables</span>

<span class="n">enrichment</span> <span class="o">=</span> <span class="n">Enrichment</span><span class="p">()</span>
<span class="n">cdf_enrich</span> <span class="o">=</span> <span class="n">enrichment</span><span class="o">.</span><span class="n">enrich_points</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
</pre></div>
</div>
<p>Enrich a points dataframe with several Variables using their ids:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span>
<span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>
<span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Enrichment</span><span class="p">,</span> <span class="n">Catalog</span>

<span class="n">set_default_credentials</span><span class="p">()</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;...&#39;</span><span class="p">)</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">all_variables</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">country</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">category</span><span class="p">(</span><span class="s1">&#39;demographics&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">datasets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">variables</span>
<span class="n">variable1</span> <span class="o">=</span> <span class="n">all_variables</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">variable2</span> <span class="o">=</span> <span class="n">all_variables</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">variables</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">variable1</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
    <span class="n">variable2</span><span class="o">.</span><span class="n">id</span>
<span class="p">]</span>

<span class="n">enrichment</span> <span class="o">=</span> <span class="n">Enrichment</span><span class="p">()</span>
<span class="n">cdf_enrich</span> <span class="o">=</span> <span class="n">enrichment</span><span class="o">.</span><span class="n">enrich_points</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
</pre></div>
</div>
<p>Enrich a points dataframe with filters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span>
<span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>
<span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Enrichment</span><span class="p">,</span> <span class="n">Catalog</span><span class="p">,</span> <span class="n">VariableFilter</span>

<span class="n">set_default_credentials</span><span class="p">()</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;...&#39;</span><span class="p">)</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">variable</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">country</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">category</span><span class="p">(</span><span class="s1">&#39;demographics&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">datasets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">filter</span> <span class="o">=</span> <span class="n">VariableFilter</span><span class="p">(</span><span class="n">variable</span><span class="p">,</span> <span class="s2">&quot;= &#39;2019-09-01&#39;&quot;</span><span class="p">)</span>

<span class="n">enrichment</span> <span class="o">=</span> <span class="n">Enrichment</span><span class="p">()</span>
<span class="n">cdf_enrich</span> <span class="o">=</span> <span class="n">enrichment</span><span class="o">.</span><span class="n">enrich_points</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">variables</span><span class="o">=</span><span class="p">[</span><span class="n">variable</span><span class="p">],</span> <span class="n">filters</span><span class="o">=</span><span class="p">[</span><span class="nb">filter</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="cartoframes.data.observatory.Enrichment.AGGREGATION_DEFAULT">
<code class="sig-name descname">AGGREGATION_DEFAULT</code><em class="property"> = 'default'</em></dt>
<dd><p>Use default aggregation method for polygons enrichment. More info in <a class="reference internal" href="#cartoframes.data.observatory.Enrichment.enrich_polygons" title="cartoframes.data.observatory.Enrichment.enrich_polygons"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Enrichment.enrich_polygons</span></code></a></p>
</dd></dl>

<dl class="attribute">
<dt id="cartoframes.data.observatory.Enrichment.AGGREGATION_NONE">
<code class="sig-name descname">AGGREGATION_NONE</code><em class="property"> = 'none'</em></dt>
<dd><p>Do not aggregate data in polygons enrichment. More info in <a class="reference internal" href="#cartoframes.data.observatory.Enrichment.enrich_polygons" title="cartoframes.data.observatory.Enrichment.enrich_polygons"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Enrichment.enrich_polygons</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Enrichment.enrich_polygons">
<code class="sig-name descname">enrich_polygons</code><span class="sig-paren">(</span><em class="sig-param">dataframe</em>, <em class="sig-param">variables</em>, <em class="sig-param">geom_col=None</em>, <em class="sig-param">filters=[]</em>, <em class="sig-param">aggregation='default'</em><span class="sig-paren">)</span></dt>
<dd><p>Enrich your polygons <cite>DataFrame</cite> with columns (<a class="reference internal" href="#cartoframes.data.observatory.Variable" title="cartoframes.data.observatory.Variable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Variable</span></code></a>) from one or more <a class="reference internal" href="#cartoframes.data.observatory.Dataset" title="cartoframes.data.observatory.Dataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Dataset</span></code></a> in
the Data Observatory by intersecting the polygons in the source <cite>DataFrame</cite> with geographies in the
Data Observatory.</p>
<p>When a polygon intersects with multiple geographies, the proportional part of the intersection will be used
to interpolate the quantity of the polygon value intersected, aggregating them. Most of <a class="reference internal" href="#cartoframes.data.observatory.Variable" title="cartoframes.data.observatory.Variable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Variable</span></code></a>
instances have a <a class="reference internal" href="#cartoframes.data.observatory.Variable.agg_method" title="cartoframes.data.observatory.Variable.agg_method"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Variable.agg_method</span></code></a> property which is used by default as aggregation function, but
you can overwrite it using the <cite>aggregation</cite> parameter (not even doing the aggregation). If a variable does not
have the <cite>agg_method</cite> property set and you do not overwrite it either (with the <cite>aggregation</cite> parameter), the
variable column will be skipped from the enrichment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>(</strong><strong>pandas DataFrame</strong><strong>, </strong><strong>geopandas GeoDataFrame</strong> (<em>dataframe</em>) – or <code class="xref py py-class docutils literal notranslate"><span class="pre">CartoDataFrame</span></code>): a <cite>DataFrame</cite> instance to be enriched.</p></li>
<li><p><strong>variables</strong> (<a class="reference internal" href="#cartoframes.data.observatory.Variable" title="cartoframes.data.observatory.Variable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Variable</span></code></a>, list, str) – variable ID, slug or <a class="reference internal" href="#cartoframes.data.observatory.Variable" title="cartoframes.data.observatory.Variable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Variable</span></code></a> instance or list of variable IDs, slugs
or <a class="reference internal" href="#cartoframes.data.observatory.Variable" title="cartoframes.data.observatory.Variable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Variable</span></code></a> instances taken from the Data Observatory <a class="reference internal" href="#cartoframes.data.observatory.Catalog" title="cartoframes.data.observatory.Catalog"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Catalog</span></code></a>.</p></li>
<li><p><strong>geom_col</strong> (<em>str</em><em>, </em><em>optional</em>) – string indicating the geometry column name in the source <cite>DataFrame</cite>.</p></li>
<li><p><strong>filters</strong> (<em>list</em><em>, </em><em>optional</em>) – list of <a class="reference internal" href="#cartoframes.data.observatory.VariableFilter" title="cartoframes.data.observatory.VariableFilter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">VariableFilter</span></code></a> to filter rows from
the enrichment data. Example: <cite>[VariableFilter(variable1, “= ‘a string’”)]</cite></p></li>
<li><p><strong>aggregation</strong> (<em>str</em><em>, </em><em>list</em><em>, </em><em>optional</em>) – <p>sets the data aggregation. The polygons in the source <cite>DataFrame</cite> can
intersect with one or more polygons from the Data Observatory. With this method you can select how to
aggregate the resulting data.</p>
<p>An aggregation method can be one of these values: ‘MIN’, ‘MAX’, ‘SUM’, ‘AVG’, ‘COUNT’,
‘ARRAY_AGG’, ‘ARRAY_CONCAT_AGG’, ‘STRING_AGG’ but check this
<a class="reference external" href="https://cloud.google.com/bigquery/docs/reference/standard-sql/aggregate_functions">documentation</a>
for a complete list of aggregate functions.</p>
<dl>
<dt>The options are:</dt><dd><ul>
<li><p><a class="reference internal" href="#cartoframes.data.observatory.Enrichment.AGGREGATION_DEFAULT" title="cartoframes.data.observatory.Enrichment.AGGREGATION_DEFAULT"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Enrichment.AGGREGATION_DEFAULT</span></code></a> (default): Every <a class="reference internal" href="#cartoframes.data.observatory.Variable" title="cartoframes.data.observatory.Variable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Variable</span></code></a> has a default</p></li>
</ul>
<p>aggregation method in the <a class="reference internal" href="#cartoframes.data.observatory.Variable.agg_method" title="cartoframes.data.observatory.Variable.agg_method"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Variable.agg_method</span></code></a> property and it will be used to
aggregate the data (a variable could not have <cite>agg_method</cite> defined and in this case, the
variables will be skipped).</p>
<ul>
<li><p><a class="reference internal" href="#cartoframes.data.observatory.Enrichment.AGGREGATION_NONE" title="cartoframes.data.observatory.Enrichment.AGGREGATION_NONE"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Enrichment.AGGREGATION_NONE</span></code></a>: use this option to do the aggregation locally by yourself.</p></li>
</ul>
<p>You will receive a row of data from each polygon instersected.</p>
<ul>
<li><p>str: if you want to overwrite every default aggregation method, you can pass a string with the</p></li>
</ul>
<p>aggregation method to use.</p>
<ul>
<li><p>dictionary: if you want to overwrite some default aggregation methods from your selected</p></li>
</ul>
<p>variables, use a dict as <code class="xref py py-attr docutils literal notranslate"><span class="pre">Variable.id</span></code>: aggregation method pairs, for example:
<cite>{variable1.id: ‘SUM’, variable3.id: ‘AVG’}</cite>.</p>
</dd>
</dl>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">CartoDataFrame</span></code> enriched with the variables passed as argument.</p>
</dd>
</dl>
<p><em>Note that if the geometry of the `dataframe` you provide intersects with more than one geometry
in the enrichment dataset, the number of rows of the returned `CartoDataFrame` could be different
than the `dataframe` argument number of rows.</em></p>
<p class="rubric">Examples</p>
<p>Enrich a polygons dataframe with one Variable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span>
<span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>
<span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Enrichment</span><span class="p">,</span> <span class="n">Catalog</span>

<span class="n">set_default_credentials</span><span class="p">()</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;...&#39;</span><span class="p">)</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">variable</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">country</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">category</span><span class="p">(</span><span class="s1">&#39;demographics&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">datasets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">variables</span> <span class="o">=</span> <span class="p">[</span><span class="n">variable</span><span class="p">]</span>

<span class="n">enrichment</span> <span class="o">=</span> <span class="n">Enrichment</span><span class="p">()</span>
<span class="n">cdf_enrich</span> <span class="o">=</span> <span class="n">enrichment</span><span class="o">.</span><span class="n">enrich_polygons</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
</pre></div>
</div>
<p>Enrich a polygons dataframe with all Variables from a Catalog Dataset:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span>
<span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>
<span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Enrichment</span><span class="p">,</span> <span class="n">Catalog</span>

<span class="n">set_default_credentials</span><span class="p">()</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;...&#39;</span><span class="p">)</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">variables</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">country</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">category</span><span class="p">(</span><span class="s1">&#39;demographics&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">datasets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">variables</span>

<span class="n">enrichment</span> <span class="o">=</span> <span class="n">Enrichment</span><span class="p">()</span>
<span class="n">cdf_enrich</span> <span class="o">=</span> <span class="n">enrichment</span><span class="o">.</span><span class="n">enrich_polygons</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
</pre></div>
</div>
<p>Enrich a polygons dataframe with several Variables using their ids:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span>
<span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>
<span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Enrichment</span><span class="p">,</span> <span class="n">Catalog</span>

<span class="n">set_default_credentials</span><span class="p">()</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;...&#39;</span><span class="p">)</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">all_variables</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">country</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">category</span><span class="p">(</span><span class="s1">&#39;demographics&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">datasets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">variables</span>
<span class="n">variable1</span> <span class="o">=</span> <span class="n">all_variables</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">variable2</span> <span class="o">=</span> <span class="n">all_variables</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">variables</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">variable1</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
    <span class="n">variable2</span><span class="o">.</span><span class="n">id</span>
<span class="p">]</span>

<span class="n">enrichment</span> <span class="o">=</span> <span class="n">Enrichment</span><span class="p">()</span>
<span class="n">cdf_enrich</span> <span class="o">=</span> <span class="n">enrichment</span><span class="o">.</span><span class="n">enrich_polygons</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
</pre></div>
</div>
<p>Enrich a polygons dataframe with filters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span>
<span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Enrichment</span><span class="p">,</span> <span class="n">Catalog</span><span class="p">,</span> <span class="n">VariableFilter</span>
<span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span><span class="p">,</span> <span class="n">Credentials</span>

<span class="n">set_default_credentials</span><span class="p">()</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;...&#39;</span><span class="p">)</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">variable</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">country</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">category</span><span class="p">(</span><span class="s1">&#39;demographics&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">datasets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">filter</span> <span class="o">=</span> <span class="n">VariableFilter</span><span class="p">(</span><span class="n">variable</span><span class="p">,</span> <span class="s2">&quot;= &#39;2019-09-01&#39;&quot;</span><span class="p">)</span>

<span class="n">enrichment</span> <span class="o">=</span> <span class="n">Enrichment</span><span class="p">()</span>
<span class="n">cdf_enrich</span> <span class="o">=</span> <span class="n">enrichment</span><span class="o">.</span><span class="n">enrich_polygons</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">variables</span><span class="o">=</span><span class="p">[</span><span class="n">variable</span><span class="p">],</span> <span class="n">filters</span><span class="o">=</span><span class="p">[</span><span class="nb">filter</span><span class="p">])</span>
</pre></div>
</div>
<p>Enrich a polygons dataframe overwriting every variables aggregation methods to use <cite>SUM</cite> function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span>
<span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Enrichment</span><span class="p">,</span> <span class="n">Catalog</span>
<span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span><span class="p">,</span> <span class="n">Credentials</span>

<span class="n">set_default_credentials</span><span class="p">()</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;...&#39;</span><span class="p">)</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">all_variables</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">country</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">category</span><span class="p">(</span><span class="s1">&#39;demographics&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">datasets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">variables</span>
<span class="n">variable1</span> <span class="o">=</span> <span class="n">all_variables</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="n">variable1</span><span class="o">.</span><span class="n">agg_method</span> <span class="ow">is</span> <span class="s1">&#39;AVG&#39;</span> <span class="n">but</span> <span class="n">you</span> <span class="n">want</span> <span class="s1">&#39;SUM&#39;</span>
<span class="n">variable2</span> <span class="o">=</span> <span class="n">all_variables</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="n">variable2</span><span class="o">.</span><span class="n">agg_method</span> <span class="ow">is</span> <span class="s1">&#39;AVG&#39;</span> <span class="ow">and</span> <span class="n">it</span> <span class="ow">is</span> <span class="n">what</span> <span class="n">you</span> <span class="n">want</span>
<span class="n">variable3</span> <span class="o">=</span> <span class="n">all_variables</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">//</span> <span class="n">variable3</span><span class="o">.</span><span class="n">agg_method</span> <span class="ow">is</span> <span class="s1">&#39;SUM&#39;</span> <span class="n">but</span> <span class="n">you</span> <span class="n">want</span> <span class="s1">&#39;AVG&#39;</span>

<span class="n">variables</span> <span class="o">=</span> <span class="p">[</span><span class="n">variable1</span><span class="p">,</span> <span class="n">variable2</span><span class="p">,</span> <span class="n">variable3</span><span class="p">]</span>

<span class="n">enrichment</span> <span class="o">=</span> <span class="n">Enrichment</span><span class="p">()</span>
<span class="n">cdf_enrich</span> <span class="o">=</span> <span class="n">enrichment</span><span class="o">.</span><span class="n">enrich_polygons</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">variables</span><span class="p">,</span> <span class="n">aggregation</span><span class="o">=</span><span class="s1">&#39;SUM&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Enrich a polygons dataframe overwriting some of the variables aggregation methods:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span>
<span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Enrichment</span><span class="p">,</span> <span class="n">Catalog</span>
<span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span><span class="p">,</span> <span class="n">Credentials</span>

<span class="n">set_default_credentials</span><span class="p">()</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;...&#39;</span><span class="p">)</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">all_variables</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">country</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">category</span><span class="p">(</span><span class="s1">&#39;demographics&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">datasets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">variables</span>
<span class="n">variable1</span> <span class="o">=</span> <span class="n">all_variables</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="n">variable1</span><span class="o">.</span><span class="n">agg_method</span> <span class="ow">is</span> <span class="s1">&#39;AVG&#39;</span> <span class="n">but</span> <span class="n">you</span> <span class="n">want</span> <span class="s1">&#39;SUM&#39;</span>
<span class="n">variable2</span> <span class="o">=</span> <span class="n">all_variables</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="n">variable2</span><span class="o">.</span><span class="n">agg_method</span> <span class="ow">is</span> <span class="s1">&#39;AVG&#39;</span> <span class="ow">and</span> <span class="n">it</span> <span class="ow">is</span> <span class="n">what</span> <span class="n">you</span> <span class="n">want</span>
<span class="n">variable3</span> <span class="o">=</span> <span class="n">all_variables</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">//</span> <span class="n">variable3</span><span class="o">.</span><span class="n">agg_method</span> <span class="ow">is</span> <span class="s1">&#39;SUM&#39;</span> <span class="n">but</span> <span class="n">you</span> <span class="n">want</span> <span class="s1">&#39;AVG&#39;</span>

<span class="n">variables</span> <span class="o">=</span> <span class="p">[</span><span class="n">variable1</span><span class="p">,</span> <span class="n">variable2</span><span class="p">,</span> <span class="n">variable3</span><span class="p">]</span>

<span class="n">aggregation</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">variable1</span><span class="o">.</span><span class="n">id</span><span class="p">:</span> <span class="s1">&#39;SUM&#39;</span><span class="p">,</span>
    <span class="n">variable3</span><span class="o">.</span><span class="n">id</span><span class="p">:</span> <span class="s1">&#39;AVG&#39;</span>
<span class="p">}</span>

<span class="n">enrichment</span> <span class="o">=</span> <span class="n">Enrichment</span><span class="p">()</span>
<span class="n">cdf_enrich</span> <span class="o">=</span> <span class="n">enrichment</span><span class="o">.</span><span class="n">enrich_polygons</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">variables</span><span class="p">,</span> <span class="n">aggregation</span><span class="o">=</span><span class="n">aggregation</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cartoframes.data.observatory.VariableFilter">
<em class="property">class </em><code class="sig-prename descclassname">cartoframes.data.observatory.</code><code class="sig-name descname">VariableFilter</code><span class="sig-paren">(</span><em class="sig-param">variable</em>, <em class="sig-param">query</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class can be used for filtering the results of
<a class="reference internal" href="#cartoframes.data.observatory.Enrichment" title="cartoframes.data.observatory.Enrichment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Enrichment</span></code></a> functions. It works by appending the
<cite>VariableFilter</cite> SQL operators to the <cite>WHERE</cite> clause of the resulting enrichment SQL with the <cite>AND</cite> operator.</p>
<blockquote>
<div><dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>variable (str or <a class="reference internal" href="#cartoframes.data.observatory.Variable" title="cartoframes.data.observatory.Variable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Variable</span></code></a>):</dt><dd><p>The variable name or <a class="reference internal" href="#cartoframes.data.observatory.Variable" title="cartoframes.data.observatory.Variable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Variable</span></code></a> instance</p>
</dd>
<dt>query (str):</dt><dd><p>The SQL query filter to be appended to the enrichment SQL query.</p>
</dd>
</dl>
</dd>
</dl>
<p>Examples:</p>
<blockquote>
<div><ul class="simple">
<li><p>Equal to number: <cite>VariableFilter(variable, ‘= 3’)</cite></p></li>
<li><p>Equal to string: <cite>VariableFilter(variable, “= ‘the string’”)</cite></p></li>
<li><p>Greater that 3: <cite>VariableFilter(variable, ‘&gt; 3’)</cite></p></li>
</ul>
<p>Next example uses a <cite>VariableFilter</cite> instance to calculate the <cite>SUM</cite> of car-free households
<a class="reference internal" href="#cartoframes.data.observatory.Variable" title="cartoframes.data.observatory.Variable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Variable</span></code></a> of the <a class="reference internal" href="#cartoframes.data.observatory.Catalog" title="cartoframes.data.observatory.Catalog"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Catalog</span></code></a> for each polygon of <cite>my_local_dataframe</cite> pandas <cite>DataFrame</cite> only for
areas with more than 100 free car-free households</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Enrichment</span><span class="p">,</span> <span class="n">Variable</span><span class="p">,</span> <span class="n">VariableFilter</span>

<span class="n">variable</span> <span class="o">=</span> <span class="n">Variable</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;no_cars_d19dfd10&#39;</span><span class="p">)</span>
<span class="n">enriched_dataset_cdf</span> <span class="o">=</span> <span class="n">Enrichment</span><span class="p">()</span><span class="o">.</span><span class="n">enrich_polygons</span><span class="p">(</span>
    <span class="n">my_local_dataframe</span><span class="p">,</span>
    <span class="n">variables</span><span class="o">=</span><span class="p">[</span><span class="n">variable</span><span class="p">],</span>
    <span class="n">aggregation</span><span class="o">=</span><span class="p">[</span><span class="n">VariableAggregation</span><span class="p">(</span><span class="n">variable</span><span class="p">,</span> <span class="s1">&#39;SUM&#39;</span><span class="p">)]</span>
    <span class="n">filters</span><span class="o">=</span><span class="p">[</span><span class="n">VariableFilter</span><span class="p">(</span><span class="n">variable</span><span class="p">,</span> <span class="s1">&#39;&gt; 100&#39;</span><span class="p">)]</span>
<span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="class">
<dt id="cartoframes.data.observatory.CatalogEntity">
<em class="property">class </em><code class="sig-prename descclassname">cartoframes.data.observatory.</code><code class="sig-name descname">CatalogEntity</code><span class="sig-paren">(</span><em class="sig-param">data</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></p>
<p>This is an internal class the rest of the classes related to the catalog discovery extend.</p>
<dl class="simple">
<dt>It contains:</dt><dd><ul class="simple">
<li><p>Properties: <cite>id</cite>, <cite>slug</cite> (a shorter ID).</p></li>
<li><p>Static methods: <cite>get</cite>, <cite>get_all</cite>, <cite>get_list</cite> to retrieve elements or lists of objects in the catalog such as
datasets, categories, variables, etc.</p></li>
<li><p>Instance methods to convert to pandas Series, Python dict, compare instances, etc.</p></li>
</ul>
</dd>
</dl>
<p>As a rule of thumb you don’t use directly this class, it is documented for inheritance purposes.</p>
<dl class="attribute">
<dt id="cartoframes.data.observatory.CatalogEntity.id_field">
<code class="sig-name descname">id_field</code><em class="property"> = 'id'</em></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="cartoframes.data.observatory.CatalogEntity.export_excluded_fields">
<code class="sig-name descname">export_excluded_fields</code><em class="property"> = ['summary_json', 'available_in', 'geom_coverage']</em></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.CatalogEntity.id">
<em class="property">property </em><code class="sig-name descname">id</code></dt>
<dd><p>The ID of the entity.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.CatalogEntity.slug">
<em class="property">property </em><code class="sig-name descname">slug</code></dt>
<dd><p>The slug (short ID) of the entity.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.CatalogEntity.get">
<em class="property">classmethod </em><code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param">id_</em><span class="sig-paren">)</span></dt>
<dd><p>Get an instance of an entity by ID or slug.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>id_</strong> (<em>str</em>) – ID or slug of a catalog entity.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#cartoframes.exceptions.DiscoveryException" title="cartoframes.exceptions.DiscoveryException"><strong>DiscoveryException</strong></a> – When no entities found.</p></li>
<li><p><strong>CartoException</strong> – If there’s a problem when connecting to the catalog.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.CatalogEntity.get_all">
<em class="property">classmethod </em><code class="sig-name descname">get_all</code><span class="sig-paren">(</span><em class="sig-param">filters=None</em><span class="sig-paren">)</span></dt>
<dd><p>List all instances of an entity.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filters</strong> (<em>dict</em><em>, </em><em>optional</em>) – Dict containing pairs of entity properties and its value to be used as filters to query the available
entities. If none is provided, no filters will be applied to the query.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.CatalogEntity.get_list">
<em class="property">classmethod </em><code class="sig-name descname">get_list</code><span class="sig-paren">(</span><em class="sig-param">id_list</em><span class="sig-paren">)</span></dt>
<dd><p>Get a list of instance of an entity by a list of IDs or slugs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>id_list</strong> (<em>list</em>) – List of sD or slugs of a entities in the catalog to retrieve instances.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#cartoframes.exceptions.DiscoveryException" title="cartoframes.exceptions.DiscoveryException"><strong>DiscoveryException</strong></a> – When no entities found.</p></li>
<li><p><strong>CartoException</strong> – If there’s a problem when connecting to the catalog.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.CatalogEntity.to_series">
<code class="sig-name descname">to_series</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Converts the entity instance to a pandas Series.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.CatalogEntity.to_dict">
<code class="sig-name descname">to_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Converts the entity instance to a Python dict.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cartoframes.data.observatory.CatalogList">
<em class="property">class </em><code class="sig-prename descclassname">cartoframes.data.observatory.</code><code class="sig-name descname">CatalogList</code><span class="sig-paren">(</span><em class="sig-param">data</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></p>
<p>This is an internal class that represents a list of entities in the catalog of the same type.</p>
<dl class="simple">
<dt>It contains:</dt><dd><ul class="simple">
<li><p>Instance methods to convert to get an instance of the entity by ID and to convert the list to a pandas
DataFrame for further filtering and exploration.</p></li>
</ul>
</dd>
</dl>
<p>As a rule of thumb you don’t use directly this class, it is documented for inheritance purposes.</p>
<dl class="method">
<dt id="cartoframes.data.observatory.CatalogList.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param">item_id</em><span class="sig-paren">)</span></dt>
<dd><p>Gets an entity by ID or slug</p>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">category</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;demographics&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.CatalogList.to_dataframe">
<code class="sig-name descname">to_dataframe</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Converts a list to a pandas DataFrame.</p>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.data.observatory</span> <span class="kn">import</span> <span class="n">Catalog</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
<span class="n">catalog</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cartoframes.data.observatory.Subscriptions">
<em class="property">class </em><code class="sig-prename descclassname">cartoframes.data.observatory.</code><code class="sig-name descname">Subscriptions</code><span class="sig-paren">(</span><em class="sig-param">datasets</em>, <em class="sig-param">geographies</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class is used to list the datasets and geographies you have a acquired a subscription (or valid license) for.</p>
<p>This class won’t show any dataset or geography tagged in the catalog as <cite>is_public_data</cite> since those data do not
require a subscription.</p>
<dl class="method">
<dt id="cartoframes.data.observatory.Subscriptions.datasets">
<em class="property">property </em><code class="sig-name descname">datasets</code></dt>
<dd><p>List of <a class="reference internal" href="#cartoframes.data.observatory.Dataset" title="cartoframes.data.observatory.Dataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Dataset</span></code></a> you have a subscription for.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>CartoException</strong> – If there’s a problem when connecting to the catalog.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.Subscriptions.geographies">
<em class="property">property </em><code class="sig-name descname">geographies</code></dt>
<dd><p>List of <a class="reference internal" href="#cartoframes.data.observatory.Geography" title="cartoframes.data.observatory.Geography"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Geography</span></code></a> you have a subscription for.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>CartoException</strong> – If there’s a problem when connecting to the catalog.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cartoframes.data.observatory.SubscriptionInfo">
<em class="property">class </em><code class="sig-prename descclassname">cartoframes.data.observatory.</code><code class="sig-name descname">SubscriptionInfo</code><span class="sig-paren">(</span><em class="sig-param">raw_data</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class represents a <a class="reference internal" href="#cartoframes.data.observatory.SubscriptionInfo" title="cartoframes.data.observatory.SubscriptionInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubscriptionInfo</span></code></a>
of datasets and geographies in the <a class="reference internal" href="#cartoframes.data.observatory.Catalog" title="cartoframes.data.observatory.Catalog"><code class="xref py py-class docutils literal notranslate"><span class="pre">Catalog</span></code></a></p>
<p>It contains private metadata (you need a CARTO account to query them) that is useful when you want a subscription
license for a specific dataset or geography.</p>
<dl class="method">
<dt id="cartoframes.data.observatory.SubscriptionInfo.id">
<em class="property">property </em><code class="sig-name descname">id</code></dt>
<dd><p>The ID of the dataset or geography.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.SubscriptionInfo.estimated_delivery_days">
<em class="property">property </em><code class="sig-name descname">estimated_delivery_days</code></dt>
<dd><p>Estimated days in which, once you <a class="reference internal" href="#cartoframes.data.observatory.Dataset.subscribe" title="cartoframes.data.observatory.Dataset.subscribe"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Dataset.subscribe</span></code></a> or <a class="reference internal" href="#cartoframes.data.observatory.Geography.subscribe" title="cartoframes.data.observatory.Geography.subscribe"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Geography.subscribe</span></code></a>,
you’ll get a license.</p>
<p>Your licensed datasets and geographies will be returned by the
<a class="reference internal" href="#cartoframes.data.observatory.Catalog.subscriptions" title="cartoframes.data.observatory.Catalog.subscriptions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">catalog.subscriptions</span></code></a> method.</p>
<p>For the datasets and geographies listed in the
<a class="reference internal" href="#cartoframes.data.observatory.Catalog.subscriptions" title="cartoframes.data.observatory.Catalog.subscriptions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">catalog.subscriptions</span></code></a> method you can:
- <a class="reference internal" href="#cartoframes.data.observatory.Dataset.download" title="cartoframes.data.observatory.Dataset.download"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Dataset.download</span></code></a> or <a class="reference internal" href="#cartoframes.data.observatory.Geography.download" title="cartoframes.data.observatory.Geography.download"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Geography.download</span></code></a>
- Use their <cite>Dataset.variables</cite> in the <a class="reference internal" href="#cartoframes.data.observatory.Enrichment" title="cartoframes.data.observatory.Enrichment"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Enrichment</span></code></a> functions</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.SubscriptionInfo.subscription_list_price">
<em class="property">property </em><code class="sig-name descname">subscription_list_price</code></dt>
<dd><p>Price in $ for a one year subscription for this dataset.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.SubscriptionInfo.tos">
<em class="property">property </em><code class="sig-name descname">tos</code></dt>
<dd><p>Legal Terms Of Service.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.SubscriptionInfo.tos_link">
<em class="property">property </em><code class="sig-name descname">tos_link</code></dt>
<dd><p>Link to additional information for the legal Terms Of Service.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.SubscriptionInfo.licenses">
<em class="property">property </em><code class="sig-name descname">licenses</code></dt>
<dd><p>Description of the licenses.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.SubscriptionInfo.licenses_link">
<em class="property">property </em><code class="sig-name descname">licenses_link</code></dt>
<dd><p>Link to additional information about the available licenses.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.observatory.SubscriptionInfo.rights">
<em class="property">property </em><code class="sig-name descname">rights</code></dt>
<dd><p>Rights over the dataset or geography when you buy a license by means of a subscription.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-cartoframes.data.services">
<span id="data-services"></span><h2>Data Services</h2>
<dl class="class">
<dt id="cartoframes.data.services.Geocoding">
<em class="property">class </em><code class="sig-prename descclassname">cartoframes.data.services.</code><code class="sig-name descname">Geocoding</code><span class="sig-paren">(</span><em class="sig-param">credentials=None</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cartoframes.data.services.service.Service</span></code></p>
<p>Geocoding using CARTO data services.</p>
<p>This requires a CARTO account with and API key that allows for using geocoding services;
(through explicit argument in constructor or via the default credentials).</p>
<p>To prevent having to geocode records that have been previously geocoded, and thus spend quota unnecessarily,
you should always preserve the <code class="docutils literal notranslate"><span class="pre">the_geom</span></code> and <code class="docutils literal notranslate"><span class="pre">carto_geocode_hash</span></code> columns generated by the
geocoding process. This will happen automatically if your input is a table from CARTO processed in place
(i.e. without a <code class="docutils literal notranslate"><span class="pre">table_name</span></code> parameter) or if you save your results in a CARTO table using the <code class="docutils literal notranslate"><span class="pre">table_name</span></code>
parameter, and only use the resulting table for any further geocoding.</p>
<p>In case you’re geocoding local data from a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> that you plan to re-geocode again, (e.g. because
you’re making your work reproducible by saving all the data preparation steps in a notebook),
we advise to save the geocoding results immediately to the same store from when the data is originally taken,
for example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dataframe</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;my_data&#39;</span><span class="p">)</span>
<span class="n">dataframe</span> <span class="o">=</span> <span class="n">Geocoding</span><span class="p">()</span><span class="o">.</span><span class="n">geocode</span><span class="p">(</span><span class="n">dataframe</span><span class="p">,</span> <span class="s1">&#39;address&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
<span class="n">dataframe</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;my_data&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>As an alternative you can use the <code class="docutils literal notranslate"><span class="pre">cached</span></code> option to store geocoding results in a CARTO table
and reuse them in later geocodings. It is needed to use the <code class="docutils literal notranslate"><span class="pre">table_name</span></code> parameter with the name
of the table used to cache the results.</p>
<p>If the same dataframe if geocoded repeatedly no credits will be spent, but note there is a time overhead
related to uploading the dataframe to a temporary table for checking for changes.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dataframe</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;my_data&#39;</span><span class="p">)</span>
<span class="n">dataframe</span> <span class="o">=</span> <span class="n">Geocoding</span><span class="p">()</span><span class="o">.</span><span class="n">geocode</span><span class="p">(</span><span class="n">dataframe</span><span class="p">,</span> <span class="s1">&#39;address&#39;</span><span class="p">,</span> <span class="n">table_name</span><span class="o">=</span><span class="s1">&#39;my_data&#39;</span><span class="p">,</span> <span class="n">cached</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
</pre></div>
</div>
<p>If you execute the previous code multiple times it will only spend credits on the first geocoding;
later ones will reuse the results stored in the <code class="docutils literal notranslate"><span class="pre">my_data</span></code> table. This will require extra processing
time. If the CSV file should ever change, cached results will only be applied to unmodified
records, and new geocoding will be performed only on new or changed records.</p>
<dl class="method">
<dt id="cartoframes.data.services.Geocoding.geocode">
<code class="sig-name descname">geocode</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">street</em>, <em class="sig-param">city=None</em>, <em class="sig-param">state=None</em>, <em class="sig-param">country=None</em>, <em class="sig-param">status={'gc_status_rel': 'relevance'}</em>, <em class="sig-param">table_name=None</em>, <em class="sig-param">if_exists='fail'</em>, <em class="sig-param">dry_run=False</em>, <em class="sig-param">cached=None</em><span class="sig-paren">)</span></dt>
<dd><p>Geocode method</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (str, DataFrame, GeoDataFrame, <code class="xref py py-class docutils literal notranslate"><span class="pre">CartoDataFrame</span></code>) – table, SQL query or DataFrame object to be geocoded.</p></li>
<li><p><strong>street</strong> (<em>str</em>) – name of the column containing postal addresses</p></li>
<li><p><strong>city</strong> (<em>dict</em><em>, </em><em>optional</em>) – dictionary with either a <cite>column</cite> key
with the name of a column containing the addresses’ city names or
a <cite>value</cite> key with a literal city value value, e.g. ‘New York’.
It also accepts a string, in which case <cite>column</cite> is implied.</p></li>
<li><p><strong>state</strong> (<em>dict</em><em>, </em><em>optional</em>) – dictionary with either a <cite>column</cite> key
with the name of a column containing the addresses’ state names or
a <cite>value</cite> key with a literal state value value, e.g. ‘WA’.
It also accepts a string, in which case <cite>column</cite> is implied.</p></li>
<li><p><strong>country</strong> (<em>dict</em><em>, </em><em>optional</em>) – dictionary with either a <cite>column</cite> key
with the name of a column containing the addresses’ country names or
a <cite>value</cite> key with a literal country value value, e.g. ‘US’.
It also accepts a string, in which case <cite>column</cite> is implied.</p></li>
<li><p><strong>status</strong> (<em>dict</em><em>, </em><em>optional</em>) – dictionary that defines a mapping from geocoding state
attributes (‘relevance’, ‘precision’, ‘match_types’) to column names.
(See <a class="reference external" href="https://carto.com/developers/data-services-api/reference/">https://carto.com/developers/data-services-api/reference/</a>)
Columns will be added to the result data for the requested attributes.
By default a column <code class="docutils literal notranslate"><span class="pre">gc_status_rel</span></code> will be created for the geocoding
_relevance_. The special attribute ‘*’ refers to all the status
attributes as a JSON object.</p></li>
<li><p><strong>table_name</strong> (<em>str</em><em>, </em><em>optional</em>) – the geocoding results will be placed in a new
CARTO table with this name.</p></li>
<li><p><strong>if_exists</strong> (<em>str</em><em>, </em><em>optional</em>) – Behavior for creating new datasets, only applicable
if table_name isn’t None;
Options are ‘fail’, ‘replace’, or ‘append’. Defaults to ‘fail’.</p></li>
<li><p><strong>cached</strong> (<em>bool</em><em>, </em><em>optional</em>) – Use cache geocoding results, saving the results in a
table. This parameter should be used along with <code class="docutils literal notranslate"><span class="pre">table_name</span></code>.</p></li>
<li><p><strong>dry_run</strong> (<em>bool</em><em>, </em><em>optional</em>) – no actual geocoding will be performed (useful to
check the needed quota)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>py:class:<cite>CartoDataFrame
&lt;cartoframes.CartoDataFrame&gt;</cite> and a <code class="docutils literal notranslate"><span class="pre">metadata</span></code> dictionary with global information about
the geocoding process.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">data</span></code> contains a <code class="docutils literal notranslate"><span class="pre">geometry</span></code> column with point locations for the geocoded addresses
and also a <code class="docutils literal notranslate"><span class="pre">carto_geocode_hash</span></code> that, if preserved, can avoid re-geocoding
unchanged data in future calls to geocode.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">metadata</span></code>, as described in <a class="reference external" href="https://carto.com/developers/data-services-api/reference/">https://carto.com/developers/data-services-api/reference/</a>,
contains the following information:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 10%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>precision</p></td>
<td><p>text</p></td>
<td><p>precise or interpolated</p></td>
</tr>
<tr class="row-odd"><td><p>relevance</p></td>
<td><p>number</p></td>
<td><p>0 to 1, higher being more relevant</p></td>
</tr>
<tr class="row-even"><td><p>match_types</p></td>
<td><p>array</p></td>
<td><p>list of match type strings
point_of_interest, country, state, county, locality,
district, street, intersection, street_number, postal_code</p></td>
</tr>
</tbody>
</table>
<p>By default the <code class="docutils literal notranslate"><span class="pre">relevance</span></code> is stored in an output column named <code class="docutils literal notranslate"><span class="pre">gc_status_rel</span></code>. The name of the
column and in general what attributes are added as columns can be configured by using a <code class="docutils literal notranslate"><span class="pre">status</span></code>
dictionary associating column names to status attribute.</p>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>A named-tuple <code class="docutils literal notranslate"><span class="pre">(data,</span> <span class="pre">metadata)</span></code> containing  either a <code class="docutils literal notranslate"><span class="pre">data</span></code></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Geocode a DataFrame:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span>
<span class="kn">from</span> <span class="nn">data.services</span> <span class="kn">import</span> <span class="n">Geocoding</span>
<span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>

<span class="n">set_default_credentials</span><span class="p">(</span><span class="s1">&#39;YOUR_USER_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;YOUR_API_KEY&#39;</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="s1">&#39;Gran Vía 46&#39;</span><span class="p">,</span> <span class="s1">&#39;Madrid&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Ebro 1&#39;</span><span class="p">,</span> <span class="s1">&#39;Sevilla&#39;</span><span class="p">]],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;address&#39;</span><span class="p">,</span><span class="s1">&#39;city&#39;</span><span class="p">])</span>
<span class="n">gc</span> <span class="o">=</span> <span class="n">Geocoding</span><span class="p">()</span>
<span class="n">geocoded_cdf</span><span class="p">,</span> <span class="n">metadata</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">geocode</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">street</span><span class="o">=</span><span class="s1">&#39;address&#39;</span><span class="p">,</span> <span class="n">city</span><span class="o">=</span><span class="s1">&#39;city&#39;</span><span class="p">,</span> <span class="n">country</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;Spain&#39;</span><span class="p">})</span>

<span class="n">geocoded_cdf</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<p>Geocode a table from CARTO:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">data.services</span> <span class="kn">import</span> <span class="n">Geocoding</span>
<span class="kn">from</span> <span class="nn">cartoframes</span> <span class="kn">import</span> <span class="n">CartoDataFrame</span>
<span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>

<span class="n">set_default_credentials</span><span class="p">(</span><span class="s1">&#39;YOUR_USER_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;YOUR_API_KEY&#39;</span><span class="p">)</span>

<span class="n">cdf</span> <span class="o">=</span> <span class="n">CartoDataFrame</span><span class="o">.</span><span class="n">from_carto</span><span class="p">(</span><span class="s1">&#39;table_name&#39;</span><span class="p">)</span>
<span class="n">gc</span> <span class="o">=</span> <span class="n">Geocoding</span><span class="p">()</span>
<span class="n">geocoded_cdf</span><span class="p">,</span> <span class="n">metadata</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">geocode</span><span class="p">(</span><span class="n">cdf</span><span class="p">,</span> <span class="n">street</span><span class="o">=</span><span class="s1">&#39;address&#39;</span><span class="p">)</span>

<span class="n">geocoded_cdf</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<p>Geocode a query against a table from CARTO:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">data.services</span> <span class="kn">import</span> <span class="n">Geocoding</span>
<span class="kn">from</span> <span class="nn">cartoframes</span> <span class="kn">import</span> <span class="n">CartoDataFrame</span>
<span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>

<span class="n">set_default_credentials</span><span class="p">(</span><span class="s1">&#39;YOUR_USER_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;YOUR_API_KEY&#39;</span><span class="p">)</span>

<span class="n">cdf</span> <span class="o">=</span> <span class="n">CartoDataFrame</span><span class="o">.</span><span class="n">from_carto</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM table_name WHERE value &gt; 1000&#39;</span><span class="p">)</span>
<span class="n">gc</span> <span class="o">=</span> <span class="n">Geocoding</span><span class="p">()</span>
<span class="n">geocoded_cdf</span><span class="p">,</span> <span class="n">metadata</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">geocode</span><span class="p">(</span><span class="n">cdf</span><span class="p">,</span> <span class="n">street</span><span class="o">=</span><span class="s1">&#39;address&#39;</span><span class="p">)</span>

<span class="n">geocoded_cdf</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<p>Obtain the number of credits needed to geocode a CARTO table:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">data.services</span> <span class="kn">import</span> <span class="n">Geocoding</span>
<span class="kn">from</span> <span class="nn">cartoframes</span> <span class="kn">import</span> <span class="n">CartoDataFrame</span>
<span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>

<span class="n">set_default_credentials</span><span class="p">(</span><span class="s1">&#39;YOUR_USER_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;YOUR_API_KEY&#39;</span><span class="p">)</span>

<span class="n">cdf</span> <span class="o">=</span> <span class="n">CartoDataFrame</span><span class="o">.</span><span class="n">from_carto</span><span class="p">(</span><span class="s1">&#39;table_name&#39;</span><span class="p">)</span>
<span class="n">gc</span> <span class="o">=</span> <span class="n">Geocoding</span><span class="p">()</span>
<span class="n">geocoded_cdf</span><span class="p">,</span> <span class="n">metadata</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">geocode</span><span class="p">(</span><span class="n">cdf</span><span class="p">,</span> <span class="n">street</span><span class="o">=</span><span class="s1">&#39;address&#39;</span><span class="p">,</span> <span class="n">dry_run</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;required_quota&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Filter results by relevance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span>
<span class="kn">from</span> <span class="nn">data.services</span> <span class="kn">import</span> <span class="n">Geocoding</span>
<span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>

<span class="n">set_default_credentials</span><span class="p">(</span><span class="s1">&#39;YOUR_USER_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;YOUR_API_KEY&#39;</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="s1">&#39;Gran Vía 46&#39;</span><span class="p">,</span> <span class="s1">&#39;Madrid&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Ebro 1&#39;</span><span class="p">,</span> <span class="s1">&#39;Sevilla&#39;</span><span class="p">]],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;address&#39;</span><span class="p">,</span><span class="s1">&#39;city&#39;</span><span class="p">])</span>
<span class="n">gc</span> <span class="o">=</span> <span class="n">Geocoding</span><span class="p">()</span>
<span class="n">geocoded_cdf</span><span class="p">,</span> <span class="n">metadata</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">geocode</span><span class="p">(</span>
    <span class="n">df</span><span class="p">,</span>
    <span class="n">street</span><span class="o">=</span><span class="s1">&#39;address&#39;</span><span class="p">,</span>
    <span class="n">city</span><span class="o">=</span><span class="s1">&#39;city&#39;</span><span class="p">,</span>
    <span class="n">country</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;Spain&#39;</span><span class="p">},</span>
    <span class="n">status</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;relevance&#39;</span><span class="p">]</span>
<span class="p">)</span>

<span class="c1"># show rows with relevance greater than 0.7:</span>
<span class="nb">print</span><span class="p">(</span><span class="n">geocoded_cdf</span><span class="p">[</span><span class="n">geocoded_cdf</span><span class="p">[</span><span class="s1">&#39;carto_geocode_relevance&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.7</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)])</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cartoframes.data.services.Isolines">
<em class="property">class </em><code class="sig-prename descclassname">cartoframes.data.services.</code><code class="sig-name descname">Isolines</code><span class="sig-paren">(</span><em class="sig-param">credentials=None</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cartoframes.data.services.service.Service</span></code></p>
<p>Time and distance Isoline services using CARTO dataservices.</p>
<dl class="method">
<dt id="cartoframes.data.services.Isolines.isochrones">
<code class="sig-name descname">isochrones</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">ranges</em>, <em class="sig-param">**args</em><span class="sig-paren">)</span></dt>
<dd><p>isochrone areas</p>
<p>This method computes areas delimited by isochrone lines (lines of constant travel time) based upon public roads.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (str, DataFrame, GeoDataFrame, <code class="xref py py-class docutils literal notranslate"><span class="pre">CartoDataFrame</span></code>) – table, SQL query or DataFrame containing the source points for the isochrones: travel routes from the
source points are computed to determine areas within specified travel times.</p></li>
<li><p><strong>ranges</strong> (<em>list</em>) – travel time values in seconds; for each range value and source point a result polygon
will be produced enclosing the area within range of the source.</p></li>
<li><p><strong>exclusive</strong> (<em>bool</em><em>, </em><em>optional</em>) – when False, inclusive range areas are generated, each one
containing the areas for smaller time values (so the area is reachable from the source
whithin the given time). When True (the default), areas are exclusive, each one corresponding
time values between the immediately smaller range value (or zero) and the area range value.</p></li>
<li><p><strong>table_name</strong> (<em>str</em><em>, </em><em>optional</em>) – the resulting areas will be saved in a new
CARTO table with this name.</p></li>
<li><p><strong>if_exists</strong> (<em>str</em><em>, </em><em>optional</em>) – Behavior for creating new datasets, only applicable
if table_name isn’t None;
Options are ‘fail’, ‘replace’, or ‘append’. Defaults to ‘fail’.</p></li>
<li><p><strong>dry_run</strong> (<em>bool</em><em>, </em><em>optional</em>) – no actual computattion will be performed,
and metadata will be returned including the required quota.</p></li>
<li><p><strong>mode</strong> (<em>str</em><em>, </em><em>optional</em>) – defines the travel mode: <code class="docutils literal notranslate"><span class="pre">'car'</span></code> (the default) or <code class="docutils literal notranslate"><span class="pre">'walk'</span></code>.</p></li>
<li><p><strong>is_destination</strong> (<em>bool</em><em>, </em><em>optional</em>) – indicates that the source points are to be taken as
destinations for the routes used to compute the area, rather than origins.</p></li>
<li><p><strong>mode_type</strong> (<em>str</em><em>, </em><em>optional</em>) – type of routes computed: <code class="docutils literal notranslate"><span class="pre">'shortest'</span></code> (default) or <code class="docutils literal notranslate"><span class="pre">'fastests'</span></code>.</p></li>
<li><p><strong>mode_traffic</strong> (<em>str</em><em>, </em><em>optional</em>) – use traffic data to compute routes: <code class="docutils literal notranslate"><span class="pre">'disabled'</span></code> (default) or <code class="docutils literal notranslate"><span class="pre">'enabled'</span></code>.</p></li>
<li><p><strong>resolution</strong> (<em>float</em><em>, </em><em>optional</em>) – level of detail of the polygons in meters per pixel.
Higher resolution may increase the response time of the service.</p></li>
<li><p><strong>maxpoints</strong> (<em>int</em><em>, </em><em>optional</em>) – Allows to limit the amount of points in the returned polygons.
Increasing the number of maxpoints may increase the response time of the service.</p></li>
<li><p><strong>quality</strong> – (int, optional): Allows you to reduce the quality of the polygons in favor of the response time.
Admitted values: 1/2/3.</p></li>
<li><p><strong>geom_col</strong> (<em>str</em><em>, </em><em>optional</em>) – string indicating the geometry column name in the source <cite>DataFrame</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>py:class:<cite>CartoDataFrame
&lt;cartoframes.CartoDataFrame&gt;</cite> and a <code class="docutils literal notranslate"><span class="pre">metadata</span></code> dictionary. For dry runs the data will be <code class="docutils literal notranslate"><span class="pre">None</span></code>.
The data contains a <code class="docutils literal notranslate"><span class="pre">range_data</span></code> column with a numeric value and a <code class="docutils literal notranslate"><span class="pre">the_geom</span></code>
geometry with the corresponding area. It will also contain a <code class="docutils literal notranslate"><span class="pre">source_id</span></code> column
that identifies the source point corresponding to each area if the source has a
<code class="docutils literal notranslate"><span class="pre">cartodb_id</span></code> column.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>A named-tuple <code class="docutils literal notranslate"><span class="pre">(data,</span> <span class="pre">metadata)</span></code> containing a <code class="docutils literal notranslate"><span class="pre">data</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.data.services.Isolines.isodistances">
<code class="sig-name descname">isodistances</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">ranges</em>, <em class="sig-param">**args</em><span class="sig-paren">)</span></dt>
<dd><p>isodistance areas</p>
<p>This method computes areas delimited by isodistance lines (lines of constant travel distance) based upon public
roads.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (str, DataFrame, GeoDataFrame, <code class="xref py py-class docutils literal notranslate"><span class="pre">CartoDataFrame</span></code>) – table, SQL query or DataFrame containing the source points for the isodistances: travel routes from the
source points are computed to determine areas within specified travel distances.</p></li>
<li><p><strong>ranges</strong> (<em>list</em>) – travel distance values in meters; for each range value and source point a result polygon
will be produced enclosing the area within range of the source.</p></li>
<li><p><strong>exclusive</strong> (<em>bool</em><em>, </em><em>optional</em>) – when False, inclusive range areas are generated, each one
containing the areas for smaller distance values (so the area is reachable from the source
whithin the given distance). When True, areas are exclusive (the default), each one corresponding
distance values between the immediately smaller range value (or zero) and the area range value.</p></li>
<li><p><strong>table_name</strong> (<em>str</em><em>, </em><em>optional</em>) – the resulting areas will be saved in a new
CARTO table with this name.</p></li>
<li><p><strong>if_exists</strong> (<em>str</em><em>, </em><em>optional</em>) – Behavior for creating new datasets, only applicable
if table_name isn’t None;
Options are ‘fail’, ‘replace’, or ‘append’. Defaults to ‘fail’.</p></li>
<li><p><strong>dry_run</strong> (<em>bool</em><em>, </em><em>optional</em>) – no actual computattion will be performed,
and metadata will be returned including the required quota.</p></li>
<li><p><strong>mode</strong> (<em>str</em><em>, </em><em>optional</em>) – defines the travel mode: <code class="docutils literal notranslate"><span class="pre">'car'</span></code> (the default) or <code class="docutils literal notranslate"><span class="pre">'walk'</span></code>.</p></li>
<li><p><strong>is_destination</strong> (<em>bool</em><em>, </em><em>optional</em>) – indicates that the source points are to be taken as
destinations for the routes used to compute the area, rather than origins.</p></li>
<li><p><strong>mode_type</strong> (<em>str</em><em>, </em><em>optional</em>) – type of routes computed: <code class="docutils literal notranslate"><span class="pre">'shortest'</span></code> (default) or <code class="docutils literal notranslate"><span class="pre">'fastests'</span></code>.</p></li>
<li><p><strong>mode_traffic</strong> (<em>str</em><em>, </em><em>optional</em>) – use traffic data to compute routes: <code class="docutils literal notranslate"><span class="pre">'disabled'</span></code> (default) or <code class="docutils literal notranslate"><span class="pre">'enabled'</span></code>.</p></li>
<li><p><strong>resolution</strong> (<em>float</em><em>, </em><em>optional</em>) – level of detail of the polygons in meters per pixel.
Higher resolution may increase the response time of the service.</p></li>
<li><p><strong>maxpoints</strong> (<em>int</em><em>, </em><em>optional</em>) – Allows to limit the amount of points in the returned polygons.
Increasing the number of maxpoints may increase the response time of the service.</p></li>
<li><p><strong>quality</strong> – (int, optional): Allows you to reduce the quality of the polygons in favor of the response time.
Admitted values: 1/2/3.</p></li>
<li><p><strong>geom_col</strong> (<em>str</em><em>, </em><em>optional</em>) – string indicating the geometry column name in the source <cite>DataFrame</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>py:class:<cite>CartoDataFrame
&lt;cartoframes.CartoDataFrame&gt;</cite> and a <code class="docutils literal notranslate"><span class="pre">metadata</span></code> dictionary. For dry runs the data will be <code class="docutils literal notranslate"><span class="pre">None</span></code>.
The data contains a <code class="docutils literal notranslate"><span class="pre">range_data</span></code> column with a numeric value and a <code class="docutils literal notranslate"><span class="pre">the_geom</span></code>
geometry with the corresponding area. It will also contain a <code class="docutils literal notranslate"><span class="pre">source_id</span></code> column
that identifies the source point corresponding to each area if the source has a
<code class="docutils literal notranslate"><span class="pre">cartodb_id</span></code> column.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>A named-tuple <code class="docutils literal notranslate"><span class="pre">(data,</span> <span class="pre">metadata)</span></code> containing a <code class="docutils literal notranslate"><span class="pre">data</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-cartoframes.viz">
<span id="viz"></span><h2>Viz</h2>
<p>Viz namespace contains all the classes to create a visualization, mainly
Map and Layer. It also includes our basemaps and the helper methods.</p>
<dl class="attribute">
<dt id="cartoframes.viz.basemaps">
<code class="sig-prename descclassname">cartoframes.viz.</code><code class="sig-name descname">basemaps</code></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">cartoframes.viz.basemaps.Basemaps</span></code></p>
</dd></dl>

<dl class="class">
<dt id="cartoframes.viz.Layer">
<em class="property">class </em><code class="sig-prename descclassname">cartoframes.viz.</code><code class="sig-name descname">Layer</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">style=None</em>, <em class="sig-param">popup=None</em>, <em class="sig-param">legend=None</em>, <em class="sig-param">widgets=None</em>, <em class="sig-param">credentials=None</em>, <em class="sig-param">bounds=None</em>, <em class="sig-param">geom_col=None</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Layer to display data on a map. This class can be used as one or more
layers in <a class="reference internal" href="#cartoframes.viz.Map" title="cartoframes.viz.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a> or on its own in a Jupyter
notebook to get a preview of a Layer.</p>
<p>:param source (str, <code class="xref py py-class docutils literal notranslate"><span class="pre">CartoDataFrame</span></code>,: pandas.DataFrame, geopandas.GeoDataFrame): The source data.
:param style: The style of the visualization.
:type style: str, dict, or <a class="reference internal" href="#cartoframes.viz.Style" title="cartoframes.viz.Style"><code class="xref py py-class docutils literal notranslate"><span class="pre">Style</span></code></a>, optional
:param popup: This option adds interactivity (click and hover) to a layer to show popups.</p>
<blockquote>
<div><p>The columns to be shown must be added in a list format for each event.
See <a class="reference internal" href="#cartoframes.viz.Popup" title="cartoframes.viz.Popup"><code class="xref py py-class docutils literal notranslate"><span class="pre">Popup</span></code></a> for more information.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>legend</strong> (dict or <a class="reference internal" href="#cartoframes.viz.Legend" title="cartoframes.viz.Legend"><code class="xref py py-class docutils literal notranslate"><span class="pre">Legend</span></code></a>, optional) – The legend definition for a layer. It contains the information
to show a legend “type” (<code class="docutils literal notranslate"><span class="pre">color-category</span></code>, <code class="docutils literal notranslate"><span class="pre">color-bins</span></code>,
<code class="docutils literal notranslate"><span class="pre">color-continuous</span></code>), “prop” (color) and also text information:
“title”, “description” and “footer”. See <a class="reference internal" href="#cartoframes.viz.Legend" title="cartoframes.viz.Legend"><code class="xref py py-class docutils literal notranslate"><span class="pre">Legend</span></code></a> for more information.</p></li>
<li><p><strong>widgets</strong> (dict, list, or <a class="reference internal" href="#cartoframes.viz.WidgetList" title="cartoframes.viz.WidgetList"><code class="xref py py-class docutils literal notranslate"><span class="pre">WidgetList</span></code></a>, optional) – Widget or list of widgets for a layer. It contains the information to display
different widget types on the top right of the map. See
<a class="reference internal" href="#cartoframes.viz.WidgetList" title="cartoframes.viz.WidgetList"><code class="xref py py-class docutils literal notranslate"><span class="pre">WidgetList</span></code></a> for more information.</p></li>
<li><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – A Credentials instance. This is only used for the simplified Source API.
When a <a class="reference internal" href="#cartoframes.viz.Source" title="cartoframes.viz.Source"><code class="xref py py-class docutils literal notranslate"><span class="pre">Source</span></code></a> is pased as source,
these credentials is simply ignored. If not provided the credentials will be
automatically obtained from the default credentials.</p></li>
<li><p><strong>bounds</strong> (<em>dict</em><em> or </em><em>list</em><em>, </em><em>optional</em>) – a dict with <cite>west</cite>, <cite>south</cite>, <cite>east</cite>, <cite>north</cite>
keys, or an array of floats in the following structure: [[west,
south], [east, north]]. If not provided the bounds will be automatically
calculated to fit all features.</p></li>
<li><p><strong>geom_col</strong> (<em>str</em><em>, </em><em>optional</em>) – string indicating the geometry column name in the source <cite>DataFrame</cite>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<p>Create a layer with a custom popup, legend, and widget.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>
<span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Layer</span>

<span class="n">set_default_credentials</span><span class="p">(</span>
    <span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;https://cartovl.carto.com&#39;</span><span class="p">,</span>
    <span class="n">api_key</span><span class="o">=</span><span class="s1">&#39;default_public&#39;</span>
<span class="p">)</span>

<span class="n">Layer</span><span class="p">(</span>
    <span class="s2">&quot;SELECT * FROM populated_places WHERE adm0name = &#39;Spain&#39;&quot;</span><span class="p">,</span>
    <span class="s1">&#39;color: ramp(globalQuantiles($pop_max, 5), reverse(purpor))&#39;</span><span class="p">,</span>
    <span class="n">popup</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;hover&#39;</span><span class="p">:</span> <span class="s1">&#39;$name&#39;</span><span class="p">,</span>
        <span class="s1">&#39;click&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;$name&#39;</span><span class="p">,</span> <span class="s1">&#39;$pop_max&#39;</span><span class="p">,</span> <span class="s1">&#39;$pop_min&#39;</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="n">legend</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;color-category&#39;</span><span class="p">,</span>
        <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;Population&#39;</span>
    <span class="p">},</span>
    <span class="n">widgets</span><span class="o">=</span><span class="p">[{</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;formula&#39;</span><span class="p">,</span>
        <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;Avg $pop_max&#39;</span><span class="p">,</span>
        <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;viewportAvg($pop_max)&#39;</span>
    <span class="p">}]</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Create a layer specifically tied to a <a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a> and display it on a map.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">Credentials</span>
<span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Layer</span><span class="p">,</span> <span class="n">Map</span>

<span class="n">credentials</span> <span class="o">=</span> <span class="n">Credentials</span><span class="p">(</span>
    <span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;https://cartovl.carto.com&#39;</span><span class="p">,</span>
    <span class="n">api_key</span><span class="o">=</span><span class="s1">&#39;default_public&#39;</span>
<span class="p">)</span>

<span class="n">pop_layer</span> <span class="o">=</span> <span class="n">Layer</span><span class="p">(</span>
    <span class="s1">&#39;populated_places&#39;</span><span class="p">,</span>
    <span class="s1">&#39;color: red&#39;</span><span class="p">,</span>
    <span class="n">credentials</span><span class="o">=</span><span class="n">credentials</span>
<span class="p">)</span>
<span class="n">Map</span><span class="p">(</span><span class="n">pop_layer</span><span class="p">)</span>
</pre></div>
</div>
<p>Preview a layer in a Jupyter notebook. Note: if in a Jupyter notebook,
it is not required to explicitly add a Layer to a <a class="reference internal" href="#cartoframes.viz.Map" title="cartoframes.viz.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a> if only visualizing data as a single layer.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>
<span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Layer</span><span class="p">,</span> <span class="n">Map</span>

<span class="n">set_default_credentials</span><span class="p">(</span><span class="s1">&#39;https://cartoframes.carto.com&#39;</span><span class="p">)</span>

<span class="n">pop_layer</span> <span class="o">=</span> <span class="n">Layer</span><span class="p">(</span>
    <span class="s1">&#39;brooklyn_poverty&#39;</span><span class="p">,</span>
    <span class="s1">&#39;color: ramp($poverty_per_pop, sunset)&#39;</span><span class="p">,</span>
    <span class="n">legend</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;color-continuous&#39;</span><span class="p">,</span>
        <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;Poverty per pop&#39;</span>
    <span class="p">}</span>
<span class="p">)</span>
<span class="n">pop_layer</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="cartoframes.viz.Layout">
<em class="property">class </em><code class="sig-prename descclassname">cartoframes.viz.</code><code class="sig-name descname">Layout</code><span class="sig-paren">(</span><em class="sig-param">maps</em>, <em class="sig-param">n_size=None</em>, <em class="sig-param">m_size=None</em>, <em class="sig-param">viewport=None</em>, <em class="sig-param">map_height=250</em>, <em class="sig-param">is_static=True</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Create a layout of visualizations in order to compare them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>maps</strong> (list of <a class="reference internal" href="#cartoframes.viz.Map" title="cartoframes.viz.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a>) – List of
maps. Zero or more of <a class="reference internal" href="#cartoframes.viz.Map" title="cartoframes.viz.Map"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></a>.</p></li>
<li><p><strong>N_SIZE</strong> (<em>number</em><em>, </em><em>optional</em>) – Number of columns of the layout</p></li>
<li><p><strong>M_SIZE</strong> (<em>number</em><em>, </em><em>optional</em>) – Number of rows of the layout</p></li>
<li><p><strong>viewport</strong> (<em>dict</em><em>, </em><em>optional</em>) – Properties for display of the maps viewport.
Keys can be <cite>bearing</cite> or <cite>pitch</cite>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Basic usage.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>
<span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Map</span><span class="p">,</span> <span class="n">Layer</span><span class="p">,</span> <span class="n">Layout</span>

<span class="n">set_default_credentials</span><span class="p">(</span><span class="s1">&#39;your_account&#39;</span><span class="p">)</span>

<span class="n">Layout</span><span class="p">([</span>
    <span class="n">Map</span><span class="p">(</span><span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;table_in_your_account&#39;</span><span class="p">)),</span> <span class="n">Map</span><span class="p">(</span><span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;table_in_your_account&#39;</span><span class="p">)),</span>
    <span class="n">Map</span><span class="p">(</span><span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;table_in_your_account&#39;</span><span class="p">)),</span> <span class="n">Map</span><span class="p">(</span><span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;table_in_your_account&#39;</span><span class="p">))</span>
<span class="p">])</span>
</pre></div>
</div>
<p>Display a 2x2 layout.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>
<span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Map</span><span class="p">,</span> <span class="n">Layer</span><span class="p">,</span> <span class="n">Layout</span>

<span class="n">set_default_credentials</span><span class="p">(</span><span class="s1">&#39;your_account&#39;</span><span class="p">)</span>

<span class="n">Layout</span><span class="p">([</span>
    <span class="n">Map</span><span class="p">(</span><span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;table_in_your_account&#39;</span><span class="p">)),</span> <span class="n">Map</span><span class="p">(</span><span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;table_in_your_account&#39;</span><span class="p">)),</span>
    <span class="n">Map</span><span class="p">(</span><span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;table_in_your_account&#39;</span><span class="p">)),</span> <span class="n">Map</span><span class="p">(</span><span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;table_in_your_account&#39;</span><span class="p">))</span>
<span class="p">],</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Custom Titles.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>
<span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Map</span><span class="p">,</span> <span class="n">Layer</span><span class="p">,</span> <span class="n">Layout</span>

<span class="n">set_default_credentials</span><span class="p">(</span><span class="s1">&#39;your_account&#39;</span><span class="p">)</span>

<span class="n">Layout</span><span class="p">([</span>
    <span class="n">Map</span><span class="p">(</span><span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;table_in_your_account&#39;</span><span class="p">),</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Visualization 1 custom title&quot;</span><span class="p">),</span>
    <span class="n">Map</span><span class="p">(</span><span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;table_in_your_account&#39;</span><span class="p">),</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Visualization 2 custom title&quot;</span><span class="p">)),</span>
<span class="p">])</span>
</pre></div>
</div>
<p>Viewport.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>
<span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Map</span><span class="p">,</span> <span class="n">Layer</span><span class="p">,</span> <span class="n">Layout</span>

<span class="n">set_default_credentials</span><span class="p">(</span><span class="s1">&#39;your_account&#39;</span><span class="p">)</span>

<span class="n">Layout</span><span class="p">([</span>
    <span class="n">Map</span><span class="p">(</span><span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;table_in_your_account&#39;</span><span class="p">)),</span>
    <span class="n">Map</span><span class="p">(</span><span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;table_in_your_account&#39;</span><span class="p">)),</span>
    <span class="n">Map</span><span class="p">(</span><span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;table_in_your_account&#39;</span><span class="p">)),</span>
    <span class="n">Map</span><span class="p">(</span><span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;table_in_your_account&#39;</span><span class="p">))</span>
<span class="p">],</span> <span class="n">viewport</span><span class="o">=</span><span class="p">{</span> <span class="s1">&#39;zoom&#39;</span><span class="p">:</span> <span class="mi">2</span> <span class="p">})</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>
<span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Map</span><span class="p">,</span> <span class="n">Layer</span><span class="p">,</span> <span class="n">Layout</span>

<span class="n">set_default_credentials</span><span class="p">(</span><span class="s1">&#39;your_account&#39;</span><span class="p">)</span>

<span class="n">Layout</span><span class="p">([</span>
    <span class="n">Map</span><span class="p">(</span><span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;table_in_your_account&#39;</span><span class="p">),</span> <span class="n">viewport</span><span class="o">=</span><span class="p">{</span> <span class="s1">&#39;zoom&#39;</span><span class="p">:</span> <span class="mf">0.5</span> <span class="p">}),</span>
    <span class="n">Map</span><span class="p">(</span><span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;table_in_your_account&#39;</span><span class="p">)),</span>
    <span class="n">Map</span><span class="p">(</span><span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;table_in_your_account&#39;</span><span class="p">)),</span>
    <span class="n">Map</span><span class="p">(</span><span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;table_in_your_account&#39;</span><span class="p">))</span>
<span class="p">],</span> <span class="n">viewport</span><span class="o">=</span><span class="p">{</span> <span class="s1">&#39;zoom&#39;</span><span class="p">:</span> <span class="mi">2</span> <span class="p">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="cartoframes.viz.Legend">
<em class="property">class </em><code class="sig-prename descclassname">cartoframes.viz.</code><code class="sig-name descname">Legend</code><span class="sig-paren">(</span><em class="sig-param">f_arg</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>type</strong> (<em>str</em>) – ‘color-category’, ‘color-bins’, ‘color-continuous’, ‘size-bins’,
or ‘size-continuous’.</p></li>
<li><p><strong>prop</strong> (<em>str</em><em>, </em><em>optional</em>) – ‘color’, ‘width’, ‘strokeColor’, or ‘strokeWidth’.</p></li>
<li><p><strong>dynamic</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Update an render the legend depending on viewport changes.
Defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title of legend.</p></li>
<li><p><strong>description</strong> (<em>str</em><em>, </em><em>optional</em>) – Description in legend.</p></li>
<li><p><strong>footer</strong> (<em>str</em><em>, </em><em>optional</em>) – Footer of legend. This is often used to attribute data sources.</p></li>
<li><p><strong>variable</strong> (<em>str</em><em>, </em><em>optional</em>) – If the information in the legend depends on a different value than the
information set to the style property, it is possible to set an independent
variable.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Legend</span>

<span class="n">Legend</span><span class="p">(</span><span class="s1">&#39;color-category&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Legend Title&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;[description]&#39;</span><span class="p">,</span> <span class="s1">&#39;footer&#39;</span><span class="p">:</span> <span class="s1">&#39;[footer]&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Layer</span><span class="p">,</span> <span class="n">Legend</span><span class="p">,</span> <span class="n">Style</span>

<span class="n">Layer</span><span class="p">(</span>
    <span class="s2">&quot;SELECT * FROM populated_places WHERE adm0name = &#39;Spain&#39;&quot;</span><span class="p">,</span>
    <span class="n">Style</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">        color: ramp(globalQuantiles($pop_max, 5), reverse(purpor))</span>
<span class="s1">        @custom_legend: ramp($pop_max, reverse(purpor))</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">),</span>
    <span class="n">legend</span><span class="o">=</span><span class="n">Legend</span><span class="p">(</span><span class="s1">&#39;color-category&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Population&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="o">=</span><span class="s1">&#39;custom_legend&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="cartoframes.viz.Legend.get_info">
<code class="sig-name descname">get_info</code><span class="sig-paren">(</span><em class="sig-param">geom_type=None</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cartoframes.viz.LegendList">
<em class="property">class </em><code class="sig-prename descclassname">cartoframes.viz.</code><code class="sig-name descname">LegendList</code><span class="sig-paren">(</span><em class="sig-param">legends=None</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>legends</strong> (<em>dict</em><em>, </em><em>list</em><em>, </em><a class="reference internal" href="#cartoframes.viz.Legend" title="cartoframes.viz.Legend"><em>Legend</em></a>) – List of legends for a layer.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<dl class="method">
<dt id="cartoframes.viz.LegendList.get_info">
<code class="sig-name descname">get_info</code><span class="sig-paren">(</span><em class="sig-param">geom_type=None</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cartoframes.viz.Map">
<em class="property">class </em><code class="sig-prename descclassname">cartoframes.viz.</code><code class="sig-name descname">Map</code><span class="sig-paren">(</span><em class="sig-param">layers=None</em>, <em class="sig-param">basemap='Positron'</em>, <em class="sig-param">bounds=None</em>, <em class="sig-param">size=None</em>, <em class="sig-param">viewport=None</em>, <em class="sig-param">default_legend=False</em>, <em class="sig-param">show_info=None</em>, <em class="sig-param">theme=None</em>, <em class="sig-param">title=None</em>, <em class="sig-param">description=None</em>, <em class="sig-param">is_static=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>layers</strong> (list of <a class="reference internal" href="#cartoframes.viz.Layer" title="cartoframes.viz.Layer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Layer</span></code></a>) – List of
layers. Zero or more of <a class="reference internal" href="#cartoframes.viz.Layer" title="cartoframes.viz.Layer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Layer</span></code></a>.</p></li>
<li><p><strong>basemap</strong> (<em>str</em><em>, </em><em>optional</em>) – <ul>
<li><p>if a <cite>str</cite>, name of a CARTO vector basemap. One of <cite>positron</cite>,
<cite>voyager</cite>, or <cite>darkmatter</cite> from the <code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseMaps</span></code> class, or a
hex value, rgb string, or other color expression from CARTO VL.</p></li>
<li><p>if a <cite>dict</cite>, Mapbox or other style as the value of the <cite>style</cite> key.
If a Mapbox style, the access token is the value of the <cite>token</cite>
key.</p></li>
</ul>
</p></li>
<li><p><strong>bounds</strong> (<em>dict</em><em> or </em><em>list</em><em>, </em><em>optional</em>) – a dict with <cite>west</cite>, <cite>south</cite>, <cite>east</cite>, <cite>north</cite>
keys, or an array of floats in the following structure: [[west,
south], [east, north]]. If not provided the bounds will be automatically
calculated to fit all features.</p></li>
<li><p><strong>size</strong> (<em>tuple</em><em>, </em><em>optional</em>) – a (width, height) pair for the size of the map.
Default is (1024, 632).</p></li>
<li><p><strong>viewport</strong> (<em>dict</em><em>, </em><em>optional</em>) – Properties for display of the map viewport.
Keys can be <cite>bearing</cite> or <cite>pitch</cite>.</p></li>
<li><p><strong>default_legend</strong> (<em>bool</em><em>, </em><em>optional</em>) – Default False. If True, it displays the map title.
Therefore, it needs the <cite>title</cite> value to be defined.</p></li>
<li><p><strong>show_info</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to display center and zoom information in the
map or not. It is False by default.</p></li>
<li><p><strong>is_static</strong> (<em>bool</em><em>, </em><em>optional</em>) – Default False. If True, instead of showing and interactive
map, a png image will be displayed.</p></li>
<li><p><strong>theme</strong> (<em>string</em><em>, </em><em>optional</em>) – Use a different UI theme</p></li>
<li><p><strong>title</strong> (<em>string</em><em>, </em><em>optional</em>) – Title to label the map</p></li>
<li><p><strong>description</strong> (<em>string</em><em>, </em><em>optional</em>) – Text that describes the map and will be displayed in the
default legend after the title.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Basic usage.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>
<span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Map</span><span class="p">,</span> <span class="n">Layer</span>

<span class="n">set_default_credentials</span><span class="p">(</span>
    <span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;https://your_user_name.carto.com&#39;</span><span class="p">,</span>
    <span class="n">api_key</span><span class="o">=</span><span class="s1">&#39;your api key&#39;</span>
<span class="p">)</span>

<span class="n">Map</span><span class="p">(</span><span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;table in your account&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>Display more than one layer on a map.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>
<span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Map</span><span class="p">,</span> <span class="n">Layer</span>

<span class="n">set_default_credentials</span><span class="p">(</span>
    <span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;https://your_user_name.carto.com&#39;</span><span class="p">,</span>
    <span class="n">api_key</span><span class="o">=</span><span class="s1">&#39;your api key&#39;</span>
<span class="p">)</span>

<span class="n">Map</span><span class="p">(</span><span class="n">layers</span><span class="o">=</span><span class="p">[</span>
    <span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;table1&#39;</span><span class="p">),</span>
    <span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;table2&#39;</span><span class="p">)</span>
<span class="p">])</span>
</pre></div>
</div>
<p>Change the CARTO basemap style.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>
<span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Map</span><span class="p">,</span> <span class="n">Layer</span><span class="p">,</span> <span class="n">basemaps</span>

<span class="n">set_default_credentials</span><span class="p">(</span>
    <span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;https://your_user_name.carto.com&#39;</span><span class="p">,</span>
    <span class="n">api_key</span><span class="o">=</span><span class="s1">&#39;your api key&#39;</span>
<span class="p">)</span>

<span class="n">Map</span><span class="p">(</span>
    <span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;table in your account&#39;</span><span class="p">),</span>
    <span class="n">basemaps</span><span class="o">.</span><span class="n">darkmatter</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Choose a custom basemap style. Here we use the Mapbox streets style,
which requires an access token.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>
<span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Map</span><span class="p">,</span> <span class="n">Layer</span>

<span class="n">set_default_credentials</span><span class="p">(</span>
    <span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;https://your_user_name.carto.com&#39;</span><span class="p">,</span>
    <span class="n">api_key</span><span class="o">=</span><span class="s1">&#39;your CARTO API key&#39;</span>
<span class="p">)</span>

<span class="n">basemap</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;style&#39;</span><span class="p">:</span> <span class="s1">&#39;mapbox://styles/mapbox/streets-v9&#39;</span><span class="p">,</span>
    <span class="s1">&#39;token&#39;</span><span class="p">:</span> <span class="s1">&#39;your Mapbox token&#39;</span>
<span class="p">}</span>

<span class="n">Map</span><span class="p">(</span>
    <span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;table in your account&#39;</span><span class="p">),</span>
    <span class="n">basemap</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Remove basemap and show a custom color.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>
<span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Map</span><span class="p">,</span> <span class="n">Layer</span>

<span class="n">set_default_credentials</span><span class="p">(</span>
    <span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;https://your_user_name.carto.com&#39;</span><span class="p">,</span>
    <span class="n">api_key</span><span class="o">=</span><span class="s1">&#39;your api key&#39;</span>
<span class="p">)</span>

<span class="n">Map</span><span class="p">(</span>
    <span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;table in your account&#39;</span><span class="p">),</span>
    <span class="n">basemap</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span>  <span class="c1"># None, False, &#39;white&#39;, &#39;rgb(255, 255, 0)&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Set custom bounds.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>
<span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Map</span><span class="p">,</span> <span class="n">Layer</span>

<span class="n">set_default_credentials</span><span class="p">(</span>
    <span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;https://your_user_name.carto.com&#39;</span><span class="p">,</span>
    <span class="n">api_key</span><span class="o">=</span><span class="s1">&#39;your api key&#39;</span>
<span class="p">)</span>

<span class="n">bounds</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;west&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span>
    <span class="s1">&#39;east&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s1">&#39;north&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span>
    <span class="s1">&#39;south&#39;</span><span class="p">:</span> <span class="mi">10</span>
<span class="p">}</span>

<span class="c1"># or bounds = [[-10, 10], [10, -10]]</span>

<span class="n">Map</span><span class="p">(</span>
    <span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;table in your account&#39;</span><span class="p">),</span>
    <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Show the map center and zoom value on the map (lower left-hand corner).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">Credentials</span><span class="p">,</span> <span class="n">set_default_credentials</span>
<span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Map</span><span class="p">,</span> <span class="n">Layer</span>

<span class="n">credentials</span> <span class="o">=</span> <span class="n">Credentials</span><span class="p">(</span>
    <span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;https://your_user_name.carto.com&#39;</span><span class="p">,</span>
    <span class="n">api_key</span><span class="o">=</span><span class="s1">&#39;your api key&#39;</span>
<span class="p">)</span>
<span class="n">set_default_credentials</span><span class="p">(</span><span class="n">credentials</span><span class="p">)</span>

<span class="n">Map</span><span class="p">(</span><span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;table in your account&#39;</span><span class="p">),</span> <span class="n">show_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="cartoframes.viz.Map.get_content">
<code class="sig-name descname">get_content</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cartoframes.viz.Map.publish">
<code class="sig-name descname">publish</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">table_name=None</em>, <em class="sig-param">credentials=None</em>, <em class="sig-param">password=None</em><span class="sig-paren">)</span></dt>
<dd><p>Publish the map visualization as a CARTO custom visualization (aka Kuviz).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – The Kuviz name on CARTO</p></li>
<li><p><strong>table_name</strong> (<em>str</em><em>, </em><em>optional</em>) – Desired table name for the dataset on CARTO.
It is required working with local data (we need to upload it to CARTO)
If name does not conform to SQL naming conventions, it will be
‘normalized’ (e.g., all lower case, adding <cite>_</cite> in place of spaces
and other special characters.</p></li>
<li><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – A Credentials instance. If not provided, the credentials will be automatically
obtained from the default credentials if available. It is used to create the
publication and also to save local data (if exists) into your CARTO account</p></li>
<li><p><strong>password</strong> (<em>str</em><em>, </em><em>optional</em>) – setting it your Kuviz will be protected by
password. When someone will try to show the Kuviz, the password
will be requested</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<p>Publishing the map visualization</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Map</span><span class="p">,</span> <span class="n">Layer</span>

<span class="n">tmap</span> <span class="o">=</span> <span class="n">Map</span><span class="p">(</span><span class="n">Layer</span><span class="p">(</span><span class="s1">&#39;tablename&#39;</span><span class="p">))</span>
<span class="n">tmap</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="s1">&#39;Custom Map Title&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cartoframes.viz.Map.delete_publication">
<code class="sig-name descname">delete_publication</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Delete the published map Kuviz.</p>
</dd></dl>

<dl class="method">
<dt id="cartoframes.viz.Map.update_publication">
<code class="sig-name descname">update_publication</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">password</em><span class="sig-paren">)</span></dt>
<dd><p>Update the published map Kuviz.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – The Kuviz name on CARTO</p></li>
<li><p><strong>password</strong> (<em>str</em>) – setting it your Kuviz will be protected by
password and using <cite>None</cite> the Kuviz will be public</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cartoframes.viz.Map.all_publications">
<em class="property">static </em><code class="sig-name descname">all_publications</code><span class="sig-paren">(</span><em class="sig-param">credentials=None</em><span class="sig-paren">)</span></dt>
<dd><p>Get all map Kuviz published by the current user.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – A Credentials instance. If not provided, the credentials will be automatically
obtained from the default credentials if available.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cartoframes.viz.Popup">
<em class="property">class </em><code class="sig-prename descclassname">cartoframes.viz.</code><code class="sig-name descname">Popup</code><span class="sig-paren">(</span><em class="sig-param">data=None</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>dict</em>) – The popup definition for a layer. It contains the information
to show a popup on ‘click’ and ‘hover’ events with the attributes provided
in the definition using the <cite>CARTO VL expressions syntax
&lt;https://carto.com/developers/carto-vl/reference/#cartoexpressions&gt;</cite>.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>Show columns.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Popup</span>

<span class="n">Popup</span><span class="p">({</span>
    <span class="s1">&#39;hover&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;$name&#39;</span><span class="p">],</span>
    <span class="s1">&#39;click&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;$name&#39;</span><span class="p">,</span> <span class="s1">&#39;$pop_max&#39;</span><span class="p">]</span>
<span class="p">})</span>
</pre></div>
</div>
<p>Show expressions.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Popup</span>

<span class="n">Popup</span><span class="p">({</span>
    <span class="s1">&#39;click&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;$pop_min % 100&#39;</span><span class="p">,</span> <span class="s1">&#39;sqrt($pop_max)&#39;</span><span class="p">]</span>
<span class="p">})</span>
</pre></div>
</div>
<p>Show titles.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Popup</span>

<span class="n">Popup</span><span class="p">({</span>
    <span class="s1">&#39;hover&#39;</span><span class="p">:</span> <span class="p">[{</span>
        <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;Name&#39;</span><span class="p">,</span>
        <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;$name&#39;</span>
    <span class="p">}],</span>
    <span class="s1">&#39;click&#39;</span><span class="p">:</span> <span class="p">[{</span>
        <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;Name&#39;</span><span class="p">,</span>
        <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;$name&#39;</span>
    <span class="p">},</span> <span class="p">{</span>
        <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;Pop max&#39;</span><span class="p">,</span>
        <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;$pop_max&#39;</span>
    <span class="p">}]</span>
<span class="p">})</span>
</pre></div>
</div>
<dl class="method">
<dt id="cartoframes.viz.Popup.get_interactivity">
<code class="sig-name descname">get_interactivity</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cartoframes.viz.Popup.get_variables">
<code class="sig-name descname">get_variables</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cartoframes.viz.Source">
<em class="property">class </em><code class="sig-prename descclassname">cartoframes.viz.</code><code class="sig-name descname">Source</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">credentials=None</em>, <em class="sig-param">geom_col=None</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>(</strong><strong>str</strong><strong>, </strong><strong>pandas.DataFrame</strong><strong>, </strong><strong>geopandas.GeoDataFrame</strong><strong>,</strong> (<em>data</em>) – <code class="xref py py-class docutils literal notranslate"><span class="pre">CartoDataFrame</span></code> ): a table name,
SQL query, DataFrame, GeoDataFrame or CartoDataFrame instance.</p></li>
<li><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – A Credentials instance. If not provided, the credentials will be automatically
obtained from the default credentials if available.</p></li>
<li><p><strong>bounds</strong> (<em>dict</em><em> or </em><em>list</em><em>, </em><em>optional</em>) – a dict with <cite>west</cite>, <cite>south</cite>, <cite>east</cite>, <cite>north</cite>
keys, or an array of floats in the following structure: [[west,
south], [east, north]]. If not provided the bounds will be automatically
calculated to fit all features.</p></li>
<li><p><strong>geom_col</strong> (<em>str</em><em>, </em><em>optional</em>) – string indicating the geometry column name in the source <cite>DataFrame</cite>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<p>Table name.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>
<span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Source</span>

<span class="n">set_default_credentials</span><span class="p">(</span><span class="s1">&#39;your_user_name&#39;</span><span class="p">,</span> <span class="s1">&#39;your api key&#39;</span><span class="p">)</span>

<span class="n">Source</span><span class="p">(</span><span class="s1">&#39;table_name&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>SQL query.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">set_default_credentials</span>
<span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Source</span>

<span class="n">set_default_credentials</span><span class="p">(</span><span class="s1">&#39;your_user_name&#39;</span><span class="p">,</span> <span class="s1">&#39;your api key&#39;</span><span class="p">)</span>

<span class="n">Source</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM table_name&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>CartoDataFrame object.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Source</span>
<span class="kn">from</span> <span class="nn">cartoframes</span> <span class="kn">import</span> <span class="n">CartoDataFrame</span>

<span class="n">set_default_credentials</span><span class="p">(</span><span class="s1">&#39;your_user_name&#39;</span><span class="p">,</span> <span class="s1">&#39;your api key&#39;</span><span class="p">)</span>

<span class="n">cdf</span> <span class="o">=</span> <span class="n">CartoDataFrame</span><span class="o">.</span><span class="n">from_carto</span><span class="p">(</span><span class="s1">&#39;table_name&#39;</span><span class="p">)</span>

<span class="n">Source</span><span class="p">(</span><span class="n">cdf</span><span class="p">)</span>
</pre></div>
</div>
<p>Setting the credentials.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.auth</span> <span class="kn">import</span> <span class="n">Credentials</span>
<span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Source</span>

<span class="n">credentials</span> <span class="o">=</span> <span class="n">Credentials</span><span class="p">(</span><span class="s1">&#39;your_user_name&#39;</span><span class="p">,</span> <span class="s1">&#39;your api key&#39;</span><span class="p">)</span>

<span class="n">Source</span><span class="p">(</span><span class="s1">&#39;table_name&#39;</span><span class="p">,</span> <span class="n">credentials</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="cartoframes.viz.Source.get_credentials">
<code class="sig-name descname">get_credentials</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cartoframes.viz.Source.get_geom_type">
<code class="sig-name descname">get_geom_type</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cartoframes.viz.Source.compute_metadata">
<code class="sig-name descname">compute_metadata</code><span class="sig-paren">(</span><em class="sig-param">columns=None</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cartoframes.viz.Source.is_local">
<code class="sig-name descname">is_local</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cartoframes.viz.Source.is_public">
<code class="sig-name descname">is_public</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cartoframes.viz.Source.schema">
<code class="sig-name descname">schema</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cartoframes.viz.Source.get_table_names">
<code class="sig-name descname">get_table_names</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cartoframes.viz.Style">
<em class="property">class </em><code class="sig-prename descclassname">cartoframes.viz.</code><code class="sig-name descname">Style</code><span class="sig-paren">(</span><em class="sig-param">data=None</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>str</em><em>, </em><em>dict</em>) – The style for the layer. It can be a dictionary or a viz string.
More info at
<cite>CARTO VL styling &lt;https://carto.com/developers/carto-vl/guides/style-with-expressions/&gt;</cite></p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>String API.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Style</span>

<span class="n">Style</span><span class="p">(</span><span class="s1">&#39;color: blue&#39;</span><span class="p">)</span>

<span class="n">Style</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    @sum: sqrt($pop_max) / 100</span>
<span class="s1">    @grad: [red, blue, green]</span>
<span class="s1">    color: ramp(globalEqIntervals($pop_min, 3), @grad)</span>
<span class="s1">    filter: @sum &gt; 20</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Dict API.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Style</span>

<span class="n">Style</span><span class="p">({</span>
    <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;blue&#39;</span>
<span class="p">})</span>

<span class="n">Style</span><span class="p">({</span>
    <span class="s1">&#39;vars&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;sum&#39;</span><span class="p">:</span> <span class="s1">&#39;sqrt($pop_max) / 100&#39;</span><span class="p">,</span>
        <span class="s1">&#39;grad&#39;</span><span class="p">:</span> <span class="s1">&#39;[red, blue, green]&#39;</span>
    <span class="p">},</span>
    <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;ramp(globalEqIntervals($pop_min, 3), @grad)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;filter&#39;</span><span class="p">:</span> <span class="s1">&#39;@sum &gt; 20&#39;</span>
<span class="p">})</span>
</pre></div>
</div>
<dl class="method">
<dt id="cartoframes.viz.Style.compute_viz">
<code class="sig-name descname">compute_viz</code><span class="sig-paren">(</span><em class="sig-param">geom_type</em>, <em class="sig-param">variables={}</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="attribute">
<dt id="cartoframes.viz.themes">
<code class="sig-prename descclassname">cartoframes.viz.</code><code class="sig-name descname">themes</code></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">cartoframes.viz.themes.Themes</span></code></p>
</dd></dl>

<dl class="class">
<dt id="cartoframes.viz.Widget">
<em class="property">class </em><code class="sig-prename descclassname">cartoframes.viz.</code><code class="sig-name descname">Widget</code><span class="sig-paren">(</span><em class="sig-param">f_arg</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>type</strong> – The widget type. It can be ‘default’, ‘formula’, time-series’, ‘animation’, ‘category’, ‘histogram’.</p></li>
<li><p><strong>value</strong> – A constant value or a CARTO VL expression.</p></li>
<li><p><strong>title</strong> (<em>optional</em>) – Widget title.</p></li>
<li><p><strong>description</strong> (<em>optional</em>) – Description shown below the title.</p></li>
<li><p><strong>footer</strong> (<em>optional</em>) – Footer of widget. This is often used to attribute data sources.</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Widget</span>

<span class="n">Widget</span><span class="p">(</span><span class="s1">&#39;formula&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;viewportSum($amount)&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Widget Title&#39;</span><span class="p">,</span>
       <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;[description]&#39;</span><span class="p">,</span> <span class="s1">&#39;footer&#39;</span><span class="p">:</span> <span class="s1">&#39;[footer]&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="cartoframes.viz.Widget.get_default_prop">
<code class="sig-name descname">get_default_prop</code><span class="sig-paren">(</span><em class="sig-param">data</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cartoframes.viz.Widget.get_info">
<code class="sig-name descname">get_info</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cartoframes.viz.Widget.has_bridge">
<code class="sig-name descname">has_bridge</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cartoframes.viz.WidgetList">
<em class="property">class </em><code class="sig-prename descclassname">cartoframes.viz.</code><code class="sig-name descname">WidgetList</code><span class="sig-paren">(</span><em class="sig-param">widgets=None</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>widgets</strong> (<em>dict</em><em>, </em><em>list</em><em>, </em><a class="reference internal" href="#cartoframes.viz.Widget" title="cartoframes.viz.Widget"><em>Widget</em></a>) – The list of widgets for a layer.</p>
</dd>
</dl>
<p>Example:</p>
<dl class="method">
<dt id="cartoframes.viz.WidgetList.get_widgets_info">
<code class="sig-name descname">get_widgets_info</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cartoframes.viz.WidgetList.get_variables">
<code class="sig-name descname">get_variables</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

</dd></dl>

<div class="section" id="module-cartoframes.viz.widgets">
<span id="widgets"></span><h3>Widgets</h3>
<p>Widget helpers to generate widgets faster.</p>
<dl class="function">
<dt id="cartoframes.viz.widgets.animation_widget">
<code class="sig-prename descclassname">cartoframes.viz.widgets.</code><code class="sig-name descname">animation_widget</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Helper function for quickly creating an animated widget.
The animation widget includes an animation status bar as well as controls to play or pause animated data.
The <cite>filter</cite> property of your map’s style, applied to either a date or numeric field, drives both
the animation and the widget. Only <strong>one</strong> animation can be controlled per layer.</p>
<dl class="simple">
<dt>To learn more about creating animations visit:</dt><dd><ul class="simple">
<li><p><a class="reference external" href="https://carto.com/developers/carto-vl/guides/animated-visualizations">https://carto.com/developers/carto-vl/guides/animated-visualizations</a>.</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title of widget.</p></li>
<li><p><strong>description</strong> (<em>str</em><em>, </em><em>optional</em>) – Description text widget placed under widget title.</p></li>
<li><p><strong>footer</strong> (<em>str</em><em>, </em><em>optional</em>) – Footer text placed on the widget bottom</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Widget with type=’animation’</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#cartoframes.viz.Widget" title="cartoframes.viz.Widget">cartoframes.viz.Widget</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Map</span><span class="p">,</span> <span class="n">Layer</span>
<span class="kn">from</span> <span class="nn">cartoframes.viz.widgets</span> <span class="kn">import</span> <span class="n">animation_widget</span>

<span class="n">Map</span><span class="p">(</span>
    <span class="n">Layer</span><span class="p">(</span>
        <span class="s1">&#39;seattle_collisions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;filter: animation($incdate, 20, fade(0.5,0.5))&#39;</span><span class="p">,</span>
        <span class="n">widgets</span><span class="o">=</span><span class="p">[</span>
            <span class="n">animation_widget</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Collision Date&#39;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span> <span class="s1">&#39;Play, pause, or select the range of the animation&#39;</span>
            <span class="p">)]</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="cartoframes.viz.widgets.category_widget">
<code class="sig-prename descclassname">cartoframes.viz.widgets.</code><code class="sig-name descname">category_widget</code><span class="sig-paren">(</span><em class="sig-param">value</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Helper function for quickly creating a category widget.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> (<em>str</em>) – Column name of the category value</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title of widget.</p></li>
<li><p><strong>description</strong> (<em>str</em><em>, </em><em>optional</em>) – Description text widget placed under widget title.</p></li>
<li><p><strong>footer</strong> (<em>str</em><em>, </em><em>optional</em>) – Footer text placed on the widget bottom</p></li>
<li><p><strong>read_only</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Interactively filter a category by selecting it in the widget.
Set to “False” by default.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Widget with type=’category’</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#cartoframes.viz.Widget" title="cartoframes.viz.Widget">cartoframes.viz.Widget</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Map</span><span class="p">,</span> <span class="n">Layer</span>
<span class="kn">from</span> <span class="nn">cartoframes.viz.widgets</span> <span class="kn">import</span> <span class="n">category_widget</span>

<span class="n">Map</span><span class="p">(</span>
    <span class="n">Layer</span><span class="p">(</span>
        <span class="s1">&#39;seattle_collisions&#39;</span><span class="p">,</span>
        <span class="n">widgets</span><span class="o">=</span><span class="p">[</span>
            <span class="n">category_widget</span><span class="p">(</span>
                <span class="s1">&#39;collisiontype&#39;</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Type of Collision&#39;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Select a category to filter&#39;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">]</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="cartoframes.viz.widgets.default_widget">
<code class="sig-prename descclassname">cartoframes.viz.widgets.</code><code class="sig-name descname">default_widget</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Helper function for quickly creating a default widget.</p>
<p>The default widget is a general purpose widget that can be used to provide additional information about your map.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title of widget.</p></li>
<li><p><strong>description</strong> (<em>str</em><em>, </em><em>optional</em>) – Description text widget placed under widget title.</p></li>
<li><p><strong>footer</strong> (<em>str</em><em>, </em><em>optional</em>) – Footer text placed on the widget bottom</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Widget with type=’default’</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#cartoframes.viz.Widget" title="cartoframes.viz.Widget">cartoframes.viz.Widget</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Map</span><span class="p">,</span> <span class="n">Layer</span>
<span class="kn">from</span> <span class="nn">cartoframes.viz.widgets</span> <span class="kn">import</span> <span class="n">default_widget</span>

<span class="n">Map</span><span class="p">(</span>
    <span class="n">Layer</span><span class="p">(</span>
        <span class="s1">&#39;seattle_collisions&#39;</span><span class="p">,</span>
        <span class="n">widgets</span><span class="o">=</span><span class="p">[</span>
            <span class="n">default_widget</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Road Collisions in 2018&#39;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s1">&#39;An analysis of collisions in Seattle, WA&#39;</span><span class="p">,</span>
                <span class="n">footer</span><span class="o">=</span><span class="s1">&#39;Data source: City of Seattle&#39;</span>
            <span class="p">)]</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="cartoframes.viz.widgets.formula_widget">
<code class="sig-prename descclassname">cartoframes.viz.widgets.</code><code class="sig-name descname">formula_widget</code><span class="sig-paren">(</span><em class="sig-param">value</em>, <em class="sig-param">operation=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Helper function for quickly creating a formula widget.</p>
<p>Formula widgets calculate aggregated values (‘Avg’, ‘Max’, ‘Min’, ‘Sum’) from numeric columns
or counts of features (‘Count’) in a dataset.</p>
<p>A formula widget’s aggregations can be calculated on ‘global’ or ‘viewport’ based values.
If you want the values in a formula widget to update on zoom and/or pan, use viewport based aggregations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> (<em>str</em>) – Column name of the numeric value</p></li>
<li><p><strong>operation</strong> (<em>str</em>) – attribute for widget’s aggregated value (‘count’, ‘avg’, ‘max’, ‘min’, ‘sum’)</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title of widget.</p></li>
<li><p><strong>description</strong> (<em>str</em><em>, </em><em>optional</em>) – Description text widget placed under widget title.</p></li>
<li><p><strong>footer</strong> (<em>str</em><em>, </em><em>optional</em>) – Footer text placed on the widget bottom</p></li>
<li><p><strong>is_global</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Account for calculations based on the entire dataset (‘global’) vs.
the default of ‘viewport’ features.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Widget with type=’formula’</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#cartoframes.viz.Widget" title="cartoframes.viz.Widget">cartoframes.viz.Widget</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Map</span><span class="p">,</span> <span class="n">Layer</span>
<span class="kn">from</span> <span class="nn">cartoframes.viz.widgets</span> <span class="kn">import</span> <span class="n">formula_widget</span>

<span class="n">Map</span><span class="p">(</span>
    <span class="n">Layer</span><span class="p">(</span>
        <span class="s1">&#39;seattle_collisions&#39;</span><span class="p">,</span>
        <span class="n">widgets</span><span class="o">=</span><span class="p">[</span>
            <span class="n">formula_widget</span><span class="p">(</span>
                <span class="s1">&#39;count&#39;</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Number of Collisions&#39;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Zoom and/or pan the map to update count&#39;</span><span class="p">,</span>
                <span class="n">footer</span><span class="o">=</span><span class="s1">&#39;collisions in this view&#39;</span>
            <span class="p">)</span>
        <span class="p">]</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Map</span><span class="p">,</span> <span class="n">Layer</span>
<span class="kn">from</span> <span class="nn">cartoframes.viz.widgets</span> <span class="kn">import</span> <span class="n">formula_widget</span>

<span class="n">Map</span><span class="p">(</span>
    <span class="n">Layer</span><span class="p">(</span>
        <span class="s1">&#39;seattle_collisions&#39;</span><span class="p">,</span>
        <span class="n">widgets</span><span class="o">=</span><span class="p">[</span>
            <span class="n">formula_widget</span><span class="p">(</span>
                <span class="s1">&#39;pedcount&#39;</span><span class="p">,</span>
                <span class="s1">&#39;sum&#39;</span><span class="p">,</span>
                <span class="n">is_global</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Total Number of Pedestrians&#39;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s1">&#39;involved over all collisions&#39;</span><span class="p">,</span>
                <span class="n">footer</span><span class="o">=</span><span class="s1">&#39;pedestrians&#39;</span>
            <span class="p">)</span>
        <span class="p">]</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="cartoframes.viz.widgets.histogram_widget">
<code class="sig-prename descclassname">cartoframes.viz.widgets.</code><code class="sig-name descname">histogram_widget</code><span class="sig-paren">(</span><em class="sig-param">value</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Helper function for quickly creating a histogram widget.</p>
<p>Histogram widgets display the distribution of a numeric attribute, in buckets, to group
ranges of values in your data.
By default, you can hover over each bar to see each bucket’s values and count, and also
filter your map’s data within a given range</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> (<em>str</em>) – Column name of the numeric or date value</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title of widget.</p></li>
<li><p><strong>description</strong> (<em>str</em><em>, </em><em>optional</em>) – Description text widget placed under widget title.</p></li>
<li><p><strong>footer</strong> (<em>str</em><em>, </em><em>optional</em>) – Footer text placed on the widget bottom</p></li>
<li><p><strong>buckets</strong> (<em>number</em><em>, </em><em>optional</em>) – Number of histogram buckets. Set to 20 by default.</p></li>
<li><p><strong>read_only</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Interactively filter a range of numeric values by selecting them in the widget.
Set to “False” by default.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Widget with type=’histogram’</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#cartoframes.viz.Widget" title="cartoframes.viz.Widget">cartoframes.viz.Widget</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Map</span><span class="p">,</span> <span class="n">Layer</span>
<span class="kn">from</span> <span class="nn">cartoframes.viz.widgets</span> <span class="kn">import</span> <span class="n">histogram_widget</span>

<span class="n">Map</span><span class="p">(</span>
    <span class="n">Layer</span><span class="p">(</span>
        <span class="s1">&#39;seattle_collisions&#39;</span><span class="p">,</span>
        <span class="n">widgets</span><span class="o">=</span><span class="p">[</span>
            <span class="n">histogram_widget</span><span class="p">(</span>
                <span class="s1">&#39;vehcount&#39;</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Number of Vehicles Involved&#39;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Select a range of values to filter&#39;</span><span class="p">,</span>
                <span class="n">buckets</span><span class="o">=</span><span class="mi">9</span>
            <span class="p">)</span>
        <span class="p">]</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="cartoframes.viz.widgets.time_series_widget">
<code class="sig-prename descclassname">cartoframes.viz.widgets.</code><code class="sig-name descname">time_series_widget</code><span class="sig-paren">(</span><em class="sig-param">value</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Helper function for quickly creating a time series widget.</p>
<p>The time series widget enables you to display animated data (by aggregation) over a specified date or numeric field.
Time series widgets provide a status bar of the animation, controls to play or pause, and the ability to filter on
a range of values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> (<em>str</em>) – Column name of the numeric or date value</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title of widget.</p></li>
<li><p><strong>description</strong> (<em>str</em><em>, </em><em>optional</em>) – Description text widget placed under widget title.</p></li>
<li><p><strong>footer</strong> (<em>str</em><em>, </em><em>optional</em>) – Footer text placed on the widget bottom</p></li>
<li><p><strong>buckets</strong> (<em>number</em><em>, </em><em>optional</em>) – Number of histogram buckets. Set to 20 by default.</p></li>
<li><p><strong>read_only</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Interactively filter a range of numeric values by selecting them in the widget.
Set to “False” by default.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Widget with type=’time-series’</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#cartoframes.viz.Widget" title="cartoframes.viz.Widget">cartoframes.viz.Widget</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.viz</span> <span class="kn">import</span> <span class="n">Map</span><span class="p">,</span> <span class="n">Layer</span>
<span class="kn">from</span> <span class="nn">cartoframes.viz.widgets</span> <span class="kn">import</span> <span class="n">time_series_widget</span>

<span class="n">Map</span><span class="p">(</span>
    <span class="n">Layer</span><span class="p">(</span>
        <span class="s1">&#39;seattle_collisions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;filter: animation($incdate, 20, fade(0.5,0.5))&#39;</span><span class="p">,</span>
        <span class="n">widgets</span><span class="o">=</span><span class="p">[</span>
            <span class="n">time_series_widget</span><span class="p">(</span>
                <span class="n">value</span><span class="o">=</span><span class="s1">&#39;incdate&#39;</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Number of Collisions by Date&#39;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span> <span class="s1">&#39;Play, pause, or select a range for the animation&#39;</span><span class="p">,</span>
                <span class="n">buckets</span><span class="o">=</span><span class="mi">10</span>
            <span class="p">)]</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-cartoframes.viz.helpers">
<span id="helpers"></span><h3>Helpers</h3>
<p>Map helper functions bootstrap the process of creating common types of maps.
These functions save time by giving great out-of-the-box cartography, legends,
and popups. The layer can be further customized using optional overrides.</p>
<dl class="function">
<dt id="cartoframes.viz.helpers.color_bins_layer">
<code class="sig-prename descclassname">cartoframes.viz.helpers.</code><code class="sig-name descname">color_bins_layer</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">value</em>, <em class="sig-param">title=''</em>, <em class="sig-param">method='quantiles'</em>, <em class="sig-param">bins=5</em>, <em class="sig-param">breaks=None</em>, <em class="sig-param">palette=None</em>, <em class="sig-param">size=None</em>, <em class="sig-param">opacity=None</em>, <em class="sig-param">stroke_color=None</em>, <em class="sig-param">stroke_width=None</em>, <em class="sig-param">description=''</em>, <em class="sig-param">footer=''</em>, <em class="sig-param">legend=True</em>, <em class="sig-param">popup=True</em>, <em class="sig-param">widget=False</em>, <em class="sig-param">animate=None</em>, <em class="sig-param">credentials=None</em><span class="sig-paren">)</span></dt>
<dd><p>Helper function for quickly creating a classed color map.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code> or str) – Dataset
or text representing a table or query associated with user account.</p></li>
<li><p><strong>value</strong> (<em>str</em>) – Column to symbolize by.</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title of legend.</p></li>
<li><p><strong>method</strong> (<em>str</em><em>, </em><em>optional</em>) – Classification method of data: “quantiles”, “equal”, “stdev”.
Default is “quantiles”.</p></li>
<li><p><strong>bins</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of size classes (bins) for map. Default is 5.</p></li>
<li><p><strong>breaks</strong> (<em>list&lt;int&gt;</em><em>, </em><em>optional</em>) – Assign manual class break values.</p></li>
<li><p><strong>palette</strong> (<em>str</em><em>, </em><em>optional</em>) – Palette that can be a named cartocolor palette
or other valid CARTO VL palette expression. Default is <cite>purpor</cite>.</p></li>
<li><p><strong>size</strong> (<em>int</em><em>, </em><em>optional</em>) – Size of point or line features.</p></li>
<li><p><strong>opacity</strong> (<em>int</em><em>, </em><em>optional</em>) – Opacity value for point color and line features.
Default is ‘0.8’.</p></li>
<li><p><strong>stroke_width</strong> (<em>int</em><em>, </em><em>optional</em>) – Size of the stroke on point features.</p></li>
<li><p><strong>stroke_color</strong> (<em>str</em><em>, </em><em>optional</em>) – Color of the stroke on point features.
Default is ‘#222’.</p></li>
<li><p><strong>description</strong> (<em>str</em><em>, </em><em>optional</em>) – Description text legend placed under legend title.</p></li>
<li><p><strong>footer</strong> (<em>str</em><em>, </em><em>optional</em>) – Footer text placed under legend items.</p></li>
<li><p><strong>legend</strong> (<em>bool</em><em>, </em><em>optional</em>) – Display map legend: “True” or “False”.
Set to “True” by default.</p></li>
<li><p><strong>popup</strong> (<em>bool</em><em>, </em><em>optional</em>) – Display popups on hover and click: “True” or “False”.
Set to “True” by default.</p></li>
<li><p><strong>widget</strong> (<em>bool</em><em>, </em><em>optional</em>) – Display a widget for mapped data: “True” or “False”.
Set to “False” by default.</p></li>
<li><p><strong>animate</strong> (<em>str</em><em>, </em><em>optional</em>) – Animate features by date/time or other numeric field.</p></li>
<li><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – A Credentials instance. This is only used for the simplified Source API.
When a <a class="reference internal" href="#cartoframes.viz.Source" title="cartoframes.viz.Source"><code class="xref py py-class docutils literal notranslate"><span class="pre">Source</span></code></a> is pased as source,
these credentials is simply ignored. If not provided the credentials will be
automatically obtained from the default credentials.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Layer styled by <cite>value</cite>.
Includes a legend, popup and widget on <cite>value</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#cartoframes.viz.Layer" title="cartoframes.viz.Layer">cartoframes.viz.Layer</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="cartoframes.viz.helpers.color_category_layer">
<code class="sig-prename descclassname">cartoframes.viz.helpers.</code><code class="sig-name descname">color_category_layer</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">value</em>, <em class="sig-param">title=''</em>, <em class="sig-param">top=11</em>, <em class="sig-param">cat=None</em>, <em class="sig-param">palette=None</em>, <em class="sig-param">size=None</em>, <em class="sig-param">opacity=None</em>, <em class="sig-param">stroke_color=None</em>, <em class="sig-param">stroke_width=None</em>, <em class="sig-param">description=''</em>, <em class="sig-param">footer=''</em>, <em class="sig-param">legend=True</em>, <em class="sig-param">popup=True</em>, <em class="sig-param">widget=False</em>, <em class="sig-param">animate=None</em>, <em class="sig-param">credentials=None</em><span class="sig-paren">)</span></dt>
<dd><p>Helper function for quickly creating a category color map.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code> or str) – Dataset
or text representing a table or query associated with user account.</p></li>
<li><p><strong>value</strong> (<em>str</em>) – Column to symbolize by.</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title of legend.</p></li>
<li><p><strong>top</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of category for map. Default is 11. Values
can range from 1 to 16.</p></li>
<li><p><strong>cat</strong> (<em>list&lt;str&gt;</em><em>, </em><em>optional</em>) – Category list. Must be a valid list of categories.</p></li>
<li><p><strong>palette</strong> (<em>str</em><em>, </em><em>optional</em>) – Palette that can be a named CARTOColor palette
or other valid CARTO VL palette expression. Default is <cite>bold</cite>.</p></li>
<li><p><strong>size</strong> (<em>int</em><em>, </em><em>optional</em>) – Size of point or line features.</p></li>
<li><p><strong>opacity</strong> (<em>int</em><em>, </em><em>optional</em>) – Opacity value for point color and line features.
Default is ‘0.8’.</p></li>
<li><p><strong>stroke_width</strong> (<em>int</em><em>, </em><em>optional</em>) – Size of the stroke on point features.</p></li>
<li><p><strong>stroke_color</strong> (<em>str</em><em>, </em><em>optional</em>) – Color of the stroke on point features.
Default is ‘#222’.</p></li>
<li><p><strong>description</strong> (<em>str</em><em>, </em><em>optional</em>) – Description text legend placed under legend title.</p></li>
<li><p><strong>footer</strong> (<em>str</em><em>, </em><em>optional</em>) – Footer text placed under legend items.</p></li>
<li><p><strong>legend</strong> (<em>bool</em><em>, </em><em>optional</em>) – Display map legend: “True” or “False”.
Set to “True” by default.</p></li>
<li><p><strong>popup</strong> (<em>bool</em><em>, </em><em>optional</em>) – Display popups on hover and click: “True” or “False”.
Set to “True” by default.</p></li>
<li><p><strong>widget</strong> (<em>bool</em><em>, </em><em>optional</em>) – Display a widget for mapped data.
Set to “False” by default.</p></li>
<li><p><strong>animate</strong> (<em>str</em><em>, </em><em>optional</em>) – Animate features by date/time or other numeric field.</p></li>
<li><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – A Credentials instance. This is only used for the simplified Source API.
When a <a class="reference internal" href="#cartoframes.viz.Source" title="cartoframes.viz.Source"><code class="xref py py-class docutils literal notranslate"><span class="pre">Source</span></code></a> is pased as source,
these credentials is simply ignored. If not provided the credentials will be
automatically obtained from the default credentials.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Layer styled by <cite>value</cite>.
Includes a legend, popup and widget on <cite>value</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#cartoframes.viz.Layer" title="cartoframes.viz.Layer">cartoframes.viz.Layer</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="cartoframes.viz.helpers.color_continuous_layer">
<code class="sig-prename descclassname">cartoframes.viz.helpers.</code><code class="sig-name descname">color_continuous_layer</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">value</em>, <em class="sig-param">title=''</em>, <em class="sig-param">range_min=None</em>, <em class="sig-param">range_max=None</em>, <em class="sig-param">palette=None</em>, <em class="sig-param">size=None</em>, <em class="sig-param">opacity=None</em>, <em class="sig-param">stroke_color=None</em>, <em class="sig-param">stroke_width=None</em>, <em class="sig-param">description=''</em>, <em class="sig-param">footer=''</em>, <em class="sig-param">legend=True</em>, <em class="sig-param">popup=True</em>, <em class="sig-param">widget=False</em>, <em class="sig-param">animate=None</em>, <em class="sig-param">credentials=None</em><span class="sig-paren">)</span></dt>
<dd><p>Helper function for quickly creating a continuous color map.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code> or str) – Dataset
or text representing a table or query associated with user account.</p></li>
<li><p><strong>value</strong> (<em>str</em>) – Column to symbolize by.</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title of legend and popup hover.</p></li>
<li><p><strong>range_min</strong> (<em>int</em><em>, </em><em>optional</em>) – The minimum value of the data range for the continuous
color ramp. Defaults to the globalMIN of the dataset.</p></li>
<li><p><strong>range_max</strong> (<em>int</em><em>, </em><em>optional</em>) – The maximum value of the data range for the continuous
color ramp. Defaults to the globalMAX of the dataset.</p></li>
<li><p><strong>palette</strong> (<em>str</em><em>, </em><em>optional</em>) – Palette that can be a named CARTOColor palette
or other valid CARTO VL palette expression. Default is <cite>bluyl</cite>.</p></li>
<li><p><strong>size</strong> (<em>int</em><em>, </em><em>optional</em>) – Size of point or line features.</p></li>
<li><p><strong>opacity</strong> (<em>int</em><em>, </em><em>optional</em>) – Opacity value for point color and line features.
Default is ‘0.8’.</p></li>
<li><p><strong>stroke_width</strong> (<em>int</em><em>, </em><em>optional</em>) – Size of the stroke on point features.</p></li>
<li><p><strong>stroke_color</strong> (<em>str</em><em>, </em><em>optional</em>) – Color of the stroke on point features.
Default is ‘#222’.</p></li>
<li><p><strong>description</strong> (<em>str</em><em>, </em><em>optional</em>) – Description text legend placed under legend title.</p></li>
<li><p><strong>footer</strong> (<em>str</em><em>, </em><em>optional</em>) – Footer text placed under legend items.</p></li>
<li><p><strong>legend</strong> (<em>bool</em><em>, </em><em>optional</em>) – Display map legend: “True” or “False”.
Set to “True” by default.</p></li>
<li><p><strong>popup</strong> (<em>bool</em><em>, </em><a class="reference internal" href="#cartoframes.viz.Popup" title="cartoframes.viz.Popup"><em>Popup</em></a><em>, </em><em>optional</em>) – Display popups on hover and click: “True” or “False”.
Set to “True” by default.</p></li>
<li><p><strong>widget</strong> (<em>bool</em><em>, </em><em>optional</em>) – Display a widget for mapped data.
Set to “False” by default.</p></li>
<li><p><strong>animate</strong> (<em>str</em><em>, </em><em>optional</em>) – Animate features by date/time or other numeric field.</p></li>
<li><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – A Credentials instance. This is only used for the simplified Source API.
When a <a class="reference internal" href="#cartoframes.viz.Source" title="cartoframes.viz.Source"><code class="xref py py-class docutils literal notranslate"><span class="pre">Source</span></code></a> is pased as source,
these credentials is simply ignored. If not provided the credentials will be
automatically obtained from the default credentials.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Layer styled by <cite>value</cite>.
Includes a legend, popup and widget on <cite>value</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#cartoframes.viz.Layer" title="cartoframes.viz.Layer">cartoframes.viz.Layer</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="cartoframes.viz.helpers.size_bins_layer">
<code class="sig-prename descclassname">cartoframes.viz.helpers.</code><code class="sig-name descname">size_bins_layer</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">value</em>, <em class="sig-param">title=''</em>, <em class="sig-param">method='quantiles'</em>, <em class="sig-param">bins=5</em>, <em class="sig-param">breaks=None</em>, <em class="sig-param">size=None</em>, <em class="sig-param">color=None</em>, <em class="sig-param">opacity=None</em>, <em class="sig-param">stroke_width=None</em>, <em class="sig-param">stroke_color=None</em>, <em class="sig-param">description=''</em>, <em class="sig-param">footer=''</em>, <em class="sig-param">legend=True</em>, <em class="sig-param">popup=True</em>, <em class="sig-param">widget=False</em>, <em class="sig-param">animate=None</em>, <em class="sig-param">credentials=None</em><span class="sig-paren">)</span></dt>
<dd><p>Helper function for quickly creating a size symbol map with
classification method/buckets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code> or str) – Dataset
or text representing a table or query associated with user account.</p></li>
<li><p><strong>value</strong> (<em>str</em>) – Column to symbolize by.</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title of legend.</p></li>
<li><p><strong>method</strong> (<em>str</em><em>, </em><em>optional</em>) – Classification method of data: “quantiles”, “equal”, “stdev”.
Default is “quantiles”.</p></li>
<li><p><strong>bins</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of size classes (bins) for map. Default is 5.</p></li>
<li><p><strong>breaks</strong> (<em>list&lt;int&gt;</em><em>, </em><em>optional</em>) – Assign manual class break values.</p></li>
<li><p><strong>size</strong> (<em>int</em><em>, </em><em>optiona</em>) – Min/max size array in CARTO VL syntax. Default is
‘[2, 14]’ for point geometries and ‘[1, 10]’ for lines.</p></li>
<li><p><strong>color</strong> (<em>str</em><em>, </em><em>optional</em>) – Hex value, rgb expression, or other valid
CARTO VL color. Default is ‘#EE5D5A’ for point geometries and
‘#4CC8A3’ for lines.</p></li>
<li><p><strong>opacity</strong> (<em>int</em><em>, </em><em>optional</em>) – Opacity value for point color and line features.
Default is ‘0.8’.</p></li>
<li><p><strong>stroke_width</strong> (<em>int</em><em>, </em><em>optional</em>) – Size of the stroke on point features.</p></li>
<li><p><strong>stroke_color</strong> (<em>str</em><em>, </em><em>optional</em>) – Color of the stroke on point features.
Default is ‘#222’.</p></li>
<li><p><strong>description</strong> (<em>str</em><em>, </em><em>optional</em>) – Description text legend placed under legend title.</p></li>
<li><p><strong>footer</strong> (<em>str</em><em>, </em><em>optional</em>) – Footer text placed under legend items.</p></li>
<li><p><strong>legend</strong> (<em>bool</em><em>, </em><em>optional</em>) – Display map legend: “True” or “False”.
Set to “True” by default.</p></li>
<li><p><strong>popup</strong> (<em>bool</em><em>, </em><em>optional</em>) – Display popups on hover and click: “True” or “False”.
Set to “True” by default.</p></li>
<li><p><strong>widget</strong> (<em>bool</em><em>, </em><em>optional</em>) – Display a widget for mapped data.
Set to “False” by default.</p></li>
<li><p><strong>animate</strong> (<em>str</em><em>, </em><em>optional</em>) – Animate features by date/time or other numeric field.</p></li>
<li><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – A Credentials instance. This is only used for the simplified Source API.
When a <a class="reference internal" href="#cartoframes.viz.Source" title="cartoframes.viz.Source"><code class="xref py py-class docutils literal notranslate"><span class="pre">Source</span></code></a> is pased as source,
these credentials is simply ignored. If not provided the credentials will be
automatically obtained from the default credentials.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Layer styled by <cite>value</cite>.
Includes a legend, popup and widget on <cite>value</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#cartoframes.viz.Layer" title="cartoframes.viz.Layer">cartoframes.viz.Layer</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="cartoframes.viz.helpers.size_category_layer">
<code class="sig-prename descclassname">cartoframes.viz.helpers.</code><code class="sig-name descname">size_category_layer</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">value</em>, <em class="sig-param">title=''</em>, <em class="sig-param">top=5</em>, <em class="sig-param">cat=None</em>, <em class="sig-param">size=None</em>, <em class="sig-param">color=None</em>, <em class="sig-param">opacity=None</em>, <em class="sig-param">stroke_width=None</em>, <em class="sig-param">stroke_color=None</em>, <em class="sig-param">description=''</em>, <em class="sig-param">footer=''</em>, <em class="sig-param">legend=True</em>, <em class="sig-param">popup=True</em>, <em class="sig-param">widget=False</em>, <em class="sig-param">animate=None</em>, <em class="sig-param">credentials=None</em><span class="sig-paren">)</span></dt>
<dd><p>Helper function for quickly creating a size category layer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code> or str) – Dataset
or text representing a table or query associated with user account.</p></li>
<li><p><strong>value</strong> (<em>str</em>) – Column to symbolize by.</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title of legend.</p></li>
<li><p><strong>top</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of size categories for layer. Default is
5. Valid values range from 1 to 16.</p></li>
<li><p><strong>cat</strong> (<em>list&lt;str&gt;</em><em>, </em><em>optional</em>) – Category list. Must be a valid CARTO VL category
list.</p></li>
<li><p><strong>size</strong> (<em>str</em><em>, </em><em>optiona</em>) – Min/max size array in CARTO VL syntax. Default is
‘[2, 20]’ for point geometries and ‘[1, 10]’ for lines.</p></li>
<li><p><strong>color</strong> (<em>str</em><em>, </em><em>optional</em>) – Hex value, rgb expression, or other valid
CARTO VL color. Default is ‘#F46D43’ for point geometries and
‘#4CC8A3’ for lines.</p></li>
<li><p><strong>opacity</strong> (<em>int</em><em>, </em><em>optional</em>) – Opacity value for point color and line features.
Default is ‘0.8’.</p></li>
<li><p><strong>stroke_width</strong> (<em>int</em><em>, </em><em>optional</em>) – Size of the stroke on point features.</p></li>
<li><p><strong>stroke_color</strong> (<em>str</em><em>, </em><em>optional</em>) – Color of the stroke on point features.
Default is ‘#222’.</p></li>
<li><p><strong>description</strong> (<em>str</em><em>, </em><em>optional</em>) – Description text legend placed under legend title.</p></li>
<li><p><strong>footer</strong> (<em>str</em><em>, </em><em>optional</em>) – Footer text placed under legend items.</p></li>
<li><p><strong>legend</strong> (<em>bool</em><em>, </em><em>optional</em>) – Display map legend: “True” or “False”.
Set to “True” by default.</p></li>
<li><p><strong>popup</strong> (<em>bool</em><em>, </em><em>optional</em>) – Display popups on hover and click: “True” or “False”.
Set to “True” by default.</p></li>
<li><p><strong>widget</strong> (<em>bool</em><em>, </em><em>optional</em>) – Display a widget for mapped data.
Set to “False” by default.</p></li>
<li><p><strong>animate</strong> (<em>str</em><em>, </em><em>optional</em>) – Animate features by date/time or other numeric field.</p></li>
<li><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – A Credentials instance. This is only used for the simplified Source API.
When a <a class="reference internal" href="#cartoframes.viz.Source" title="cartoframes.viz.Source"><code class="xref py py-class docutils literal notranslate"><span class="pre">Source</span></code></a> is pased as source,
these credentials is simply ignored. If not provided the credentials will be
automatically obtained from the default credentials.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Layer styled by <cite>value</cite>.
Includes a legend, popup and widget on <cite>value</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#cartoframes.viz.Layer" title="cartoframes.viz.Layer">cartoframes.viz.Layer</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="cartoframes.viz.helpers.size_continuous_layer">
<code class="sig-prename descclassname">cartoframes.viz.helpers.</code><code class="sig-name descname">size_continuous_layer</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">value</em>, <em class="sig-param">title=''</em>, <em class="sig-param">range_min=None</em>, <em class="sig-param">range_max=None</em>, <em class="sig-param">size=None</em>, <em class="sig-param">color=None</em>, <em class="sig-param">opacity=None</em>, <em class="sig-param">stroke_width=None</em>, <em class="sig-param">stroke_color=None</em>, <em class="sig-param">description=''</em>, <em class="sig-param">footer=''</em>, <em class="sig-param">legend=True</em>, <em class="sig-param">popup=True</em>, <em class="sig-param">widget=False</em>, <em class="sig-param">animate=None</em>, <em class="sig-param">credentials=None</em><span class="sig-paren">)</span></dt>
<dd><p>Helper function for quickly creating a size symbol map with
continuous size scaled by <cite>value</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code> or str) – Dataset
or text representing a table or query associated with user account.</p></li>
<li><p><strong>value</strong> (<em>str</em>) – Column to symbolize by.</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title of legend and popup hover.</p></li>
<li><p><strong>range_min</strong> (<em>int</em><em>, </em><em>optional</em>) – The minimum value of the data range for the continuous
size ramp. Defaults to the globalMIN of the dataset.</p></li>
<li><p><strong>range_max</strong> (<em>int</em><em>, </em><em>optional</em>) – The maximum value of the data range for the continuous
size ramp. Defaults to the globalMAX of the dataset.</p></li>
<li><p><strong>size</strong> (<em>str</em><em>, </em><em>optiona</em>) – Min/max size array in CARTO VL syntax. Default is
‘[2, 40]’ for point geometries and ‘[1, 10]’ for lines.</p></li>
<li><p><strong>color</strong> (<em>str</em><em>, </em><em>optional</em>) – Hex value, rgb expression, or other valid
CARTO VL color. Defaults is ‘#FFB927’ for point geometries and
‘#4CC8A3’ for lines.</p></li>
<li><p><strong>opacity</strong> (<em>int</em><em>, </em><em>optional</em>) – Opacity value for point color and line features.
Default is ‘0.8’.</p></li>
<li><p><strong>stroke_width</strong> (<em>int</em><em>, </em><em>optional</em>) – Size of the stroke on point features.</p></li>
<li><p><strong>stroke_color</strong> (<em>str</em><em>, </em><em>optional</em>) – Color of the stroke on point features.
Default is ‘#222’.</p></li>
<li><p><strong>description</strong> (<em>str</em><em>, </em><em>optional</em>) – Description text legend placed under legend title.</p></li>
<li><p><strong>footer</strong> (<em>str</em><em>, </em><em>optional</em>) – Footer text placed under legend items.</p></li>
<li><p><strong>legend</strong> (<em>bool</em><em>, </em><em>optional</em>) – Display map legend: “True” or “False”.
Set to “True” by default.</p></li>
<li><p><strong>popup</strong> (<em>bool</em><em>, </em><em>optional</em>) – Display popups on hover and click: “True” or “False”.
Set to “True” by default.</p></li>
<li><p><strong>widget</strong> (<em>bool</em><em>, </em><em>optional</em>) – Display a widget for mapped data.
Set to “False” by default.</p></li>
<li><p><strong>animate</strong> (<em>str</em><em>, </em><em>optional</em>) – Animate features by date/time or other numeric field.</p></li>
<li><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – A Credentials instance. This is only used for the simplified Source API.
When a <a class="reference internal" href="#cartoframes.viz.Source" title="cartoframes.viz.Source"><code class="xref py py-class docutils literal notranslate"><span class="pre">Source</span></code></a> is pased as source,
these credentials is simply ignored. If not provided the credentials will be
automatically obtained from the default credentials.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Layer styled by <cite>value</cite>.
Includes a legend, popup and widget on <cite>value</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#cartoframes.viz.Layer" title="cartoframes.viz.Layer">cartoframes.viz.Layer</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="cartoframes.viz.helpers.cluster_size_layer">
<code class="sig-prename descclassname">cartoframes.viz.helpers.</code><code class="sig-name descname">cluster_size_layer</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">value=None</em>, <em class="sig-param">operation='count'</em>, <em class="sig-param">resolution=32</em>, <em class="sig-param">title=''</em>, <em class="sig-param">color=None</em>, <em class="sig-param">opacity=None</em>, <em class="sig-param">stroke_width=None</em>, <em class="sig-param">stroke_color=None</em>, <em class="sig-param">description=''</em>, <em class="sig-param">footer=''</em>, <em class="sig-param">legend=True</em>, <em class="sig-param">popup=True</em>, <em class="sig-param">widget=False</em>, <em class="sig-param">animate=None</em>, <em class="sig-param">credentials=None</em><span class="sig-paren">)</span></dt>
<dd><p>Helper function for quickly creating a cluster map with
continuously sized points.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code> or str) – Dataset
or text representing a table or query associated with user account.</p></li>
<li><p><strong>value</strong> (<em>str</em>) – Numeric column to aggregate.</p></li>
<li><p><strong>operation</strong> (<em>str</em><em>, </em><em>optional</em>) – Cluster operation, defaults to ‘count’. Other options
available are ‘avg’, ‘min’, ‘max’, and ‘sum’.</p></li>
<li><p><strong>resolution</strong> (<em>int</em><em>, </em><em>optional</em>) – Resolution of aggregation grid cell. Set to 32 by default.</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title of legend and hover.</p></li>
<li><p><strong>color</strong> (<em>str</em><em>, </em><em>optional</em>) – Hex value, rgb expression, or other valid
CARTO VL color. Defaults is ‘#FFB927’ for point geometries.</p></li>
<li><p><strong>opacity</strong> (<em>int</em><em>, </em><em>optional</em>) – Opacity value for point color and line features.
Default is ‘0.8’.</p></li>
<li><p><strong>stroke_width</strong> (<em>int</em><em>, </em><em>optional</em>) – Size of the stroke on point features.</p></li>
<li><p><strong>stroke_color</strong> (<em>str</em><em>, </em><em>optional</em>) – Color of the stroke on point features.
Default is ‘#222’.</p></li>
<li><p><strong>description</strong> (<em>str</em><em>, </em><em>optional</em>) – Description text legend placed under legend title.</p></li>
<li><p><strong>footer</strong> (<em>str</em><em>, </em><em>optional</em>) – Footer text placed under legend items.</p></li>
<li><p><strong>legend</strong> (<em>bool</em><em>, </em><em>optional</em>) – Display map legend: “True” or “False”.
Set to “True” by default.</p></li>
<li><p><strong>popup</strong> (<em>bool</em><em>, </em><em>optional</em>) – Display popups on hover and click: “True” or “False”.
Set to “True” by default.</p></li>
<li><p><strong>widget</strong> (<em>bool</em><em>, </em><em>optional</em>) – Display a widget for mapped data.
Set to “False” by default.</p></li>
<li><p><strong>animate</strong> (<em>str</em><em>, </em><em>optional</em>) – Animate features by date/time or other numeric field.</p></li>
<li><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – A Credentials instance. This is only used for the simplified Source API.
When a <a class="reference internal" href="#cartoframes.viz.Source" title="cartoframes.viz.Source"><code class="xref py py-class docutils literal notranslate"><span class="pre">Source</span></code></a> is pased as source,
these credentials is simply ignored. If not provided the credentials will be
automatically obtained from the default credentials.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Layer styled by <cite>value</cite>.
Includes a legend, popup and widget on <cite>value</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#cartoframes.viz.Layer" title="cartoframes.viz.Layer">cartoframes.viz.Layer</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="cartoframes.viz.helpers.animation_layer">
<code class="sig-prename descclassname">cartoframes.viz.helpers.</code><code class="sig-name descname">animation_layer</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">value</em>, <em class="sig-param">title=''</em>, <em class="sig-param">duration=None</em>, <em class="sig-param">fade=None</em>, <em class="sig-param">size=None</em>, <em class="sig-param">color=None</em>, <em class="sig-param">opacity=None</em>, <em class="sig-param">stroke_color=None</em>, <em class="sig-param">stroke_width=None</em>, <em class="sig-param">widget_type='time-series'</em>, <em class="sig-param">description=''</em>, <em class="sig-param">credentials=None</em><span class="sig-paren">)</span></dt>
<dd><p>Helper function for quickly creating an animated map.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code> or str) – Dataset
or text representing a table or query associated with user account.</p></li>
<li><p><strong>value</strong> (<em>str</em>) – Column to symbolize by.</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title of widget.</p></li>
<li><p><strong>color</strong> (<em>str</em><em>, </em><em>optional</em>) – Hex value, rgb expression, or other valid
CARTO VL color. Default is ‘#EE5D5A’ for point geometries,
‘#4CC8A3’ for lines and #826DBA for polygons.</p></li>
<li><p><strong>size</strong> (<em>int</em><em>, </em><em>optional</em>) – Size of point or line features.</p></li>
<li><p><strong>opacity</strong> (<em>int</em><em>, </em><em>optional</em>) – Opacity value for point color and line features.
Default is ‘0.8’.</p></li>
<li><p><strong>stroke_width</strong> (<em>int</em><em>, </em><em>optional</em>) – Size of the stroke on point features.</p></li>
<li><p><strong>stroke_color</strong> (<em>str</em><em>, </em><em>optional</em>) – Color of the stroke on point features.
Default is ‘#222’.</p></li>
<li><p><strong>widget_type</strong> (<em>str</em><em>, </em><em>optional</em>) – Type of animation widget: “animation” or “time-series”.
The default is “time-series”.</p></li>
<li><p><strong>description</strong> (<em>str</em><em>, </em><em>optional</em>) – Description text placed under the widget title.</p></li>
<li><p><strong>fade</strong> (<em>string</em><em>, </em><em>optional</em>) – Animation fade with the format: “(fade in, fade out)”. Default is (1, 1).</p></li>
<li><p><strong>credentials</strong> (<a class="reference internal" href="#cartoframes.auth.Credentials" title="cartoframes.auth.Credentials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Credentials</span></code></a>, optional) – A Credentials instance. This is only used for the simplified Source API.
When a <a class="reference internal" href="#cartoframes.viz.Source" title="cartoframes.viz.Source"><code class="xref py py-class docutils literal notranslate"><span class="pre">Source</span></code></a> is pased as source,
these credentials is simply ignored. If not provided the credentials will be
automatically obtained from the default credentials.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Layer styled by <cite>value</cite>. Includes Widget <cite>value</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#cartoframes.viz.Layer" title="cartoframes.viz.Layer">cartoframes.viz.Layer</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="cartoframes.viz.helpers.isolines_layer">
<code class="sig-prename descclassname">cartoframes.viz.helpers.</code><code class="sig-name descname">isolines_layer</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">value='range_label'</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Helper function for quickly creating an isolines color map.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<em>str</em><em>, </em><em>DataFrame</em>) – </p></li>
<li><p><strong>value</strong> (<em>str</em><em>, </em><em>optional</em>) – Column to symbolize by. By default is “range_label”.</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title of legend.</p></li>
<li><p><strong>top</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of category for map. Default is 11. Values
can range from 1 to 16.</p></li>
<li><p><strong>cat</strong> (<em>list&lt;str&gt;</em><em>, </em><em>optional</em>) – Category list. Must be a valid list of categories.</p></li>
<li><p><strong>palette</strong> (<em>str</em><em>, </em><em>optional</em>) – Palette that can be a named CARTOColor palette
or other valid CARTO VL palette expression. Default is <cite>bold</cite>.</p></li>
<li><p><strong>size</strong> (<em>int</em><em>, </em><em>optional</em>) – Size of point or line features.</p></li>
<li><p><strong>opacity</strong> (<em>int</em><em>, </em><em>optional</em>) – Opacity value for point color and line features.
Default is ‘0.8’.</p></li>
<li><p><strong>stroke_width</strong> (<em>int</em><em>, </em><em>optional</em>) – Size of the stroke on point features.</p></li>
<li><p><strong>stroke_color</strong> (<em>str</em><em>, </em><em>optional</em>) – Color of the stroke on point features.
Default is ‘#222’.</p></li>
<li><p><strong>description</strong> (<em>str</em><em>, </em><em>optional</em>) – Description text legend placed under legend title.</p></li>
<li><p><strong>footer</strong> (<em>str</em><em>, </em><em>optional</em>) – Footer text placed under legend items.</p></li>
<li><p><strong>legend</strong> (<em>bool</em><em>, </em><em>optional</em>) – Display map legend: “True” or “False”.
Set to “True” by default.</p></li>
<li><p><strong>popup</strong> (<em>bool</em><em>, </em><em>optional</em>) – Display popups on hover and click: “True” or “False”.
Set to “True” by default.</p></li>
<li><p><strong>widget</strong> (<em>bool</em><em>, </em><em>optional</em>) – Display a widget for mapped data.
Set to “False” by default.</p></li>
<li><p><strong>animate</strong> (<em>str</em><em>, </em><em>optional</em>) – Animate features by date/time or other numeric field.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<p>Create a layer with a custom popup, legend, and widget.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartoframes.viz.helpers</span> <span class="kn">import</span> <span class="n">isolines_layer</span>

<span class="p">[</span><span class="o">...</span><span class="p">]</span>

<span class="n">data</span><span class="p">,</span> <span class="n">metadata</span> <span class="o">=</span> <span class="n">Isolines</span><span class="p">()</span><span class="o">.</span><span class="n">isodistances</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="p">[</span><span class="mi">1200</span><span class="p">,</span> <span class="mi">2400</span><span class="p">,</span> <span class="mi">3600</span><span class="p">])</span>

<span class="n">isolines_layer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s1">&#39;purpor&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Layer styled by <cite>value</cite>.
Includes a legend, popup and widget on <cite>value</cite>.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#cartoframes.viz.Layer" title="cartoframes.viz.Layer"><code class="xref py py-class docutils literal notranslate"><span class="pre">cartoframes.viz.Layer</span></code></a></p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-cartoframes.exceptions">
<span id="exceptions"></span><h2>Exceptions</h2>
<dl class="exception">
<dt id="cartoframes.exceptions.DiscoveryException">
<em class="property">exception </em><code class="sig-prename descclassname">cartoframes.exceptions.</code><code class="sig-name descname">DiscoveryException</code><span class="sig-paren">(</span><em class="sig-param">message</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>This exception is raised when a problem is encountered while using the Catalog Discovery functions (i.e. requesting
an element with an unknown ID).</p>
</dd></dl>

<dl class="exception">
<dt id="cartoframes.exceptions.EnrichmentException">
<em class="property">exception </em><code class="sig-prename descclassname">cartoframes.exceptions.</code><code class="sig-name descname">EnrichmentException</code><span class="sig-paren">(</span><em class="sig-param">message</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>This exception is raised when a problem is encountered while using enrichment functions.</p>
</dd></dl>

</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">cartoframes</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">CARTOframes API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#authentication">Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="#manage-data">Manage Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#visualize-data">Visualize Data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-cartoframes.auth">Auth</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cartoframes.core.cartodataframe">CartoDataFrame</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cartoframes.io.carto">Utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-observatory">Data Observatory</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cartoframes.data.services">Data Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cartoframes.viz">Viz</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-cartoframes.viz.widgets">Widgets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-cartoframes.viz.helpers">Helpers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-cartoframes.exceptions">Exceptions</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">CARTOframes</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, CARTO.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/cartoframes.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.6.3" />
<title>cartoframes.viz.widgets API documentation</title>
<meta name="description" content="Widget helpers to generate widgets faster." />
<link href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css' rel='stylesheet'>
<link href='https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/8.0.0/sanitize.min.css' rel='stylesheet'>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" rel="stylesheet">
<style>.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{font-weight:bold}#index h4 + ul{margin-bottom:.6em}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase;cursor:pointer}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>cartoframes.viz.widgets</code></h1>
</header>
<section id="section-intro">
<p>Widget helpers to generate widgets faster.</p>
<details class="source">
<summary>Source code</summary>
<pre><code class="python">&#34;&#34;&#34;
Widget helpers to generate widgets faster.
&#34;&#34;&#34;

from __future__ import absolute_import

from .animation_widget import animation_widget
from .category_widget import category_widget
from .default_widget import default_widget
from .formula_widget import formula_widget
from .histogram_widget import histogram_widget
from .time_series_widget import time_series_widget
from ..widget import Widget
from ..widget_list import WidgetList


def _inspect(widget):
    import inspect
    lines = inspect.getsource(widget)
    print(lines)


__all__ = [
    &#39;Widget&#39;,
    &#39;WidgetList&#39;,
    &#39;animation_widget&#39;,
    &#39;category_widget&#39;,
    &#39;default_widget&#39;,
    &#39;formula_widget&#39;,
    &#39;histogram_widget&#39;,
    &#39;time_series_widget&#39;,
]</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="cartoframes.viz.widgets.animation_widget"><code class="name flex">
<span>def <span class="ident">animation_widget</span></span>(<span>**kwargs)</span>
</code></dt>
<dd>
<section class="desc"><p>Helper function for quickly creating an animated widget.</p>
<p>The animation widget includes an animation status bar as well as controls to play or pause animated data.
The <code>filter</code> property of your map's style, applied to either a date or numeric field, drives both
the animation and the widget. Only <strong>one</strong> animation can be controlled per layer.
To learn more about creating animations visit:
- <a href="https://carto.com/developers/carto-vl/guides/animated-visualizations.">https://carto.com/developers/carto-vl/guides/animated-visualizations.</a></p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>title</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>Title of widget.</dd>
<dt><strong><code>description</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>Description text widget placed under widget title.</dd>
<dt><strong><code>footer</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>Footer text placed on the widget bottom</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><a title="cartoframes.viz.Widget" href="../index.html#cartoframes.viz.Widget"><code>Widget</code></a>: <a title="cartoframes.viz.widgets.Widget" href="#cartoframes.viz.widgets.Widget"><code>Widget</code></a> <code>with</code> <code>type</code>=<code>'animation'</code></dt>
<dd>&nbsp;</dd>
</dl>
<div class="admonition code">
<p class="admonition-title">Code</p>
<p>from cartoframes.viz import Map, Layer
from cartoframes.viz.widgets import animation_widget</p>
<p>Map(
Layer(
'seattle_collisions',
'filter: animation($incdate, 20, fade(0.5,0.5))',
widgets=[
animation_widget(
title='Collision Date',
description= 'Play, pause, or select the range of the animation'
)]
)
)</p>
</div></section>
<details class="source">
<summary>Source code</summary>
<pre><code class="python">def animation_widget(**kwargs):
    &#34;&#34;&#34;Helper function for quickly creating an animated widget.

    The animation widget includes an animation status bar as well as controls to play or pause animated data.
    The `filter` property of your map&#39;s style, applied to either a date or numeric field, drives both
    the animation and the widget. Only **one** animation can be controlled per layer.
    To learn more about creating animations visit:
      - https://carto.com/developers/carto-vl/guides/animated-visualizations.

    Args:
        title (str, optional): Title of widget.
        description (str, optional): Description text widget placed under widget title.
        footer (str, optional): Footer text placed on the widget bottom

    Returns:
        cartoframes.viz.Widget: Widget with type=&#39;animation&#39;

    Example:

        .. code::

            from cartoframes.viz import Map, Layer
            from cartoframes.viz.widgets import animation_widget

            Map(
                Layer(
                    &#39;seattle_collisions&#39;,
                    &#39;filter: animation($incdate, 20, fade(0.5,0.5))&#39;,
                    widgets=[
                        animation_widget(
                            title=&#39;Collision Date&#39;,
                            description= &#39;Play, pause, or select the range of the animation&#39;
                        )]
                )
            )
    &#34;&#34;&#34;

    data = kwargs
    data[&#39;type&#39;] = &#39;animation&#39;
    return Widget(data)</code></pre>
</details>
</dd>
<dt id="cartoframes.viz.widgets.category_widget"><code class="name flex">
<span>def <span class="ident">category_widget</span></span>(<span>value, **kwargs)</span>
</code></dt>
<dd>
<section class="desc"><p>Helper function for quickly creating a category widget.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>value</code></strong> :&ensp;<code>str</code></dt>
<dd>Column name of the category value</dd>
<dt><strong><code>title</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>Title of widget.</dd>
<dt><strong><code>description</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>Description text widget placed under widget title.</dd>
<dt><strong><code>footer</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>Footer text placed on the widget bottom</dd>
<dt><strong><code>read_only</code></strong> :&ensp;<code>boolean</code>, optional</dt>
<dd>Interactively filter a category by selecting it in the widget.
Set to "False" by default.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><a title="cartoframes.viz.Widget" href="../index.html#cartoframes.viz.Widget"><code>Widget</code></a>: <a title="cartoframes.viz.widgets.Widget" href="#cartoframes.viz.widgets.Widget"><code>Widget</code></a> <code>with</code> <code>type</code>=<code>'category'</code></dt>
<dd>&nbsp;</dd>
</dl>
<div class="admonition code">
<p class="admonition-title">Code</p>
<p>from cartoframes.viz import Map, Layer
from cartoframes.viz.widgets import category_widget</p>
<p>Map(
Layer(
'seattle_collisions',
widgets=[
category_widget(
'collisiontype',
title='Type of Collision',
description='Select a category to filter',
)
]
)
)</p>
</div></section>
<details class="source">
<summary>Source code</summary>
<pre><code class="python">def category_widget(value, **kwargs):
    &#34;&#34;&#34;Helper function for quickly creating a category widget.

    Args:
        value (str): Column name of the category value
        title (str, optional): Title of widget.
        description (str, optional): Description text widget placed under widget title.
        footer (str, optional): Footer text placed on the widget bottom
        read_only (boolean, optional): Interactively filter a category by selecting it in the widget.
          Set to &#34;False&#34; by default.

    Returns:
        cartoframes.viz.Widget: Widget with type=&#39;category&#39;

    Example:

        .. code::

            from cartoframes.viz import Map, Layer
            from cartoframes.viz.widgets import category_widget

            Map(
                Layer(
                    &#39;seattle_collisions&#39;,
                    widgets=[
                        category_widget(
                            &#39;collisiontype&#39;,
                            title=&#39;Type of Collision&#39;,
                            description=&#39;Select a category to filter&#39;,
                        )
                    ]
                )
            )
    &#34;&#34;&#34;

    data = kwargs
    data[&#39;type&#39;] = &#39;category&#39;
    data[&#39;value&#39;] = value
    data[&#39;read_only&#39;] = kwargs.get(&#39;read_only&#39;, False)
    return Widget(data)</code></pre>
</details>
</dd>
<dt id="cartoframes.viz.widgets.default_widget"><code class="name flex">
<span>def <span class="ident">default_widget</span></span>(<span>**kwargs)</span>
</code></dt>
<dd>
<section class="desc"><p>Helper function for quickly creating a default widget.</p>
<p>The default widget is a general purpose widget that can be used to provide additional information about your map.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>title</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>Title of widget.</dd>
<dt><strong><code>description</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>Description text widget placed under widget title.</dd>
<dt><strong><code>footer</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>Footer text placed on the widget bottom</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><a title="cartoframes.viz.Widget" href="../index.html#cartoframes.viz.Widget"><code>Widget</code></a>: <a title="cartoframes.viz.widgets.Widget" href="#cartoframes.viz.widgets.Widget"><code>Widget</code></a> <code>with</code> <code>type</code>=<code>'default'</code></dt>
<dd>&nbsp;</dd>
</dl>
<div class="admonition code">
<p class="admonition-title">Code</p>
<p>from cartoframes.viz import Map, Layer
from cartoframes.viz.widgets import default_widget</p>
<p>Map(
Layer(
'seattle_collisions',
widgets=[
default_widget(
title='Road Collisions in 2018',
description='An analysis of collisions in Seattle, WA',
footer='Data source: City of Seattle'
)]
)
)</p>
</div></section>
<details class="source">
<summary>Source code</summary>
<pre><code class="python">def default_widget(**kwargs):
    &#34;&#34;&#34;Helper function for quickly creating a default widget.

    The default widget is a general purpose widget that can be used to provide additional information about your map.

    Args:
        title (str, optional): Title of widget.
        description (str, optional): Description text widget placed under widget title.
        footer (str, optional): Footer text placed on the widget bottom

    Returns:
        cartoframes.viz.Widget: Widget with type=&#39;default&#39;

    Example:

        .. code::

            from cartoframes.viz import Map, Layer
            from cartoframes.viz.widgets import default_widget

            Map(
                Layer(
                    &#39;seattle_collisions&#39;,
                    widgets=[
                        default_widget(
                            title=&#39;Road Collisions in 2018&#39;,
                            description=&#39;An analysis of collisions in Seattle, WA&#39;,
                            footer=&#39;Data source: City of Seattle&#39;
                        )]
                )
            )
    &#34;&#34;&#34;

    data = kwargs
    data[&#39;type&#39;] = &#39;default&#39;
    return Widget(data)</code></pre>
</details>
</dd>
<dt id="cartoframes.viz.widgets.formula_widget"><code class="name flex">
<span>def <span class="ident">formula_widget</span></span>(<span>value, operation=None, **kwargs)</span>
</code></dt>
<dd>
<section class="desc"><p>Helper function for quickly creating a formula widget.</p>
<p>Formula widgets calculate aggregated values ('Avg', 'Max', 'Min', 'Sum') from numeric columns
or counts of features ('Count') in a dataset.</p>
<p>A formula widget's aggregations can be calculated on 'global' or 'viewport' based values.
If you want the values in a formula widget to update on zoom and/or pan, use viewport based aggregations.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>value</code></strong> :&ensp;<code>str</code></dt>
<dd>Column name of the numeric value</dd>
<dt><strong><code>operation</code></strong> :&ensp;<code>str</code></dt>
<dd>attribute for widget's aggregated value ('count', 'avg', 'max', 'min', 'sum')</dd>
<dt><strong><code>title</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>Title of widget.</dd>
<dt><strong><code>description</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>Description text widget placed under widget title.</dd>
<dt><strong><code>footer</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>Footer text placed on the widget bottom</dd>
<dt><strong><code>is_global</code></strong> :&ensp;<code>boolean</code>, optional</dt>
<dd>Account for calculations based on the entire dataset ('global') vs.
the default of 'viewport' features.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><a title="cartoframes.viz.Widget" href="../index.html#cartoframes.viz.Widget"><code>Widget</code></a>: <a title="cartoframes.viz.widgets.Widget" href="#cartoframes.viz.widgets.Widget"><code>Widget</code></a> <code>with</code> <code>type</code>=<code>'formula'</code></dt>
<dd>&nbsp;</dd>
</dl>
<div class="admonition code">
<p class="admonition-title">Code</p>
<p>from cartoframes.viz import Map, Layer
from cartoframes.viz.widgets import formula_widget</p>
<p>Map(
Layer(
'seattle_collisions',
widgets=[
formula_widget(
'count',
title='Number of Collisions',
description='Zoom and/or pan the map to update count',
footer='collisions in this view'
)
]
)
)</p>
</div>
<div class="admonition code">
<p class="admonition-title">Code</p>
<p>from cartoframes.viz import Map, Layer
from cartoframes.viz.widgets import formula_widget</p>
<p>Map(
Layer(
'seattle_collisions',
widgets=[
formula_widget(
'pedcount',
'sum',
is_global=True,
title='Total Number of Pedestrians',
description='involved over all collisions',
footer='pedestrians'
)
]
)
)</p>
</div></section>
<details class="source">
<summary>Source code</summary>
<pre><code class="python">def formula_widget(value, operation=None, **kwargs):
    &#34;&#34;&#34;Helper function for quickly creating a formula widget.

    Formula widgets calculate aggregated values (&#39;Avg&#39;, &#39;Max&#39;, &#39;Min&#39;, &#39;Sum&#39;) from numeric columns
    or counts of features (&#39;Count&#39;) in a dataset.

    A formula widget&#39;s aggregations can be calculated on &#39;global&#39; or &#39;viewport&#39; based values.
    If you want the values in a formula widget to update on zoom and/or pan, use viewport based aggregations.

    Args:
        value (str): Column name of the numeric value
        operation (str): attribute for widget&#39;s aggregated value (&#39;count&#39;, &#39;avg&#39;, &#39;max&#39;, &#39;min&#39;, &#39;sum&#39;)
        title (str, optional): Title of widget.
        description (str, optional): Description text widget placed under widget title.
        footer (str, optional): Footer text placed on the widget bottom
        is_global (boolean, optional): Account for calculations based on the entire dataset (&#39;global&#39;) vs.
            the default of &#39;viewport&#39; features.

    Returns:
        cartoframes.viz.Widget: Widget with type=&#39;formula&#39;

    Example:

        .. code::

            from cartoframes.viz import Map, Layer
            from cartoframes.viz.widgets import formula_widget

            Map(
                Layer(
                    &#39;seattle_collisions&#39;,
                    widgets=[
                        formula_widget(
                            &#39;count&#39;,
                            title=&#39;Number of Collisions&#39;,
                            description=&#39;Zoom and/or pan the map to update count&#39;,
                            footer=&#39;collisions in this view&#39;
                        )
                    ]
                )
            )

        .. code::

            from cartoframes.viz import Map, Layer
            from cartoframes.viz.widgets import formula_widget

            Map(
                Layer(
                    &#39;seattle_collisions&#39;,
                    widgets=[
                        formula_widget(
                            &#39;pedcount&#39;,
                            &#39;sum&#39;,
                            is_global=True,
                            title=&#39;Total Number of Pedestrians&#39;,
                            description=&#39;involved over all collisions&#39;,
                            footer=&#39;pedestrians&#39;
                        )
                    ]
                )
            )
    &#34;&#34;&#34;

    data = kwargs
    data[&#39;type&#39;] = &#39;formula&#39;
    is_global = kwargs.get(&#39;is_global&#39;, False)
    data[&#39;value&#39;] = get_value_expression(operation, value, is_global)

    return Widget(data)</code></pre>
</details>
</dd>
<dt id="cartoframes.viz.widgets.histogram_widget"><code class="name flex">
<span>def <span class="ident">histogram_widget</span></span>(<span>value, **kwargs)</span>
</code></dt>
<dd>
<section class="desc"><p>Helper function for quickly creating a histogram widget.</p>
<p>Histogram widgets display the distribution of a numeric attribute, in buckets, to group
ranges of values in your data.
By default, you can hover over each bar to see each bucket's values and count, and also
filter your map's data within a given range</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>value</code></strong> :&ensp;<code>str</code></dt>
<dd>Column name of the numeric or date value</dd>
<dt><strong><code>title</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>Title of widget.</dd>
<dt><strong><code>description</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>Description text widget placed under widget title.</dd>
<dt><strong><code>footer</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>Footer text placed on the widget bottom</dd>
<dt><strong><code>buckets</code></strong> :&ensp;<code>number</code>, optional</dt>
<dd>Number of histogram buckets. Set to 20 by default.</dd>
<dt><strong><code>read_only</code></strong> :&ensp;<code>boolean</code>, optional</dt>
<dd>Interactively filter a range of numeric values by selecting them in the widget.
Set to "False" by default.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><a title="cartoframes.viz.Widget" href="../index.html#cartoframes.viz.Widget"><code>Widget</code></a>: <a title="cartoframes.viz.widgets.Widget" href="#cartoframes.viz.widgets.Widget"><code>Widget</code></a> <code>with</code> <code>type</code>=<code>'histogram'</code></dt>
<dd>&nbsp;</dd>
</dl>
<div class="admonition code">
<p class="admonition-title">Code</p>
<p>from cartoframes.viz import Map, Layer
from cartoframes.viz.widgets import histogram_widget</p>
<p>Map(
Layer(
'seattle_collisions',
widgets=[
histogram_widget(
'vehcount',
title='Number of Vehicles Involved',
description='Select a range of values to filter',
buckets=9
)
]
)
)</p>
</div></section>
<details class="source">
<summary>Source code</summary>
<pre><code class="python">def histogram_widget(value, **kwargs):
    &#34;&#34;&#34;Helper function for quickly creating a histogram widget.

    Histogram widgets display the distribution of a numeric attribute, in buckets, to group
    ranges of values in your data.
    By default, you can hover over each bar to see each bucket&#39;s values and count, and also
    filter your map&#39;s data within a given range

    Args:
        value (str): Column name of the numeric or date value
        title (str, optional): Title of widget.
        description (str, optional): Description text widget placed under widget title.
        footer (str, optional): Footer text placed on the widget bottom
        buckets (number, optional): Number of histogram buckets. Set to 20 by default.
        read_only (boolean, optional): Interactively filter a range of numeric values by selecting them in the widget.
          Set to &#34;False&#34; by default.

    Returns:
        cartoframes.viz.Widget: Widget with type=&#39;histogram&#39;

    Example:

        .. code::

            from cartoframes.viz import Map, Layer
            from cartoframes.viz.widgets import histogram_widget

            Map(
                Layer(
                    &#39;seattle_collisions&#39;,
                    widgets=[
                        histogram_widget(
                            &#39;vehcount&#39;,
                            title=&#39;Number of Vehicles Involved&#39;,
                            description=&#39;Select a range of values to filter&#39;,
                            buckets=9
                        )
                    ]
                )
            )
    &#34;&#34;&#34;

    data = kwargs
    data[&#39;type&#39;] = &#39;histogram&#39;
    data[&#39;value&#39;] = value
    data[&#39;read_only&#39;] = kwargs.get(&#39;read_only&#39;, False)
    return Widget(data)</code></pre>
</details>
</dd>
<dt id="cartoframes.viz.widgets.time_series_widget"><code class="name flex">
<span>def <span class="ident">time_series_widget</span></span>(<span>value, **kwargs)</span>
</code></dt>
<dd>
<section class="desc"><p>Helper function for quickly creating a time series widget.</p>
<p>The time series widget enables you to display animated data (by aggregation) over a specified date or numeric field.
Time series widgets provide a status bar of the animation, controls to play or pause, and the ability to filter on
a range of values.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>value</code></strong> :&ensp;<code>str</code></dt>
<dd>Column name of the numeric or date value</dd>
<dt><strong><code>title</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>Title of widget.</dd>
<dt><strong><code>description</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>Description text widget placed under widget title.</dd>
<dt><strong><code>footer</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>Footer text placed on the widget bottom</dd>
<dt><strong><code>buckets</code></strong> :&ensp;<code>number</code>, optional</dt>
<dd>Number of histogram buckets. Set to 20 by default.</dd>
<dt><strong><code>read_only</code></strong> :&ensp;<code>boolean</code>, optional</dt>
<dd>Interactively filter a range of numeric values by selecting them in the widget.
Set to "False" by default.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><a title="cartoframes.viz.Widget" href="../index.html#cartoframes.viz.Widget"><code>Widget</code></a>: <a title="cartoframes.viz.widgets.Widget" href="#cartoframes.viz.widgets.Widget"><code>Widget</code></a> <code>with</code> <code>type</code>=<code>'time</code>-<code>series'</code></dt>
<dd>&nbsp;</dd>
</dl>
<div class="admonition code">
<p class="admonition-title">Code</p>
<p>from cartoframes.viz import Map, Layer
from cartoframes.viz.widgets import time_series_widget</p>
<p>Map(
Layer(
'seattle_collisions',
'filter: animation($incdate, 20, fade(0.5,0.5))',
widgets=[
time_series_widget(
value='incdate',
title='Number of Collisions by Date',
description= 'Play, pause, or select a range for the animation',
buckets=10
)]
)
)</p>
</div></section>
<details class="source">
<summary>Source code</summary>
<pre><code class="python">def time_series_widget(value, **kwargs):
    &#34;&#34;&#34;Helper function for quickly creating a time series widget.

    The time series widget enables you to display animated data (by aggregation) over a specified date or numeric field.
    Time series widgets provide a status bar of the animation, controls to play or pause, and the ability to filter on
    a range of values.

    Args:
        value (str): Column name of the numeric or date value
        title (str, optional): Title of widget.
        description (str, optional): Description text widget placed under widget title.
        footer (str, optional): Footer text placed on the widget bottom
        buckets (number, optional): Number of histogram buckets. Set to 20 by default.
        read_only (boolean, optional): Interactively filter a range of numeric values by selecting them in the widget.
          Set to &#34;False&#34; by default.

    Returns:
        cartoframes.viz.Widget: Widget with type=&#39;time-series&#39;

    Example:

        .. code::

            from cartoframes.viz import Map, Layer
            from cartoframes.viz.widgets import time_series_widget

            Map(
                Layer(
                    &#39;seattle_collisions&#39;,
                    &#39;filter: animation($incdate, 20, fade(0.5,0.5))&#39;,
                    widgets=[
                        time_series_widget(
                            value=&#39;incdate&#39;,
                            title=&#39;Number of Collisions by Date&#39;,
                            description= &#39;Play, pause, or select a range for the animation&#39;,
                            buckets=10
                        )]
                )
            )
    &#34;&#34;&#34;
    data = kwargs
    data[&#39;type&#39;] = &#39;time-series&#39;
    data[&#39;value&#39;] = value
    data[&#39;read_only&#39;] = kwargs.get(&#39;read_only&#39;, False)
    return Widget(data)</code></pre>
</details>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="cartoframes.viz.widgets.Widget"><code class="flex name class">
<span>class <span class="ident">Widget</span></span>
<span>(</span><span>f_arg, **kwargs)</span>
</code></dt>
<dd>
<section class="desc"><p>Widget</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>type</code></strong></dt>
<dd>The widget type. It can be 'default', 'formula', time-series', 'animation', 'category', 'histogram'.</dd>
<dt><strong><code>value</code></strong></dt>
<dd>A constant value or a CARTO VL expression.</dd>
<dt><strong><code>title</code></strong> :&ensp;optional</dt>
<dd>Widget title.</dd>
<dt><strong><code>description</code></strong> :&ensp;optional</dt>
<dd>Description shown below the title.</dd>
<dt><strong><code>footer</code></strong> :&ensp;optional</dt>
<dd>Footer of widget. This is often used to attribute data sources.</dd>
</dl>
<p>Example:</p>
<div class="admonition code">
<p class="admonition-title">Code</p>
<p>from cartoframes.viz import Widget</p>
<p>Widget('formula', value='viewportSum($amount)', title='Widget Title',
'description': '[description]', 'footer': '[footer]')</p>
</div></section>
<details class="source">
<summary>Source code</summary>
<pre><code class="python">class Widget():
    &#34;&#34;&#34;Widget

    Args:
        type: The widget type. It can be &#39;default&#39;, &#39;formula&#39;, time-series&#39;, &#39;animation&#39;, &#39;category&#39;, &#39;histogram&#39;.
        value: A constant value or a CARTO VL expression.
        title (optional): Widget title.
        description (optional): Description shown below the title.
        footer (optional): Footer of widget. This is often used to attribute data sources.

    Example:

    .. code::

        from cartoframes.viz import Widget

        Widget(&#39;formula&#39;, value=&#39;viewportSum($amount)&#39;, title=&#39;Widget Title&#39;,
               &#39;description&#39;: &#39;[description]&#39;, &#39;footer&#39;: &#39;[footer]&#39;)
    &#34;&#34;&#34;

    def __init__(self, f_arg, **kwargs):
        if isinstance(f_arg, dict):
            self._init_widget(f_arg)
        elif isinstance(f_arg, str):
            self._init_widget(kwargs, f_arg)
        else:
            raise ValueError(&#39;Wrong widget input.&#39;)

    def _init_widget(self, data, widget_type=None):
        self._type = &#39;&#39;
        self._value = &#39;&#39;
        self._variable_name = &#39;&#39;
        self._title = &#39;&#39;
        self._prop = &#39;&#39;
        self._description = &#39;&#39;
        self._footer = &#39;&#39;
        self._options = {}

        if data is not None:
            self._type = widget_type if widget_type else data.get(&#39;type&#39;, &#39;&#39;)
            self._value = data.get(&#39;value&#39;, &#39;&#39;)
            self._variable_name = gen_variable_name(self._value) if self._value else &#39;&#39;
            self._title = data.get(&#39;title&#39;, &#39;&#39;)
            self._description = data.get(&#39;description&#39;, &#39;&#39;)
            self._footer = data.get(&#39;footer&#39;, &#39;&#39;)
            self._prop = self.get_default_prop(data)

            options = self._get_options_from_data(data)
            self._options = camel_dictionary(options)
        else:
            raise ValueError(&#39;Wrong widget input.&#39;)

    def get_default_prop(self, data):
        prop = data.get(&#39;prop&#39;, &#39;&#39;)
        return &#39;filter&#39; if self._type in (&#39;animation&#39;, &#39;time-series&#39;) and not prop else prop

    def get_info(self):
        if self._type or self._title or self._description or self._footer:
            self._check_type()

            return {
                &#39;type&#39;: self._type,
                &#39;prop&#39;: self._prop,
                &#39;value&#39;: self._value,
                &#39;variable_name&#39;: self._variable_name,
                &#39;title&#39;: self._title,
                &#39;description&#39;: self._description,
                &#39;footer&#39;: self._footer,
                &#39;has_bridge&#39;: self.has_bridge(),
                &#39;options&#39;: self._options
            }
        else:
            return {}

    def has_bridge(self):
        return self._type not in (&#39;formula&#39;, &#39;default&#39;)

    def _check_type(self):
        if self._type and self._type not in constants.WIDGET_TYPES:
            raise ValueError(
                &#39;Widget type is not valid. Valid widget types are: {}.&#39;.format(
                    &#39;, &#39;.join(constants.WIDGET_TYPES)
                ))

    def _get_options_from_data(self, data):
        options = {}
        attributes = [&#39;type&#39;, &#39;value&#39;, &#39;title&#39;, &#39;footer&#39;, &#39;prop&#39;, &#39;description&#39;]

        for key, value in data.items():
            if key not in attributes:
                options[key] = value

        options[&#39;read_only&#39;] = data.get(&#39;read_only&#39;, False)
        options[&#39;buckets&#39;] = data.get(&#39;buckets&#39;, 20)

        return options</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="cartoframes.viz.widgets.Widget.get_default_prop"><code class="name flex">
<span>def <span class="ident">get_default_prop</span></span>(<span>self, data)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>Source code</summary>
<pre><code class="python">def get_default_prop(self, data):
    prop = data.get(&#39;prop&#39;, &#39;&#39;)
    return &#39;filter&#39; if self._type in (&#39;animation&#39;, &#39;time-series&#39;) and not prop else prop</code></pre>
</details>
</dd>
<dt id="cartoframes.viz.widgets.Widget.get_info"><code class="name flex">
<span>def <span class="ident">get_info</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>Source code</summary>
<pre><code class="python">def get_info(self):
    if self._type or self._title or self._description or self._footer:
        self._check_type()

        return {
            &#39;type&#39;: self._type,
            &#39;prop&#39;: self._prop,
            &#39;value&#39;: self._value,
            &#39;variable_name&#39;: self._variable_name,
            &#39;title&#39;: self._title,
            &#39;description&#39;: self._description,
            &#39;footer&#39;: self._footer,
            &#39;has_bridge&#39;: self.has_bridge(),
            &#39;options&#39;: self._options
        }
    else:
        return {}</code></pre>
</details>
</dd>
<dt id="cartoframes.viz.widgets.Widget.has_bridge"><code class="name flex">
<span>def <span class="ident">has_bridge</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>Source code</summary>
<pre><code class="python">def has_bridge(self):
    return self._type not in (&#39;formula&#39;, &#39;default&#39;)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="cartoframes.viz.widgets.WidgetList"><code class="flex name class">
<span>class <span class="ident">WidgetList</span></span>
<span>(</span><span>widgets=None)</span>
</code></dt>
<dd>
<section class="desc"><p>WidgetList
Args:
widgets (dict, list, Widget): The list of widgets for a layer.</p>
<div class="admonition code">
<p class="admonition-title">Code:&ensp;python</p>
<p>from cartoframes.viz import Widget</p>
<p>WidgetList([{
type: 'formula',
value: 'viewportSum($amount)'
title: '&hellip;',
description: '&hellip;',
footer: '&hellip;'
}, {
'type': 'default',
'value': '"Custom Info"',
}])</p>
</div></section>
<details class="source">
<summary>Source code</summary>
<pre><code class="python">class WidgetList(object):
    &#34;&#34;&#34;WidgetList
     Args:
        widgets (dict, list, Widget): The list of widgets for a layer.

    Example:

        .. code::python

            from cartoframes.viz import Widget

            WidgetList([{
                type: &#39;formula&#39;,
                value: &#39;viewportSum($amount)&#39;
                title: &#39;...&#39;,
                description: &#39;...&#39;,
                footer: &#39;...&#39;
            }, {
                &#39;type&#39;: &#39;default&#39;,
                &#39;value&#39;: &#39;&#34;Custom Info&#34;&#39;,
            }])
    &#34;&#34;&#34;

    def __init__(self, widgets=None):
        self._widgets = self._init_widgets(widgets)

    def _init_widgets(self, widgets):
        if isinstance(widgets, list):
            widget_list = []
            for widget in widgets:
                if isinstance(widget, dict):
                    widget_list.append(Widget(widget))
                elif isinstance(widget, Widget):
                    widget_list.append(widget)
            return widget_list
        if isinstance(widgets, dict):
            return [Widget(widgets)]
        elif isinstance(widgets, Widget):
            return [widgets]
        else:
            return []

    def get_widgets_info(self):
        widgets_info = []
        for widget in self._widgets:
            if widget:
                widgets_info.append(widget.get_info())

        return widgets_info

    def get_variables(self):
        output = {}
        for widget in self._widgets:
            if widget._variable_name:
                output[widget._variable_name] = &#39;$&#39; + widget._value if widget.has_bridge() else widget._value

        return output</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="cartoframes.viz.widgets.WidgetList.get_variables"><code class="name flex">
<span>def <span class="ident">get_variables</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>Source code</summary>
<pre><code class="python">def get_variables(self):
    output = {}
    for widget in self._widgets:
        if widget._variable_name:
            output[widget._variable_name] = &#39;$&#39; + widget._value if widget.has_bridge() else widget._value

    return output</code></pre>
</details>
</dd>
<dt id="cartoframes.viz.widgets.WidgetList.get_widgets_info"><code class="name flex">
<span>def <span class="ident">get_widgets_info</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>Source code</summary>
<pre><code class="python">def get_widgets_info(self):
    widgets_info = []
    for widget in self._widgets:
        if widget:
            widgets_info.append(widget.get_info())

    return widgets_info</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="cartoframes.viz" href="../index.html">cartoframes.viz</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="two-column">
<li><code><a title="cartoframes.viz.widgets.animation_widget" href="#cartoframes.viz.widgets.animation_widget">animation_widget</a></code></li>
<li><code><a title="cartoframes.viz.widgets.category_widget" href="#cartoframes.viz.widgets.category_widget">category_widget</a></code></li>
<li><code><a title="cartoframes.viz.widgets.default_widget" href="#cartoframes.viz.widgets.default_widget">default_widget</a></code></li>
<li><code><a title="cartoframes.viz.widgets.formula_widget" href="#cartoframes.viz.widgets.formula_widget">formula_widget</a></code></li>
<li><code><a title="cartoframes.viz.widgets.histogram_widget" href="#cartoframes.viz.widgets.histogram_widget">histogram_widget</a></code></li>
<li><code><a title="cartoframes.viz.widgets.time_series_widget" href="#cartoframes.viz.widgets.time_series_widget">time_series_widget</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="cartoframes.viz.widgets.Widget" href="#cartoframes.viz.widgets.Widget">Widget</a></code></h4>
<ul class="">
<li><code><a title="cartoframes.viz.widgets.Widget.get_default_prop" href="#cartoframes.viz.widgets.Widget.get_default_prop">get_default_prop</a></code></li>
<li><code><a title="cartoframes.viz.widgets.Widget.get_info" href="#cartoframes.viz.widgets.Widget.get_info">get_info</a></code></li>
<li><code><a title="cartoframes.viz.widgets.Widget.has_bridge" href="#cartoframes.viz.widgets.Widget.has_bridge">has_bridge</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="cartoframes.viz.widgets.WidgetList" href="#cartoframes.viz.widgets.WidgetList">WidgetList</a></code></h4>
<ul class="">
<li><code><a title="cartoframes.viz.widgets.WidgetList.get_variables" href="#cartoframes.viz.widgets.WidgetList.get_variables">get_variables</a></code></li>
<li><code><a title="cartoframes.viz.widgets.WidgetList.get_widgets_info" href="#cartoframes.viz.widgets.WidgetList.get_widgets_info">get_widgets_info</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.6.3</a>.</p>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>
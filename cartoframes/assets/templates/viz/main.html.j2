<!DOCTYPE html>
<html lang="en">
<head>
  <title>{{title}}</title>
  <meta name="description" content="{{ description }}">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="UTF-8">

  <!-- Include CARTO VL or Web-SDK -->
  {% if render == 'carto-vl' %}
    <script src="{{carto_vl_path}}"></script>
  {% else %}
    <script src="https://unpkg.com/deck.gl@8.2.0/dist.min.js"></script>
    <script src="{{web_sdk_path}}"></script>
  {% endif %}

  <!-- Include Mapbox -->
  <script src="https://api.tiles.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.js"></script>
  <link href="https://api.tiles.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.css" rel="stylesheet" type="text/css" />

  <!-- Include Airship -->
  <script nomodule="" src="{{airship_components_path}}"></script>
  <script type="module" src="{{airship_module_path}}"></script>
  <script src="{{airship_bridge_path}}"></script>
  <link href="{{airship_styles_path}}" rel="stylesheet">
  <link href="{{airship_icons_path}}" rel="stylesheet">

  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">

  <!-- External libraries -->

  <!-- pako -->
  <script src="https://libs.cartocdn.com/cartoframes/dependencies/pako_inflate.min.js"></script>

  <!-- html2canvas -->
  {% if is_static %}
    <script src="https://libs.cartocdn.com/cartoframes/dependencies/html2canvas.min.js"></script>
  {% endif %}

  {% if theme %}
    {% include 'style/themes/' + theme + '.html.j2' %}
  {% endif %}
  {% include 'style/common.html.j2' %}
  {% include 'style/map.html.j2' %}
  {% include 'style/error.html.j2' %}
  {% include 'style/popup.html.j2' %}
  {% include 'style/widgets.html.j2' %}
</head>

<body class="as-app-body as-app">
  <img id="map-image" class="map-image" alt='Static map image' />
  <as-responsive-content id="main-container">
    {% if has_widgets %}
      {% include 'templates/viz/widgets.html.j2' %}
    {% endif %}
    <main class="as-main">
      <div class="as-map-area">
        <div id="map" class="map"></div>
        {% if show_info %}
          <div id="map-info" class="map-info"></div>
        {% endif %}
        {% if has_legends or layer_selector %}
          <div class="as-map-panels" data-name="Legends">
            <div class="as-panel as-panel--vertical as-panel--left as-panel--top">
              {% include 'templates/viz/legends.html.j2' %}
            </div> <!-- as-panel -->
          </div> <!-- as-map-panels -->
        {% endif %}
      </div> <!-- as-map-area -->
    </main> <!-- as-main -->
  </as-responsive-content>

  {% if is_embed %}
    {% include 'templates/viz/footer.html.j2' %}
  {% endif %}

  {% include 'templates/error/basic.html.j2' %}
</body>

{% if render == 'carto-vl' %}
  <script>
    {% include 'src/bundle.js' %}
  </script>
  <script>
    {% include 'init_carto_vl.js.j2' %}
  </script>
{% else %}
  <script>
    {% include 'init_web_sdk.js.j2' %}
  </script>
{% endif %}
</html>
